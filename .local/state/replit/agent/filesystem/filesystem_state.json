{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Overview\n\nJumboJolt is a privacy-first social platform that empowers Indian consumers to switch from foreign products to quality Indian alternatives. The application is built as a full-stack monorepo with a React frontend and Express backend, featuring Firebase authentication, social feeds for product switches, gamification through points and leaderboards, and admin functionality for content moderation.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# Recent Changes\n\n## Bug Fixes (August 14, 2025)\n- Fixed critical server crash in `/api/feed` endpoint caused by incorrect database table aliasing in `getFeedPosts` method\n- Resolved TypeScript type errors in `EnhancedModeratorPanel.tsx` by updating import path from `@/lib/auth` to `@/context/AuthContext`\n- Fixed API request usage in moderator panel by correcting `apiRequest` function calls and adding proper type annotations\n- Resolved DOM nesting warnings in Navigation component by replacing nested anchor tags with proper Link/span combinations\n- Fixed syntax errors in storage.ts methods by adding missing closing braces to `getMessagesForUser` and `getUnreadMessages` methods\n- Corrected database query type errors by fixing nullable field handling in reaction and comment operations\n- Improved navigation accessibility by removing nested `<a>` tags that caused React validation warnings\n- Enhanced error handling and logging for better debugging capabilities\n\n## Application Status\n- All main API endpoints now working correctly: `/api/feed`, `/api/leaderboard`, `/api/trending`, `/api/auth/login`\n- Database operations functioning properly with proper type safety\n- Frontend navigation rendering without React warnings\n- Authentication flow working with Firebase integration\n- TypeScript compilation successful with minimal remaining diagnostics\n\n# System Architecture\n\n## Frontend Architecture\n- **React with TypeScript**: Modern component-based architecture using functional components and hooks\n- **Vite Build System**: Fast development server and optimized production builds\n- **Wouter Router**: Lightweight client-side routing for single-page application navigation\n- **UI Framework**: shadcn/ui components with Radix UI primitives for accessibility\n- **Styling**: Tailwind CSS with custom Indian-inspired color palette (saffron, forest green, royal blue)\n- **State Management**: React Query for server state, React Context for authentication state\n- **Form Management**: React Hook Form with Zod validation schemas\n\n## Backend Architecture\n- **Express.js Server**: RESTful API with middleware-based request processing\n- **Database Layer**: PostgreSQL with Drizzle ORM for type-safe database operations\n- **Connection Pooling**: Neon serverless PostgreSQL with connection pooling via @neondatabase/serverless\n- **Schema Management**: Centralized database schema in shared directory using Drizzle\n- **Storage Interface**: Abstracted data access layer with IStorage interface for modularity\n\n## Authentication & Authorization\n- **Firebase Authentication**: Phone/SMS OTP and email authentication\n- **Role-based Access**: User roles (MEMBER, MODERATOR, STRATEGIST, ADMIN) with different permission levels\n- **Privacy-focused**: Handle-based usernames with optional public aliases for social sharing\n- **Session Management**: Firebase token verification middleware for protected routes\n\n## Data Architecture\n- **PostgreSQL Schema**: Comprehensive relational model with users, brands, switch logs, posts, comments, and suggestions\n- **Gamification System**: Points, levels, and leaderboards with automatic scoring for product switches\n- **Content Categories**: Structured product categories (Food & Beverages, Electronics, Fashion, etc.)\n- **Social Features**: Posts, likes, comments, and user-generated content with moderation capabilities\n\n## File Upload & Storage\n- **Google Cloud Storage**: File upload handling with @google-cloud/storage\n- **Uppy Integration**: Progressive file upload UI with drag-and-drop support\n- **Multiple Upload Methods**: Dashboard, drag-drop, and file input components\n\n# External Dependencies\n\n## Core Services\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **Firebase**: Authentication service for phone/email OTP verification\n- **Google Cloud Storage**: File storage and CDN for user-generated content\n\n## Development & Build Tools\n- **Vite**: Frontend development server and build system\n- **TypeScript**: Type safety across the entire application\n- **Drizzle Kit**: Database migration and schema management\n- **ESBuild**: Backend bundling for production deployment\n\n## UI & Component Libraries\n- **Radix UI**: Accessible component primitives for dropdowns, dialogs, forms\n- **Lucide Icons**: Consistent icon system throughout the application\n- **Tailwind CSS**: Utility-first styling with custom design tokens\n- **React Query**: Server state management and caching\n\n## Form & Validation\n- **React Hook Form**: Performant form handling with minimal re-renders\n- **Zod**: Runtime schema validation shared between frontend and backend\n- **Input Validation**: Type-safe form validation with error handling\n\n## Deployment & Monitoring\n- **Replit Integration**: Development environment with hot reloading and error overlay\n- **Environment Configuration**: Separate development and production settings\n- **Error Handling**: Centralized error management with user-friendly messages","size_bytes":5439},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2766},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { WebSocketServer, WebSocket } from \"ws\";\nimport { storage } from \"./storage\";\nimport {\n  insertSwitchLogSchema,\n  insertPostSchema,\n  insertBrandSchema,\n  insertCommentSchema,\n  insertTargetSuggestionSchema,\n  insertFeedbackQuestionSchema,\n  insertMissionSchema,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const { firebaseUid, phone, email, handle, region } = req.body;\n\n      // Check if handle is available\n      const existingUser = await storage.getUserByHandle(handle);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Handle already taken\" });\n      }\n\n      const user = await storage.createUser({\n        firebaseUid,\n        phone,\n        email,\n        handle,\n        region,\n      });\n\n      res.json({\n        user: {\n          id: user.id,\n          handle: user.handle,\n          points: user.points,\n          level: user.level,\n        },\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ error: \"Registration failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { firebaseUid } = req.body;\n\n      const user = await storage.getUserByFirebaseUid(firebaseUid);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      // Update last login\n      await storage.updateUser(user.id, { lastLoginAt: new Date() });\n\n      res.json({\n        user: {\n          id: user.id,\n          handle: user.handle,\n          points: user.points,\n          level: user.level,\n          role: user.role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Login failed\" });\n    }\n  });\n\n  // Switch logging\n  app.post(\"/api/switches\", async (req, res) => {\n    try {\n      const validatedData = insertSwitchLogSchema.parse(req.body);\n\n      // Handle brand creation if not exists\n      if (validatedData.fromBrandId && validatedData.toBrandId) {\n        const switchLog = await storage.createSwitchLog(validatedData);\n\n        // Create post if public\n        if (validatedData.isPublic) {\n          await storage.createPost({\n            userId: validatedData.userId,\n            switchLogId: switchLog.id,\n            content: validatedData.reason || \"Made a great switch!\",\n          });\n        }\n\n        res.json({ switchLog });\n      } else {\n        res.status(400).json({ error: \"Brand IDs required\" });\n      }\n    } catch (error) {\n      console.error(\"Switch logging error:\", error);\n      res.status(400).json({ error: \"Invalid switch data\" });\n    }\n  });\n\n  // Feed\n  app.get(\"/api/feed\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 20;\n      const posts = await storage.getFeedPosts(limit);\n      res.json({ posts });\n    } catch (error) {\n      console.error(\"Feed error:\", error);\n      res.status(500).json({ error: \"Failed to load feed\" });\n    }\n  });\n\n  // Leaderboard\n  app.get(\"/api/leaderboard\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 10;\n      const users = await storage.getLeaderboard(limit);\n      res.json({ leaderboard: users });\n    } catch (error) {\n      console.error(\"Leaderboard error:\", error);\n      res.status(500).json({ error: \"Failed to load leaderboard\" });\n    }\n  });\n\n  // Trending\n  app.get(\"/api/trending\", async (req, res) => {\n    try {\n      const trendingBrands = await storage.getTrendingBrands();\n      res.json({ trending: trendingBrands });\n    } catch (error) {\n      console.error(\"Trending error:\", error);\n      res.status(500).json({ error: \"Failed to load trending\" });\n    }\n  });\n\n  // Brands\n  app.get(\"/api/brands/search\", async (req, res) => {\n    try {\n      const query = req.query.q as string;\n      if (!query) {\n        return res.status(400).json({ error: \"Query parameter required\" });\n      }\n\n      const brands = await storage.searchBrands(query);\n      res.json({ brands });\n    } catch (error) {\n      console.error(\"Brand search error:\", error);\n      res.status(500).json({ error: \"Brand search failed\" });\n    }\n  });\n\n  app.post(\"/api/brands\", async (req, res) => {\n    try {\n      const validatedData = insertBrandSchema.parse(req.body);\n      const brand = await storage.createBrand(validatedData);\n      res.json({ brand });\n    } catch (error) {\n      console.error(\"Brand creation error:\", error);\n      res.status(400).json({ error: \"Invalid brand data\" });\n    }\n  });\n\n  // Social interactions\n  app.post(\"/api/posts/:postId/like\", async (req, res) => {\n    try {\n      const { postId } = req.params;\n      const { userId } = req.body;\n\n      const liked = await storage.toggleLike(userId, postId);\n      res.json({ liked });\n    } catch (error) {\n      console.error(\"Like error:\", error);\n      res.status(500).json({ error: \"Failed to toggle like\" });\n    }\n  });\n\n  app.post(\"/api/posts/:postId/comments\", async (req, res) => {\n    try {\n      const { postId } = req.params;\n      const validatedData = insertCommentSchema.parse({ ...req.body, postId });\n\n      const comment = await storage.addComment(validatedData);\n      res.json({ comment });\n    } catch (error) {\n      console.error(\"Comment error:\", error);\n      res.status(400).json({ error: \"Invalid comment data\" });\n    }\n  });\n\n  app.get(\"/api/posts/:postId/comments\", async (req, res) => {\n    try {\n      const { postId } = req.params;\n      const comments = await storage.getPostComments(postId);\n      res.json({ comments });\n    } catch (error) {\n      console.error(\"Comments fetch error:\", error);\n      res.status(500).json({ error: \"Failed to load comments\" });\n    }\n  });\n\n  // Target suggestions\n  app.post(\"/api/suggestions\", async (req, res) => {\n    try {\n      const validatedData = insertTargetSuggestionSchema.parse(req.body);\n      const suggestion = await storage.createTargetSuggestion(validatedData);\n      res.json({ suggestion });\n    } catch (error) {\n      console.error(\"Suggestion error:\", error);\n      res.status(400).json({ error: \"Invalid suggestion data\" });\n    }\n  });\n\n  // Admin routes\n  app.get(\"/api/admin/suggestions\", async (req, res) => {\n    try {\n      const status = req.query.status as string;\n      const suggestions = await storage.getTargetSuggestions(status);\n      res.json({ suggestions });\n    } catch (error) {\n      console.error(\"Admin suggestions error:\", error);\n      res.status(500).json({ error: \"Failed to load suggestions\" });\n    }\n  });\n\n  app.patch(\"/api/admin/suggestions/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const updates = req.body;\n\n      const suggestion = await storage.updateTargetSuggestion(id, updates);\n      res.json({ suggestion });\n    } catch (error) {\n      console.error(\"Suggestion update error:\", error);\n      res.status(500).json({ error: \"Failed to update suggestion\" });\n    }\n  });\n\n  // User profile\n  app.get(\"/api/users/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const user = await storage.getUser(id);\n\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      const switchLogs = await storage.getUserSwitchLogs(id);\n\n      res.json({\n        user: {\n          id: user.id,\n          handle: user.handle,\n          points: user.points,\n          level: user.level,\n          switchCount: user.switchCount,\n          createdAt: user.createdAt,\n        },\n        switches: switchLogs,\n      });\n    } catch (error) {\n      console.error(\"User profile error:\", error);\n      res.status(500).json({ error: \"Failed to load user profile\" });\n    }\n  });\n\n  // Enhanced API routes for new features\n\n  // Get weekly leaderboard\n  app.get(\"/api/leaderboard/weekly\", async (req, res) => {\n    try {\n      const leaderboard = await storage.getWeeklyLeaderboard();\n      res.json(leaderboard);\n    } catch (error) {\n      console.error(\"Error fetching weekly leaderboard:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Get monthly leaderboard\n  app.get(\"/api/leaderboard/monthly\", async (req, res) => {\n    try {\n      const leaderboard = await storage.getMonthlyLeaderboard();\n      res.json(leaderboard);\n    } catch (error) {\n      console.error(\"Error fetching monthly leaderboard:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Enhanced reactions API\n  app.post(\"/api/posts/:id/reactions\", async (req, res) => {\n    try {\n      const { type, userId } = req.body;\n      if (!type || !userId) {\n        return res.status(400).json({ error: \"Type and userId are required\" });\n      }\n\n      const reaction = await storage.addReaction({\n        postId: req.params.id,\n        type,\n        userId,\n      });\n      res.json(reaction);\n    } catch (error) {\n      console.error(\"Error adding reaction:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Get reactions for a post\n  app.get(\"/api/posts/:id/reactions\", async (req, res) => {\n    try {\n      const reactions = await storage.getPostReactions(req.params.id);\n      res.json(reactions);\n    } catch (error) {\n      console.error(\"Error getting reactions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Trending data endpoints\n  app.get(\"/api/brands/trending\", async (req, res) => {\n    try {\n      const brands = await storage.getTrendingBrands();\n      res.json(brands);\n    } catch (error) {\n      console.error(\"Error fetching trending brands:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/categories/trending\", async (req, res) => {\n    try {\n      const categories = await storage.getTrendingCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching trending categories:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Moderation endpoints\n  app.get(\"/api/moderation/reports\", async (req, res) => {\n    try {\n      const status = req.query.status as string;\n      const reports = await storage.getModerationReports(status);\n      res.json(reports);\n    } catch (error) {\n      console.error(\"Error fetching moderation reports:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/moderation/reports\", async (req, res) => {\n    try {\n      const report = await storage.createModerationReport(req.body);\n      res.json(report);\n    } catch (error) {\n      console.error(\"Error creating moderation report:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/reports/:id\", async (req, res) => {\n    try {\n      const report = await storage.updateModerationReport(\n        req.params.id,\n        req.body,\n      );\n      res.json(report);\n    } catch (error) {\n      console.error(\"Error updating moderation report:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Switch log approval routes\n  app.get(\"/api/moderation/switch-logs/pending\", async (req, res) => {\n    try {\n      const pendingLogs = await storage.getPendingSwitchLogs();\n      res.json(pendingLogs);\n    } catch (error) {\n      console.error(\"Error fetching pending switch logs:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Moderator post creation endpoints\n  app.post(\"/api/moderation/posts\", async (req, res) => {\n    try {\n      const post = await storage.createModeratorPost(req.body);\n      res.status(201).json(post);\n    } catch (error) {\n      console.error(\"Error creating moderator post:\", error);\n      res.status(500).json({ error: \"Failed to create post\" });\n    }\n  });\n\n  // Get all posts with details (including moderator posts)\n  app.get(\"/api/posts\", async (req, res) => {\n    try {\n      const posts = await storage.getAllPostsWithDetails();\n      res.json({ posts });\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n      res.status(500).json({ error: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Get posts by type\n  app.get(\"/api/posts/type/:type\", async (req, res) => {\n    try {\n      const { type } = req.params;\n      const posts = await storage.getPostsByType(type);\n      res.json({ posts });\n    } catch (error) {\n      console.error(\"Error fetching posts by type:\", error);\n      res.status(500).json({ error: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Create switch log from post interaction\n  app.post(\"/api/switch-logs/from-post\", async (req, res) => {\n    try {\n      const switchLog = await storage.createSwitchLogFromPost(req.body);\n      res.status(201).json(switchLog);\n    } catch (error) {\n      console.error(\"Error creating switch log from post:\", error);\n      res.status(500).json({ error: \"Failed to create switch log\" });\n    }\n  });\n\n  app.put(\"/api/moderation/switch-logs/:id/approve\", async (req, res) => {\n    try {\n      const { moderatorId, notes } = req.body;\n      const switchLog = await storage.approveSwitchLog(\n        req.params.id,\n        moderatorId,\n        notes,\n      );\n      res.json(switchLog);\n    } catch (error) {\n      console.error(\"Error approving switch log:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/switch-logs/:id/reject\", async (req, res) => {\n    try {\n      const { moderatorId, notes } = req.body;\n      const switchLog = await storage.rejectSwitchLog(\n        req.params.id,\n        moderatorId,\n        notes,\n      );\n      res.json(switchLog);\n    } catch (error) {\n      console.error(\"Error rejecting switch log:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Feedback question routes\n  app.post(\"/api/moderation/feedback-questions\", async (req, res) => {\n    try {\n      const validatedData = insertFeedbackQuestionSchema.parse(req.body);\n      const question = await storage.createFeedbackQuestion(validatedData);\n      res.json(question);\n    } catch (error) {\n      console.error(\"Error creating feedback question:\", error);\n      res.status(400).json({ error: \"Invalid question data\" });\n    }\n  });\n\n  app.get(\"/api/moderation/feedback-questions\", async (req, res) => {\n    try {\n      const activeOnly = req.query.active === \"true\";\n      const questions = await storage.getFeedbackQuestions(activeOnly);\n      res.json(questions);\n    } catch (error) {\n      console.error(\"Error fetching feedback questions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/feedback-questions/:id\", async (req, res) => {\n    try {\n      const question = await storage.updateFeedbackQuestion(\n        req.params.id,\n        req.body,\n      );\n      res.json(question);\n    } catch (error) {\n      console.error(\"Error updating feedback question:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.delete(\"/api/moderation/feedback-questions/:id\", async (req, res) => {\n    try {\n      await storage.deleteFeedbackQuestion(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting feedback question:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.get(\n    \"/api/moderation/feedback-questions/:id/responses\",\n    async (req, res) => {\n      try {\n        const responses = await storage.getFeedbackResponses(req.params.id);\n        res.json(responses);\n      } catch (error) {\n        console.error(\"Error fetching feedback responses:\", error);\n        res.status(500).json({ error: \"Internal server error\" });\n      }\n    },\n  );\n\n  // Mission routes\n  app.post(\"/api/moderation/missions\", async (req, res) => {\n    try {\n      const validatedData = insertMissionSchema.parse(req.body);\n      const mission = await storage.createMission(validatedData);\n      res.json(mission);\n    } catch (error) {\n      console.error(\"Error creating mission:\", error);\n      res.status(400).json({ error: \"Invalid mission data\" });\n    }\n  });\n\n  app.get(\"/api/moderation/missions\", async (req, res) => {\n    try {\n      const activeOnly = req.query.active === \"true\";\n      const missions = await storage.getMissions(activeOnly);\n      res.json(missions);\n    } catch (error) {\n      console.error(\"Error fetching missions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Moderation API for mission submissions - get all pending switch logs from missions\n  app.get(\"/api/moderation/mission-submissions\", async (req, res) => {\n    try {\n      const submissions = await storage.getMissionSubmissions();\n      res.json(submissions);\n    } catch (error) {\n      console.error(\"Error fetching mission submissions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/missions/:id\", async (req, res) => {\n    try {\n      const mission = await storage.updateMission(req.params.id, req.body);\n      res.json(mission);\n    } catch (error) {\n      console.error(\"Error updating mission:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.delete(\"/api/moderation/missions/:id\", async (req, res) => {\n    try {\n      await storage.deleteMission(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting mission:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Member management routes\n  app.get(\"/api/moderation/users\", async (req, res) => {\n    try {\n      const filters = {\n        role: req.query.role as string,\n        active: req.query.active === \"true\",\n      };\n      const users = await storage.getAllUsers(filters);\n      res.json(users);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/moderation/users/:id\", async (req, res) => {\n    try {\n      const userDetails = await storage.getUserDetails(req.params.id);\n      res.json(userDetails);\n    } catch (error) {\n      console.error(\"Error fetching user details:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/users/:id/role\", async (req, res) => {\n    try {\n      const { role } = req.body;\n      const user = await storage.updateUserRole(req.params.id, role);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error updating user role:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // News article routes\n  app.post(\"/api/moderation/news\", async (req, res) => {\n    try {\n      const newsArticle = await storage.createNewsArticle(req.body);\n      res.json(newsArticle);\n    } catch (error) {\n      console.error(\"Error creating news article:\", error);\n      res.status(500).json({ error: \"Failed to create news article\" });\n    }\n  });\n\n  app.get(\"/api/moderation/news\", async (req, res) => {\n    try {\n      const newsArticles = await storage.getNewsArticles();\n      res.json(newsArticles);\n    } catch (error) {\n      console.error(\"Error fetching news articles:\", error);\n      res.status(500).json({ error: \"Failed to fetch news articles\" });\n    }\n  });\n\n  app.put(\"/api/moderation/news/:id\", async (req, res) => {\n    try {\n      const newsArticle = await storage.updateNewsArticle(\n        req.params.id,\n        req.body,\n      );\n      res.json(newsArticle);\n    } catch (error) {\n      console.error(\"Error updating news article:\", error);\n      res.status(500).json({ error: \"Failed to update news article\" });\n    }\n  });\n\n  app.delete(\"/api/moderation/news/:id\", async (req, res) => {\n    try {\n      await storage.deleteNewsArticle(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting news article:\", error);\n      res.status(500).json({ error: \"Failed to delete news article\" });\n    }\n  });\n\n  // Post creation with image support\n  app.post(\"/api/moderation/posts\", async (req, res) => {\n    try {\n      const validatedData = insertPostSchema.parse(req.body);\n      const post = await storage.createPost(validatedData);\n      res.json(post);\n    } catch (error) {\n      console.error(\"Error creating post:\", error);\n      res.status(400).json({ error: \"Invalid post data\" });\n    }\n  });\n\n  // Enhanced brand search with ability to add new brands\n  app.get(\"/api/brands/search\", async (req, res) => {\n    try {\n      const { query } = req.query;\n      if (!query || typeof query !== \"string\") {\n        return res.json([]);\n      }\n      const brands = await storage.searchBrands(query);\n      res.json(brands);\n    } catch (error) {\n      console.error(\"Error searching brands:\", error);\n      res.status(500).json({ error: \"Failed to search brands\" });\n    }\n  });\n\n  // Messages system\n  app.post(\"/api/messages\", async (req, res) => {\n    try {\n      const message = await storage.sendMessage(req.body);\n      res.json(message);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      res.status(500).json({ error: \"Failed to send message\" });\n    }\n  });\n\n  app.get(\"/api/messages/:userId\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const messages = await storage.getMessagesForUser(userId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching messages:\", error);\n      res.status(500).json({ error: \"Failed to fetch messages\" });\n    }\n  });\n\n  app.get(\"/api/messages/:userId/unread\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const messages = await storage.getUnreadMessages(userId);\n      res.json(messages);\n    } catch (error) {\n      console.error(\"Error fetching unread messages:\", error);\n      res.status(500).json({ error: \"Failed to fetch unread messages\" });\n    }\n  });\n\n  app.put(\"/api/messages/:messageId/read\", async (req, res) => {\n    try {\n      const { messageId } = req.params;\n      await storage.markMessageAsRead(messageId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error marking message as read:\", error);\n      res.status(500).json({ error: \"Failed to mark message as read\" });\n    }\n  });\n\n  // Moderator posts\n  app.post(\"/api/moderator-posts\", async (req, res) => {\n    try {\n      const post = await storage.createModeratorPost(req.body);\n      res.json(post);\n    } catch (error) {\n      console.error(\"Error creating moderator post:\", error);\n      res.status(500).json({ error: \"Failed to create post\" });\n    }\n  });\n\n  app.get(\"/api/moderator-posts\", async (req, res) => {\n    try {\n      const posts = await storage.getModeratorPosts();\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching moderator posts:\", error);\n      res.status(500).json({ error: \"Failed to fetch posts\" });\n    }\n  });\n\n  // Categories API\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getAllCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/categories\", async (req, res) => {\n    try {\n      const category = await storage.createCategory(req.body);\n      res.json(category);\n    } catch (error) {\n      console.error(\"Error creating category:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Tags API\n  app.get(\"/api/tags\", async (req, res) => {\n    try {\n      const tags = await storage.getAllTags();\n      res.json(tags);\n    } catch (error) {\n      console.error(\"Error fetching tags:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/tags/popular\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 20;\n      const tags = await storage.getPopularTags(limit);\n      res.json(tags);\n    } catch (error) {\n      console.error(\"Error fetching popular tags:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/tags\", async (req, res) => {\n    try {\n      const tag = await storage.createTag(req.body);\n      res.json(tag);\n    } catch (error) {\n      console.error(\"Error creating tag:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Communities API\n  app.get(\"/api/communities\", async (req, res) => {\n    try {\n      const communities = await storage.getAllCommunities();\n      res.json(communities);\n    } catch (error) {\n      console.error(\"Error fetching communities:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // News API\n  app.get(\"/api/news\", async (req, res) => {\n    try {\n      const articles = await storage.getAllNewsArticles();\n      res.json(articles);\n    } catch (error) {\n      console.error(\"Error fetching news articles:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // All Missions API\n  app.get(\"/api/missions\", async (req, res) => {\n    try {\n      const missions = await storage.getAllMissions();\n      res.json(missions);\n    } catch (error) {\n      console.error(\"Error fetching missions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Ongoing Missions API (for News page sidebar)\n  app.get(\"/api/missions/ongoing\", async (req, res) => {\n    try {\n      const missions = await storage.getOngoingMissions();\n      res.json(missions);\n    } catch (error) {\n      console.error(\"Error fetching ongoing missions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // User Missions API\n  app.get(\"/api/user-missions\", async (req, res) => {\n    try {\n      // Get user ID from session/auth - simplified for demo\n      const userId = req.headers['x-user-id'] as string || \"feed33d3-d444-454d-a413-aefb61d4848b\";\n      console.log('Getting user missions for userId:', userId);\n\n      const userMissions = await storage.getUserMissions(userId);\n      console.log('Found user missions:', userMissions.length);\n      res.json(userMissions);\n    } catch (error) {\n      console.error(\"Error fetching user missions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Join Mission API\n  app.post(\"/api/missions/:missionId/join\", async (req, res) => {\n    try {\n      // Get user ID from session/auth - simplified for demo\n      const userId = req.headers['x-user-id'] as string || \"feed33d3-d444-454d-a413-aef25c16a5af\";\n      const { missionId } = req.params;\n\n      const userMission = await storage.joinMission(userId, missionId);\n      res.json(userMission);\n    } catch (error: any) {\n      console.error(\"Error joining mission:\", error);\n      res\n        .status(400)\n        .json({ error: error.message || \"Failed to join mission\" });\n    }\n  });\n\n  // Submit Mission Switch Log API\n  app.post(\"/api/missions/:missionId/submit\", async (req, res) => {\n    try {\n      // Get user ID from session/auth - simplified for demo\n      const userId = req.headers['x-user-id'] as string || \"feed33d3-d444-454d-a413-aef25c16a5af\";\n      const { missionId } = req.params;\n\n      const switchLog = await storage.submitMissionSwitchLog(\n        userId,\n        missionId,\n        req.body,\n      );\n      res.json(switchLog);\n    } catch (error: any) {\n      console.error(\"Error submitting mission switch log:\", error);\n      res\n        .status(400)\n        .json({ error: error.message || \"Failed to submit switch log\" });\n    }\n  });\n\n  // Verify Mission Switch Log API (Moderators only)\n  app.post(\"/api/switch-logs/:switchLogId/verify\", async (req, res) => {\n    try {\n      // Get moderator ID from headers (use actual logged in user)\n      const moderatorId = req.headers['x-user-id'] as string || \"feed33d3-d444-454d-a413-aefb61d4848b\";\n      const { switchLogId } = req.params;\n      const { approved, feedback } = req.body;\n\n      const result = await storage.verifyMissionSwitchLog(\n        switchLogId,\n        moderatorId,\n        approved,\n        feedback,\n      );\n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Error verifying mission switch log:\", error);\n      res\n        .status(400)\n        .json({ error: error.message || \"Failed to verify switch log\" });\n    }\n  });\n\n  app.post(\"/api/communities\", async (req, res) => {\n    try {\n      const community = await storage.createCommunity(req.body);\n      res.json(community);\n    } catch (error) {\n      console.error(\"Error creating community:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Feedback submissions API\n  app.get(\"/api/feedback-submissions\", async (req, res) => {\n    try {\n      const submissions = await storage.getAllFeedbackSubmissions();\n      res.json(submissions);\n    } catch (error) {\n      console.error(\"Error fetching feedback submissions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/feedback-submissions\", async (req, res) => {\n    try {\n      const submission = await storage.createFeedbackSubmission(req.body);\n      res.json(submission);\n    } catch (error) {\n      console.error(\"Error creating feedback submission:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Enhanced moderation routes for switch log approvals\n  app.put(\"/api/moderation/switch-logs/:id/approve\", async (req, res) => {\n    try {\n      const { moderatorId, moderatorNotes } = req.body;\n      const switchLog = await storage.approveSwitchLog(\n        req.params.id,\n        moderatorId,\n        moderatorNotes,\n      );\n      res.json(switchLog);\n    } catch (error) {\n      console.error(\"Error approving switch log:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/moderation/switch-logs/:id/reject\", async (req, res) => {\n    try {\n      const { moderatorId, moderatorNotes } = req.body;\n      const switchLog = await storage.rejectSwitchLog(\n        req.params.id,\n        moderatorId,\n        moderatorNotes,\n      );\n      res.json(switchLog);\n    } catch (error) {\n      console.error(\"Error rejecting switch log:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  // Enhanced feedback submission routes for moderation\n  app.get(\"/api/moderation/feedback-submissions\", async (req, res) => {\n    try {\n      const submissions = await storage.getPendingFeedbackSubmissions();\n      res.json(submissions);\n    } catch (error) {\n      console.error(\"Error fetching feedback submissions:\", error);\n      res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  app.put(\n    \"/api/moderation/feedback-submissions/:id/approve\",\n    async (req, res) => {\n      try {\n        const { moderatorId, moderatorNotes } = req.body;\n        const submission = await storage.approveFeedbackSubmission(\n          req.params.id,\n          moderatorId,\n          moderatorNotes,\n        );\n        res.json(submission);\n      } catch (error) {\n        console.error(\"Error approving feedback submission:\", error);\n        res.status(500).json({ error: \"Internal server error\" });\n      }\n    },\n  );\n\n  app.put(\n    \"/api/moderation/feedback-submissions/:id/reject\",\n    async (req, res) => {\n      try {\n        const { moderatorId, moderatorNotes } = req.body;\n        const submission = await storage.rejectFeedbackSubmission(\n          req.params.id,\n          moderatorId,\n          moderatorNotes,\n        );\n        res.json(submission);\n      } catch (error) {\n        console.error(\"Error rejecting feedback submission:\", error);\n        res.status(500).json({ error: \"Internal server error\" });\n      }\n    },\n  );\n\n  const httpServer = createServer(app);\n\n  // Add WebSocket server for real-time updates\n  const wss = new WebSocketServer({ server: httpServer, path: \"/ws\" });\n\n  wss.on(\"connection\", (ws) => {\n    console.log(\"WebSocket client connected\");\n\n    ws.on(\"message\", (message) => {\n      try {\n        const data = JSON.parse(message.toString());\n        console.log(\"Received WebSocket message:\", data);\n\n        // Echo message back to all clients for real-time updates\n        wss.clients.forEach((client) => {\n          if (client.readyState === WebSocket.OPEN) {\n            client.send(\n              JSON.stringify({\n                type: \"update\",\n                data: data,\n                timestamp: new Date().toISOString(),\n              }),\n            );\n          }\n        });\n      } catch (error) {\n        console.error(\"WebSocket message parsing error:\", error);\n      }\n    });\n\n    ws.on(\"close\", () => {\n      console.log(\"WebSocket client disconnected\");\n    });\n\n    // Send initial connection confirmation\n    ws.send(\n      JSON.stringify({\n        type: \"connected\",\n        message: \"Real-time updates enabled\",\n        timestamp: new Date().toISOString(),\n      }),\n    );\n  });\n\n  return httpServer;\n}\n","size_bytes":33615},"server/storage.ts":{"content":"import { \n  users, \n  switchLogs, \n  posts, \n  brands, \n  likes, \n  comments,\n  reactions,\n  targetSuggestions,\n  newsItems,\n  newsArticles,\n  leaderboardSnapshots,\n  moderationReports,\n  feedbackQuestions,\n  feedbackResponses,\n  missions,\n  userMissions,\n  messages,\n  moderatorPosts,\n  // New enhanced tables\n  categories,\n  tags,\n  communities,\n  communityMembers,\n  contentTags,\n  feedbackSubmissions,\n  type User, \n  type InsertUser,\n  type SwitchLog,\n  type InsertSwitchLog,\n  type Post,\n  type InsertPost,\n  type Brand,\n  type InsertBrand,\n  type Comment,\n  type InsertComment,\n  type TargetSuggestion,\n  type InsertTargetSuggestion,\n  type Reaction,\n  type InsertReaction,\n  type LeaderboardSnapshot,\n  type ModerationReport,\n  type InsertModerationReport,\n  type FeedbackQuestion,\n  type InsertFeedbackQuestion,\n  type FeedbackResponse,\n  type InsertFeedbackResponse,\n  type Mission,\n  type InsertMission,\n  type UserMission,\n  type InsertUserMission,\n  type NewsArticle,\n  type InsertNewsArticle,\n  type Message,\n  type InsertMessage,\n  type ModeratorPost,\n  type InsertModeratorPost,\n  // New enhanced types\n  type Category,\n  type InsertCategory,\n  type Tag,\n  type InsertTag,\n  type Community,\n  type InsertCommunity,\n  type CommunityMember,\n  type InsertCommunityMember,\n  type ContentTag,\n  type InsertContentTag,\n  type FeedbackSubmission,\n  type InsertFeedbackSubmission\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, sql, and, count } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByFirebaseUid(firebaseUid: string): Promise<User | undefined>;\n  getUserByHandle(handle: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, updates: Partial<User>): Promise<User>;\n\n  // Switch log methods\n  createSwitchLog(switchLog: InsertSwitchLog): Promise<SwitchLog>;\n  getUserSwitchLogs(userId: string): Promise<SwitchLog[]>;\n  getPublicSwitchLogs(limit?: number): Promise<SwitchLog[]>;\n\n  // Post methods\n  createPost(post: InsertPost): Promise<Post>;\n  getFeedPosts(limit?: number): Promise<any[]>;\n  getPostById(id: string): Promise<Post | undefined>;\n  updatePost(id: string, updates: Partial<Post>): Promise<Post>;\n\n  // Brand methods\n  getBrand(id: string): Promise<Brand | undefined>;\n  getBrandByName(name: string): Promise<Brand | undefined>;\n  createBrand(brand: InsertBrand): Promise<Brand>;\n  searchBrands(query: string): Promise<Brand[]>;\n\n  // Social interaction methods\n  toggleLike(userId: string, postId: string): Promise<boolean>;\n  addComment(comment: InsertComment): Promise<Comment>;\n  getPostComments(postId: string): Promise<any[]>;\n  addReaction(reaction: InsertReaction): Promise<Reaction>;\n  getPostReactions(postId: string): Promise<any[]>;\n  getUserReaction(userId: string, postId: string, type: string): Promise<boolean>;\n\n  // Leaderboard methods\n  getLeaderboard(limit?: number, period?: string): Promise<User[]>;\n  getWeeklyLeaderboard(limit?: number): Promise<LeaderboardSnapshot[]>;\n  getMonthlyLeaderboard(limit?: number): Promise<LeaderboardSnapshot[]>;\n  getTrendingBrands(): Promise<any[]>;\n  getTrendingCategories(): Promise<any[]>;\n\n  // Admin methods\n  getTargetSuggestions(status?: string): Promise<TargetSuggestion[]>;\n  updateTargetSuggestion(id: string, updates: Partial<TargetSuggestion>): Promise<TargetSuggestion>;\n  createTargetSuggestion(suggestion: InsertTargetSuggestion): Promise<TargetSuggestion>;\n  \n  // Moderation methods\n  getModerationReports(status?: string): Promise<any[]>;\n  createModerationReport(report: InsertModerationReport): Promise<ModerationReport>;\n  updateModerationReport(id: string, updates: Partial<ModerationReport>): Promise<ModerationReport>;\n  \n  // Switch log approval methods\n  getPendingSwitchLogs(): Promise<any[]>;\n  approveSwitchLog(id: string, moderatorId: string, notes?: string): Promise<SwitchLog>;\n  rejectSwitchLog(id: string, moderatorId: string, notes: string): Promise<SwitchLog>;\n  \n  // Feedback question methods\n  createFeedbackQuestion(question: InsertFeedbackQuestion): Promise<FeedbackQuestion>;\n  getFeedbackQuestions(activeOnly?: boolean): Promise<FeedbackQuestion[]>;\n  updateFeedbackQuestion(id: string, updates: Partial<FeedbackQuestion>): Promise<FeedbackQuestion>;\n  deleteFeedbackQuestion(id: string): Promise<void>;\n  getFeedbackResponses(questionId: string): Promise<any[]>;\n  \n  // Mission methods\n  createMission(mission: InsertMission): Promise<Mission>;\n  getMissions(activeOnly?: boolean): Promise<Mission[]>;\n  updateMission(id: string, updates: Partial<Mission>): Promise<Mission>;\n  deleteMission(id: string): Promise<void>;\n  getUserMissions(userId: string): Promise<any[]>;\n  getMissionSubmissions(): Promise<any[]>;\n  \n  // Member management methods\n  getAllUsers(filters?: { role?: string; active?: boolean }): Promise<any[]>;\n  getUserDetails(id: string): Promise<any>;\n  updateUserRole(id: string, role: string): Promise<User>;\n  \n  // News article methods\n  createNewsArticle(newsArticle: InsertNewsArticle): Promise<NewsArticle>;\n  getNewsArticles(): Promise<NewsArticle[]>;\n  updateNewsArticle(id: string, updates: Partial<NewsArticle>): Promise<NewsArticle>;\n  deleteNewsArticle(id: string): Promise<void>;\n  \n  // Messages\n  sendMessage(message: InsertMessage): Promise<Message>;\n  getMessagesForUser(userId: string): Promise<Message[]>;\n  getUnreadMessages(userId: string): Promise<Message[]>;\n  markMessageAsRead(messageId: string): Promise<void>;\n  \n  // Moderator posts\n  createModeratorPost(post: InsertModeratorPost): Promise<ModeratorPost>;\n  getAllModeratorPosts(): Promise<ModeratorPost[]>;\n\n  // Categories\n  createCategory(category: InsertCategory): Promise<Category>;\n  getAllCategories(): Promise<Category[]>;\n  getCategoryById(id: string): Promise<Category | undefined>;\n  updateCategory(id: string, updates: Partial<Category>): Promise<Category>;\n\n  // Tags\n  createTag(tag: InsertTag): Promise<Tag>;\n  getAllTags(): Promise<Tag[]>;\n  getTagById(id: string): Promise<Tag | undefined>;\n  updateTag(id: string, updates: Partial<Tag>): Promise<Tag>;\n  incrementTagUsage(tagId: string): Promise<void>;\n  getPopularTags(limit?: number): Promise<Tag[]>;\n\n  // Communities\n  createCommunity(community: InsertCommunity): Promise<Community>;\n  getAllCommunities(): Promise<Community[]>;\n  getCommunityById(id: string): Promise<Community | undefined>;\n  updateCommunity(id: string, updates: Partial<Community>): Promise<Community>;\n  addCommunityMember(member: InsertCommunityMember): Promise<CommunityMember>;\n  removeCommunityMember(communityId: string, userId: string): Promise<void>;\n  getCommunityMembers(communityId: string): Promise<CommunityMember[]>;\n  getUserCommunities(userId: string): Promise<Community[]>;\n\n  // Feedback submissions\n  createFeedbackSubmission(submission: InsertFeedbackSubmission): Promise<FeedbackSubmission>;\n  getAllFeedbackSubmissions(): Promise<FeedbackSubmission[]>;\n  getPendingFeedbackSubmissions(): Promise<FeedbackSubmission[]>;\n  approveFeedbackSubmission(id: string, moderatorId: string, moderatorNotes?: string): Promise<FeedbackSubmission>;\n  rejectFeedbackSubmission(id: string, moderatorId: string, moderatorNotes?: string): Promise<FeedbackSubmission>;\n\n  // Enhanced mission methods\n  getMissionsByCategory(categoryId: string): Promise<Mission[]>;\n  getMissionsByCommunity(communityId: string): Promise<Mission[]>;\n  updateMissionStatus(id: string, status: string): Promise<Mission>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByFirebaseUid(firebaseUid: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.firebaseUid, firebaseUid));\n    return user || undefined;\n  }\n\n  async getUserByHandle(handle: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.handle, handle));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async updateUser(id: string, updates: Partial<User>): Promise<User> {\n    const [user] = await db.update(users).set(updates).where(eq(users.id, id)).returning();\n    return user;\n  }\n\n  async createSwitchLog(insertSwitchLog: InsertSwitchLog): Promise<SwitchLog> {\n    const [switchLog] = await db.insert(switchLogs).values(insertSwitchLog).returning();\n    \n    // Update user stats\n    if (switchLog.userId) {\n      await db.update(users)\n        .set({\n          switchCount: sql`${users.switchCount} + 1`,\n          points: sql`${users.points} + ${switchLog.points || 25}`\n        })\n        .where(eq(users.id, switchLog.userId));\n    }\n    \n    return switchLog;\n  }\n\n  async getUserSwitchLogs(userId: string): Promise<SwitchLog[]> {\n    return db.select()\n      .from(switchLogs)\n      .where(eq(switchLogs.userId, userId))\n      .orderBy(desc(switchLogs.createdAt));\n  }\n\n  async getPublicSwitchLogs(limit: number = 10): Promise<SwitchLog[]> {\n    return db.select()\n      .from(switchLogs)\n      .where(eq(switchLogs.isPublic, true))\n      .orderBy(desc(switchLogs.createdAt))\n      .limit(limit);\n  }\n\n  async createPost(insertPost: InsertPost): Promise<Post> {\n    const [post] = await db.insert(posts).values(insertPost).returning();\n    return post;\n  }\n\n  async getFeedPosts(limit: number = 20): Promise<any[]> {\n    const feedPosts = await db\n      .select({\n        post: posts,\n        user: {\n          id: users.id,\n          handle: users.handle,\n          level: users.level,\n          points: users.points\n        },\n        switchLog: switchLogs\n      })\n      .from(posts)\n      .leftJoin(users, eq(posts.userId, users.id))\n      .leftJoin(switchLogs, eq(posts.switchLogId, switchLogs.id))\n      .orderBy(desc(posts.createdAt))\n      .limit(limit);\n\n    return feedPosts;\n  }\n\n  async getPostById(id: string): Promise<Post | undefined> {\n    const [post] = await db.select().from(posts).where(eq(posts.id, id));\n    return post || undefined;\n  }\n\n  async updatePost(id: string, updates: Partial<Post>): Promise<Post> {\n    const [post] = await db.update(posts).set(updates).where(eq(posts.id, id)).returning();\n    return post;\n  }\n\n  async getBrand(id: string): Promise<Brand | undefined> {\n    const [brand] = await db.select().from(brands).where(eq(brands.id, id));\n    return brand || undefined;\n  }\n\n  async getBrandByName(name: string): Promise<Brand | undefined> {\n    const [brand] = await db.select().from(brands).where(eq(brands.name, name));\n    return brand || undefined;\n  }\n\n  async createBrand(insertBrand: InsertBrand): Promise<Brand> {\n    const [brand] = await db.insert(brands).values(insertBrand).returning();\n    return brand;\n  }\n\n  async searchBrands(query: string): Promise<Brand[]> {\n    return db.select()\n      .from(brands)\n      .where(sql`${brands.name} ILIKE ${'%' + query + '%'}`)\n      .limit(10);\n  }\n\n  async toggleLike(userId: string, postId: string): Promise<boolean> {\n    const existingLike = await db.select()\n      .from(likes)\n      .where(and(eq(likes.userId, userId), eq(likes.postId, postId)))\n      .limit(1);\n\n    if (existingLike.length > 0) {\n      // Remove like\n      await db.delete(likes)\n        .where(and(eq(likes.userId, userId), eq(likes.postId, postId)));\n      \n      await db.update(posts)\n        .set({ likesCount: sql`${posts.likesCount} - 1` })\n        .where(eq(posts.id, postId));\n      \n      return false;\n    } else {\n      // Add like\n      await db.insert(likes).values({ userId, postId });\n      \n      await db.update(posts)\n        .set({ likesCount: sql`${posts.likesCount} + 1` })\n        .where(eq(posts.id, postId));\n      \n      return true;\n    }\n  }\n\n  async addComment(insertComment: InsertComment): Promise<Comment> {\n    const [comment] = await db.insert(comments).values(insertComment).returning();\n    \n    // Update comment count on post\n    await db.update(posts)\n      .set({ commentsCount: sql`${posts.commentsCount} + 1` })\n      .where(eq(posts.id, insertComment.postId!));\n    \n    return comment;\n  }\n\n  async getPostComments(postId: string): Promise<any[]> {\n    const results = await db\n      .select({\n        comment: comments,\n        user: {\n          id: users.id,\n          handle: users.handle\n        }\n      })\n      .from(comments)\n      .leftJoin(users, eq(comments.userId, users.id))\n      .where(eq(comments.postId, postId))\n      .orderBy(desc(comments.createdAt));\n    \n    return results;\n  }\n\n  async getLeaderboard(limit: number = 10): Promise<User[]> {\n    return db.select()\n      .from(users)\n      .orderBy(desc(users.points))\n      .limit(limit);\n  }\n\n  async getTrendingBrands(): Promise<any[]> {\n    return db.select({\n      brand: brands,\n      switchCount: count(switchLogs.id)\n    })\n      .from(brands)\n      .leftJoin(switchLogs, eq(brands.id, switchLogs.toBrandId))\n      .where(sql`${switchLogs.createdAt} > NOW() - INTERVAL '7 days'`)\n      .groupBy(brands.id)\n      .orderBy(desc(count(switchLogs.id)))\n      .limit(5);\n  }\n\n  async getTargetSuggestions(status?: string): Promise<TargetSuggestion[]> {\n    const query = db.select().from(targetSuggestions);\n    \n    if (status) {\n      return query.where(eq(targetSuggestions.status, status));\n    }\n    \n    return query.orderBy(desc(targetSuggestions.createdAt));\n  }\n\n  async updateTargetSuggestion(id: string, updates: Partial<TargetSuggestion>): Promise<TargetSuggestion> {\n    const [suggestion] = await db.update(targetSuggestions)\n      .set(updates)\n      .where(eq(targetSuggestions.id, id))\n      .returning();\n    return suggestion;\n  }\n\n  async createTargetSuggestion(insertSuggestion: InsertTargetSuggestion): Promise<TargetSuggestion> {\n    const [suggestion] = await db.insert(targetSuggestions).values(insertSuggestion).returning();\n    return suggestion;\n  }\n\n  // Enhanced social interactions\n  async addReaction(insertReaction: InsertReaction): Promise<Reaction> {\n    // Remove existing reaction of this type by this user for this post\n    await db.delete(reactions)\n      .where(and(\n        eq(reactions.userId, insertReaction.userId!),\n        eq(reactions.postId, insertReaction.postId!),\n        eq(reactions.type, insertReaction.type)\n      ));\n\n    const [reaction] = await db.insert(reactions).values(insertReaction).returning();\n    return reaction;\n  }\n\n  async getPostReactions(postId: string): Promise<any[]> {\n    const reactionCounts = await db\n      .select({\n        type: reactions.type,\n        count: sql`count(*)::int`.as('count')\n      })\n      .from(reactions)\n      .where(eq(reactions.postId, postId))\n      .groupBy(reactions.type);\n    \n    return reactionCounts;\n  }\n\n  async getUserReaction(userId: string, postId: string, type: string): Promise<boolean> {\n    const [reaction] = await db.select()\n      .from(reactions)\n      .where(and(\n        eq(reactions.userId, userId),\n        eq(reactions.postId, postId),\n        eq(reactions.type, type)\n      ))\n      .limit(1);\n    \n    return !!reaction;\n  }\n\n  // Enhanced leaderboards\n  async getWeeklyLeaderboard(limit: number = 10): Promise<LeaderboardSnapshot[]> {\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentWeek = Math.ceil((currentDate.getTime() - new Date(currentYear, 0, 1).getTime()) / (7 * 24 * 60 * 60 * 1000));\n\n    return db.select()\n      .from(leaderboardSnapshots)\n      .where(and(\n        eq(leaderboardSnapshots.period, 'weekly'),\n        eq(leaderboardSnapshots.year, currentYear),\n        eq(leaderboardSnapshots.week, currentWeek)\n      ))\n      .orderBy(leaderboardSnapshots.rank)\n      .limit(limit);\n  }\n\n  async getMonthlyLeaderboard(limit: number = 10): Promise<LeaderboardSnapshot[]> {\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n\n    return db.select()\n      .from(leaderboardSnapshots)\n      .where(and(\n        eq(leaderboardSnapshots.period, 'monthly'),\n        eq(leaderboardSnapshots.year, currentYear),\n        eq(leaderboardSnapshots.month, currentMonth)\n      ))\n      .orderBy(leaderboardSnapshots.rank)\n      .limit(limit);\n  }\n\n  async getTrendingCategories(): Promise<any[]> {\n    return db.select({\n      category: switchLogs.category,\n      switchCount: sql`count(*)::int`.as('switchCount'),\n      recentSwitches: sql`count(case when ${switchLogs.createdAt} > NOW() - interval '24 hours' then 1 end)::int`.as('recentSwitches')\n    })\n      .from(switchLogs)\n      .where(sql`${switchLogs.createdAt} > NOW() - INTERVAL '7 days'`)\n      .groupBy(switchLogs.category)\n      .orderBy(sql`count(*) DESC`)\n      .limit(8);\n  }\n\n  // Moderation methods\n  async getModerationReports(status?: string): Promise<any[]> {\n    const query = db.select({\n      report: moderationReports,\n      reporter: {\n        id: users.id,\n        handle: users.handle\n      },\n      moderator: {\n        id: users.id,\n        handle: users.handle\n      }\n    })\n      .from(moderationReports)\n      .leftJoin(users, eq(moderationReports.reporterId, users.id));\n\n    if (status) {\n      return query.where(eq(moderationReports.status, status))\n        .orderBy(desc(moderationReports.createdAt));\n    }\n    \n    return query.orderBy(desc(moderationReports.createdAt));\n  }\n\n  async createModerationReport(insertReport: InsertModerationReport): Promise<ModerationReport> {\n    const [report] = await db.insert(moderationReports).values(insertReport).returning();\n    return report;\n  }\n\n  async updateModerationReport(id: string, updates: Partial<ModerationReport>): Promise<ModerationReport> {\n    const [report] = await db.update(moderationReports)\n      .set(updates)\n      .where(eq(moderationReports.id, id))\n      .returning();\n    return report;\n  }\n\n  // Switch log approval methods\n  async getPendingSwitchLogs(): Promise<any[]> {\n    return db.select({\n      switchLog: switchLogs,\n      user: {\n        id: users.id,\n        handle: users.handle,\n        points: users.points,\n        level: users.level\n      },\n      fromBrand: {\n        id: brands.id,\n        name: brands.name,\n        country: brands.country,\n        isIndian: brands.isIndian\n      },\n      toBrand: {\n        id: brands.id,\n        name: brands.name,\n        country: brands.country,\n        isIndian: brands.isIndian\n      }\n    })\n      .from(switchLogs)\n      .leftJoin(users, eq(switchLogs.userId, users.id))\n      .leftJoin(brands, eq(switchLogs.fromBrandId, brands.id))\n      .leftJoin(brands as any, eq(switchLogs.toBrandId, brands.id))\n      .where(eq(switchLogs.status, 'PENDING'))\n      .orderBy(desc(switchLogs.createdAt));\n  }\n\n  async approveSwitchLog(id: string, moderatorId: string, notes?: string): Promise<SwitchLog> {\n    const [switchLog] = await db.update(switchLogs)\n      .set({\n        status: 'APPROVED',\n        moderatorId,\n        moderatorNotes: notes,\n        approvedAt: new Date()\n      })\n      .where(eq(switchLogs.id, id))\n      .returning();\n    return switchLog;\n  }\n\n  async rejectSwitchLog(id: string, moderatorId: string, notes: string): Promise<SwitchLog> {\n    const [switchLog] = await db.update(switchLogs)\n      .set({\n        status: 'REJECTED',\n        moderatorId,\n        moderatorNotes: notes\n      })\n      .where(eq(switchLogs.id, id))\n      .returning();\n    return switchLog;\n  }\n\n  // Feedback question methods\n  async createFeedbackQuestion(insertQuestion: InsertFeedbackQuestion): Promise<FeedbackQuestion> {\n    const [question] = await db.insert(feedbackQuestions).values(insertQuestion).returning();\n    return question;\n  }\n\n  async getFeedbackQuestions(activeOnly: boolean = false): Promise<FeedbackQuestion[]> {\n    const query = db.select().from(feedbackQuestions);\n    \n    if (activeOnly) {\n      return query.where(eq(feedbackQuestions.isActive, true))\n        .orderBy(desc(feedbackQuestions.createdAt));\n    }\n    \n    return query.orderBy(desc(feedbackQuestions.createdAt));\n  }\n\n  async updateFeedbackQuestion(id: string, updates: Partial<FeedbackQuestion>): Promise<FeedbackQuestion> {\n    const [question] = await db.update(feedbackQuestions)\n      .set(updates)\n      .where(eq(feedbackQuestions.id, id))\n      .returning();\n    return question;\n  }\n\n  async deleteFeedbackQuestion(id: string): Promise<void> {\n    await db.delete(feedbackQuestions).where(eq(feedbackQuestions.id, id));\n  }\n\n  async getFeedbackResponses(questionId: string): Promise<any[]> {\n    return db.select({\n      response: feedbackResponses,\n      user: {\n        id: users.id,\n        handle: users.handle\n      }\n    })\n      .from(feedbackResponses)\n      .leftJoin(users, eq(feedbackResponses.userId, users.id))\n      .where(eq(feedbackResponses.questionId, questionId))\n      .orderBy(desc(feedbackResponses.createdAt));\n  }\n\n  // Mission methods\n  async createMission(insertMission: InsertMission): Promise<Mission> {\n    const [mission] = await db.insert(missions).values(insertMission).returning();\n    return mission;\n  }\n\n  async getMissions(activeOnly: boolean = false): Promise<Mission[]> {\n    const query = db.select().from(missions);\n    \n    if (activeOnly) {\n      return query.where(eq(missions.isActive, true))\n        .orderBy(desc(missions.createdAt));\n    }\n    \n    return query.orderBy(desc(missions.createdAt));\n  }\n\n  async updateMission(id: string, updates: Partial<Mission>): Promise<Mission> {\n    const [mission] = await db.update(missions)\n      .set(updates)\n      .where(eq(missions.id, id))\n      .returning();\n    return mission;\n  }\n\n  async deleteMission(id: string): Promise<void> {\n    await db.delete(missions).where(eq(missions.id, id));\n  }\n\n  async getUserMissions(userId: string): Promise<any[]> {\n    return db.select({\n      userMission: userMissions,\n      mission: missions\n    })\n      .from(userMissions)\n      .leftJoin(missions, eq(userMissions.missionId, missions.id))\n      .where(eq(userMissions.userId, userId))\n      .orderBy(desc(userMissions.createdAt));\n  }\n\n  // Member management methods\n  async getAllUsers(filters?: { role?: string; active?: boolean }): Promise<any[]> {\n    const baseQuery = db.select({\n      user: users,\n      switchCount: sql`count(${switchLogs.id})::int`.as('totalSwitches'),\n      recentActivity: sql`count(case when ${switchLogs.createdAt} > NOW() - interval '30 days' then 1 end)::int`.as('recentSwitches')\n    })\n      .from(users)\n      .leftJoin(switchLogs, eq(users.id, switchLogs.userId))\n      .groupBy(users.id);\n\n    if (filters?.role) {\n      return baseQuery.where(eq(users.role, filters.role as any))\n        .orderBy(desc(users.createdAt));\n    }\n\n    return baseQuery.orderBy(desc(users.createdAt));\n  }\n\n  async getUserDetails(id: string): Promise<any> {\n    const [userDetails] = await db.select({\n      user: users,\n      totalSwitches: sql`count(${switchLogs.id})::int`.as('totalSwitches'),\n      totalPosts: sql`count(${posts.id})::int`.as('totalPosts')\n    })\n      .from(users)\n      .leftJoin(switchLogs, eq(users.id, switchLogs.userId))\n      .leftJoin(posts, eq(users.id, posts.userId))\n      .where(eq(users.id, id))\n      .groupBy(users.id);\n\n    return userDetails;\n  }\n\n  async updateUserRole(id: string, role: string): Promise<User> {\n    const [user] = await db.update(users)\n      .set({ role: role as any })\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  // News article methods\n  async createNewsArticle(insertNewsArticle: InsertNewsArticle): Promise<NewsArticle> {\n    const [article] = await db.insert(newsArticles).values(insertNewsArticle).returning();\n    return article;\n  }\n\n  async getNewsArticles(): Promise<NewsArticle[]> {\n    return db.select().from(newsArticles).orderBy(desc(newsArticles.publishedAt));\n  }\n\n  async updateNewsArticle(id: string, updates: Partial<NewsArticle>): Promise<NewsArticle> {\n    const [article] = await db.update(newsArticles)\n      .set(updates)\n      .where(eq(newsArticles.id, id))\n      .returning();\n    return article;\n  }\n\n  async deleteNewsArticle(id: string): Promise<void> {\n    await db.delete(newsArticles).where(eq(newsArticles.id, id));\n  }\n\n  // Messages\n  async sendMessage(insertMessage: InsertMessage): Promise<Message> {\n    const [message] = await db.insert(messages).values(insertMessage).returning();\n    return message;\n  }\n\n  async getMessagesForUser(userId: string): Promise<Message[]> {\n    return db.select()\n      .from(messages)\n      .where(sql`${messages.fromUserId} = ${userId} OR ${messages.toUserId} = ${userId}`)\n      .orderBy(desc(messages.createdAt));\n  }\n\n  async getUnreadMessages(userId: string): Promise<Message[]> {\n    return db.select()\n      .from(messages)\n      .where(and(eq(messages.toUserId, userId), eq(messages.isRead, false)))\n      .orderBy(desc(messages.createdAt));\n  }\n\n  async markMessageAsRead(messageId: string): Promise<void> {\n    await db.update(messages)\n      .set({ isRead: true })\n      .where(eq(messages.id, messageId));\n  }\n\n  // Mission methods for interface compliance\n  async getMissionsByCategory(categoryId: string): Promise<Mission[]> {\n    return db.select().from(missions)\n      .where(and(eq(missions.categoryId, categoryId), eq(missions.isActive, true)))\n      .orderBy(desc(missions.createdAt));\n  }\n\n  async getMissionsByCommunity(communityId: string): Promise<Mission[]> {\n    return db.select().from(missions)\n      .where(and(eq(missions.communityId, communityId), eq(missions.isActive, true)))\n      .orderBy(desc(missions.createdAt));\n  }\n\n  async updateMissionStatus(id: string, status: string): Promise<Mission> {\n    const [mission] = await db.update(missions)\n      .set({ status: status as any })\n      .where(eq(missions.id, id))\n      .returning();\n    return mission;\n  }\n\n\n\n  // Categories\n  async createCategory(insertCategory: InsertCategory): Promise<Category> {\n    const [category] = await db.insert(categories).values(insertCategory).returning();\n    return category;\n  }\n\n  async getAllCategories(): Promise<Category[]> {\n    return db.select().from(categories).where(eq(categories.isActive, true)).orderBy(categories.name);\n  }\n\n  async getCategoryById(id: string): Promise<Category | undefined> {\n    const [category] = await db.select().from(categories).where(eq(categories.id, id));\n    return category;\n  }\n\n  async updateCategory(id: string, updates: Partial<Category>): Promise<Category> {\n    const [category] = await db.update(categories)\n      .set(updates)\n      .where(eq(categories.id, id))\n      .returning();\n    return category;\n  }\n\n  // Tags\n  async createTag(insertTag: InsertTag): Promise<Tag> {\n    const [tag] = await db.insert(tags).values(insertTag).returning();\n    return tag;\n  }\n\n  async getAllTags(): Promise<Tag[]> {\n    return db.select().from(tags).where(eq(tags.isActive, true)).orderBy(desc(tags.usageCount), tags.name);\n  }\n\n  async getTagById(id: string): Promise<Tag | undefined> {\n    const [tag] = await db.select().from(tags).where(eq(tags.id, id));\n    return tag;\n  }\n\n  async updateTag(id: string, updates: Partial<Tag>): Promise<Tag> {\n    const [tag] = await db.update(tags)\n      .set(updates)\n      .where(eq(tags.id, id))\n      .returning();\n    return tag;\n  }\n\n  async incrementTagUsage(tagId: string): Promise<void> {\n    await db.update(tags)\n      .set({ usageCount: sql`${tags.usageCount} + 1` })\n      .where(eq(tags.id, tagId));\n  }\n\n  async getPopularTags(limit: number = 20): Promise<Tag[]> {\n    return db.select().from(tags)\n      .where(eq(tags.isActive, true))\n      .orderBy(desc(tags.usageCount))\n      .limit(limit);\n  }\n\n  // Communities\n  async createCommunity(insertCommunity: InsertCommunity): Promise<Community> {\n    const [community] = await db.insert(communities).values(insertCommunity).returning();\n    return community;\n  }\n\n  async getAllCommunities(): Promise<Community[]> {\n    return db.select().from(communities)\n      .where(eq(communities.isActive, true))\n      .orderBy(desc(communities.memberCount), communities.name);\n  }\n\n  async getCommunityById(id: string): Promise<Community | undefined> {\n    const [community] = await db.select().from(communities).where(eq(communities.id, id));\n    return community;\n  }\n\n  async updateCommunity(id: string, updates: Partial<Community>): Promise<Community> {\n    const [community] = await db.update(communities)\n      .set({ ...updates, updatedAt: sql`NOW()` })\n      .where(eq(communities.id, id))\n      .returning();\n    return community;\n  }\n\n  // Community members\n  async addCommunityMember(insertMember: InsertCommunityMember): Promise<CommunityMember> {\n    const [member] = await db.insert(communityMembers).values(insertMember).returning();\n    \n    // Update community member count\n    await db.update(communities)\n      .set({ memberCount: sql`${communities.memberCount} + 1` })\n      .where(eq(communities.id, insertMember.communityId!));\n    \n    return member;\n  }\n\n  async removeCommunityMember(communityId: string, userId: string): Promise<void> {\n    await db.delete(communityMembers)\n      .where(and(eq(communityMembers.communityId, communityId), eq(communityMembers.userId, userId)));\n    \n    // Update community member count\n    await db.update(communities)\n      .set({ memberCount: sql`${communities.memberCount} - 1` })\n      .where(eq(communities.id, communityId));\n  }\n\n  async getCommunityMembers(communityId: string): Promise<CommunityMember[]> {\n    return db.select().from(communityMembers)\n      .where(eq(communityMembers.communityId, communityId))\n      .orderBy(communityMembers.joinedAt);\n  }\n\n  async getUserCommunities(userId: string): Promise<Community[]> {\n    return db.select({ \n      id: communities.id, \n      name: communities.name, \n      description: communities.description,\n      coverImageUrl: communities.coverImageUrl,\n      visibility: communities.visibility,\n      memberCount: communities.memberCount,\n      isActive: communities.isActive,\n      createdBy: communities.createdBy,\n      createdAt: communities.createdAt,\n      updatedAt: communities.updatedAt\n    })\n      .from(communities)\n      .innerJoin(communityMembers, eq(communities.id, communityMembers.communityId))\n      .where(eq(communityMembers.userId, userId));\n  }\n\n  // Feedback submissions (renamed from target suggestions)\n  async createFeedbackSubmission(insertSubmission: InsertFeedbackSubmission): Promise<FeedbackSubmission> {\n    const [submission] = await db.insert(feedbackSubmissions).values(insertSubmission).returning();\n    return submission;\n  }\n\n  async getAllFeedbackSubmissions(): Promise<FeedbackSubmission[]> {\n    return db.select().from(feedbackSubmissions)\n      .orderBy(desc(feedbackSubmissions.createdAt));\n  }\n\n  async getPendingFeedbackSubmissions(): Promise<FeedbackSubmission[]> {\n    return db.select().from(feedbackSubmissions)\n      .where(eq(feedbackSubmissions.status, 'PENDING'))\n      .orderBy(desc(feedbackSubmissions.createdAt));\n  }\n\n  async approveFeedbackSubmission(id: string, moderatorId: string, moderatorNotes?: string): Promise<FeedbackSubmission> {\n    const [submission] = await db.update(feedbackSubmissions)\n      .set({ \n        status: 'APPROVED', \n        moderatorId, \n        moderatorNotes,\n        reviewedAt: sql`NOW()` \n      })\n      .where(eq(feedbackSubmissions.id, id))\n      .returning();\n    return submission;\n  }\n\n  async rejectFeedbackSubmission(id: string, moderatorId: string, moderatorNotes?: string): Promise<FeedbackSubmission> {\n    const [submission] = await db.update(feedbackSubmissions)\n      .set({ \n        status: 'REJECTED', \n        moderatorId, \n        moderatorNotes,\n        reviewedAt: sql`NOW()` \n      })\n      .where(eq(feedbackSubmissions.id, id))\n      .returning();\n    return submission;\n  }\n\n\n\n\n\n  // Moderator post creation methods\n  async createModeratorPost(postData: {\n    userId: string;\n    postType: string;\n    title?: string;\n    content: string;\n    categoryId?: string;\n    communityId?: string;\n    missionId?: string;\n    targetBrandFrom?: string;\n    targetBrandTo?: string;\n    actionButtonText?: string;\n    actionButtonUrl?: string;\n    tags?: string[];\n    imageUrl?: string;\n    isPinned?: boolean;\n    expiresAt?: string;\n  }): Promise<any> {\n    const [post] = await db.insert(posts).values({\n      userId: postData.userId,\n      postType: postData.postType as any,\n      title: postData.title,\n      content: postData.content,\n      categoryId: postData.categoryId,\n      communityId: postData.communityId,\n      missionId: postData.missionId,\n      targetBrandFrom: postData.targetBrandFrom,\n      targetBrandTo: postData.targetBrandTo,\n      actionButtonText: postData.actionButtonText,\n      actionButtonUrl: postData.actionButtonUrl,\n      tags: postData.tags,\n      imageUrl: postData.imageUrl,\n      isPinned: postData.isPinned || false,\n      expiresAt: postData.expiresAt ? new Date(postData.expiresAt) : null,\n    }).returning();\n    return post;\n  }\n\n  async getAllPostsWithDetails(): Promise<any[]> {\n    const result = await db\n      .select({\n        post: posts,\n        user: {\n          id: users.id,\n          handle: users.handle,\n          role: users.role,\n        },\n        category: {\n          id: categories.id,\n          name: categories.name,\n          color: categories.color,\n        },\n        community: {\n          id: communities.id,\n          name: communities.name,\n        },\n        mission: {\n          id: missions.id,\n          title: missions.title,\n        },\n      })\n      .from(posts)\n      .leftJoin(users, eq(posts.userId, users.id))\n      .leftJoin(categories, eq(posts.categoryId, categories.id))\n      .leftJoin(communities, eq(posts.communityId, communities.id))\n      .leftJoin(missions, eq(posts.missionId, missions.id))\n      .orderBy(desc(posts.createdAt));\n    \n    return result;\n  }\n\n  async getPostsByType(postType: string): Promise<any[]> {\n    const result = await db\n      .select({\n        post: posts,\n        user: {\n          id: users.id,\n          handle: users.handle,\n          role: users.role,\n        },\n        category: {\n          id: categories.id,\n          name: categories.name,\n          color: categories.color,\n        },\n        community: {\n          id: communities.id,\n          name: communities.name,\n        },\n        mission: {\n          id: missions.id,\n          title: missions.title,\n        },\n      })\n      .from(posts)\n      .leftJoin(users, eq(posts.userId, users.id))\n      .leftJoin(categories, eq(posts.categoryId, categories.id))\n      .leftJoin(communities, eq(posts.communityId, communities.id))\n      .leftJoin(missions, eq(posts.missionId, missions.id))\n      .where(eq(posts.postType, postType as any))\n      .orderBy(desc(posts.createdAt));\n    \n    return result;\n  }\n\n  async incrementSwitchLogCount(postId: string): Promise<void> {\n    await db.update(posts)\n      .set({ switchLogsCount: sql`${posts.switchLogsCount} + 1` })\n      .where(eq(posts.id, postId));\n  }\n\n  async createSwitchLogFromPost(data: {\n    userId: string;\n    postId?: string;\n    fromBrandId?: string;\n    toBrandId?: string;\n    category: string;\n    reason: string;\n    categoryId?: string;\n    communityId?: string;\n    tags?: string[];\n  }): Promise<any> {\n    const [switchLog] = await db.insert(switchLogs).values({\n      userId: data.userId,\n      fromBrandId: data.fromBrandId,\n      toBrandId: data.toBrandId,\n      category: data.category as any,\n      reason: data.reason,\n      categoryId: data.categoryId,\n      communityId: data.communityId,\n      tags: data.tags,\n      status: 'PENDING',\n    }).returning();\n\n    // If this switch log was created from a post, increment the count\n    if (data.postId) {\n      await this.incrementSwitchLogCount(data.postId);\n    }\n\n    return switchLog;\n  }\n\n  async getAllNewsArticles(): Promise<any[]> {\n    try {\n      // First, get actual articles from database\n      const articles = await db.select().from(newsArticles).orderBy(desc(newsArticles.publishedAt));\n      \n      // Enhance articles with brand names\n      const enhancedArticles = await Promise.all(\n        articles.map(async (article) => {\n          let fromBrands: any[] = [];\n          let toBrands: any[] = [];\n          \n          // Handle from brands\n          if (article.suggestedFromBrandIds && Array.isArray(article.suggestedFromBrandIds) && article.suggestedFromBrandIds.length > 0) {\n            try {\n              fromBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(article.suggestedFromBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching from brands:', error);\n            }\n          }\n          \n          // Handle to brands\n          if (article.suggestedToBrandIds && Array.isArray(article.suggestedToBrandIds) && article.suggestedToBrandIds.length > 0) {\n            try {\n              toBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(article.suggestedToBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching to brands:', error);\n            }\n          }\n          \n          return {\n            ...article,\n            fromBrands,\n            toBrands\n          };\n        })\n      );\n      \n      // If no articles exist, return sample data for demonstration\n      if (enhancedArticles.length === 0) {\n      return [\n        {\n          id: \"sample-1\",\n          title: \"Top 10 Indian Smartphone Brands Gaining Market Share\",\n          description: \"Discover how Indian smartphone manufacturers like Lava, Micromax, and others are making significant strides in the domestic market, offering quality alternatives to foreign brands.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), // 2 hours ago\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          fromBrands: [{ id: \"1\", name: \"Samsung\", country: \"South Korea\", isIndian: false }],\n          toBrands: [{ id: \"2\", name: \"Lava\", country: \"India\", isIndian: true }, { id: \"3\", name: \"Micromax\", country: \"India\", isIndian: true }],\n        },\n        {\n          id: \"sample-2\",\n          title: \"Indian Fashion Industry: Local Brands vs Global Giants\",\n          description: \"An in-depth analysis of how Indian fashion brands are competing with international companies, focusing on traditional wear, sustainable fashion, and price competitiveness.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(), // 4 hours ago\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n          fromBrands: [{ id: \"4\", name: \"Zara\", country: \"Spain\", isIndian: false }, { id: \"5\", name: \"H&M\", country: \"Sweden\", isIndian: false }],\n          toBrands: [{ id: \"6\", name: \"Fabindia\", country: \"India\", isIndian: true }, { id: \"7\", name: \"Biba\", country: \"India\", isIndian: true }],\n        },\n        {\n          id: \"sample-3\",\n          title: \"Consumer Electronics: Make in India Success Stories\",\n          description: \"Highlighting successful Indian electronics manufacturers who are providing quality alternatives in categories like televisions, home appliances, and audio equipment.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(), // 6 hours ago\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n        },\n        {\n          id: \"sample-4\",\n          title: \"Food & Beverages: Supporting Local Brands for Healthier Choices\",\n          description: \"Explore how switching to local food and beverage brands not only supports the Indian economy but also often provides healthier, more authentic products.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: false,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(), // 8 hours ago\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\n        },\n        {\n          id: \"sample-5\",\n          title: \"Automotive Sector: Indian Car Manufacturers Rising\",\n          description: \"A comprehensive look at how Indian automotive companies are innovating and competing in both domestic and international markets with affordable, efficient vehicles.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(), // 12 hours ago\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),\n        }\n      ];\n    }\n    \n      return enhancedArticles;\n    } catch (error) {\n      console.error('Error in getAllNewsArticles:', error);\n      // Return sample data if database query fails\n      return [\n        {\n          id: \"sample-1\",\n          title: \"Top 10 Indian Smartphone Brands Gaining Market Share\",\n          description: \"Discover how Indian smartphone manufacturers like Lava, Micromax, and others are making significant strides in the domestic market, offering quality alternatives to foreign brands.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          fromBrands: [{ id: \"1\", name: \"Samsung\", country: \"South Korea\", isIndian: false }],\n          toBrands: [{ id: \"2\", name: \"Lava\", country: \"India\", isIndian: true }, { id: \"3\", name: \"Micromax\", country: \"India\", isIndian: true }],\n        },\n        {\n          id: \"sample-2\",\n          title: \"Indian Fashion Industry: Local Brands vs Global Giants\",\n          description: \"An in-depth analysis of how Indian fashion brands are competing with international companies, focusing on traditional wear, sustainable fashion, and price competitiveness.\",\n          imageUrls: null,\n          suggestedFromBrandIds: null,\n          suggestedToBrandIds: null,\n          commentsEnabled: true,\n          isPublished: true,\n          publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n          createdBy: \"admin\",\n          createdAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n          updatedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n          fromBrands: [{ id: \"4\", name: \"Zara\", country: \"Spain\", isIndian: false }],\n          toBrands: [{ id: \"6\", name: \"Fabindia\", country: \"India\", isIndian: true }],\n        }\n      ];\n    }\n  }\n\n  async getAllMissions(): Promise<any[]> {\n    try {\n      const allMissions = await db.select({\n        id: missions.id,\n        title: missions.title,\n        description: missions.description,\n        targetCategory: missions.targetCategory,\n        pointsReward: missions.pointsReward,\n        startDate: missions.startDate,\n        endDate: missions.endDate,\n        status: missions.status,\n        impact: missions.impact,\n        fromBrandIds: missions.fromBrandIds,\n        toBrandIds: missions.toBrandIds,\n      })\n      .from(missions)\n      .where(sql`${missions.isActive} = true`)\n      .orderBy(desc(missions.startDate));\n\n      // Enhance missions with brand names\n      const enhancedMissions = await Promise.all(\n        allMissions.map(async (mission) => {\n          let fromBrands: any[] = [];\n          let toBrands: any[] = [];\n          \n          // Handle from brands\n          if (mission.fromBrandIds && Array.isArray(mission.fromBrandIds) && mission.fromBrandIds.length > 0) {\n            try {\n              fromBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(mission.fromBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching mission from brands:', error);\n            }\n          }\n          \n          // Handle to brands\n          if (mission.toBrandIds && Array.isArray(mission.toBrandIds) && mission.toBrandIds.length > 0) {\n            try {\n              toBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(mission.toBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching mission to brands:', error);\n            }\n          }\n          \n          return {\n            ...mission,\n            fromBrands,\n            toBrands\n          };\n        })\n      );\n\n      // If no missions exist, return sample data\n      if (enhancedMissions.length === 0) {\n        return [\n          {\n            id: \"mission-1\",\n            title: \"Switch to Indian Electronics\",\n            description: \"Join the mission to support Indian electronics brands and reduce dependency on foreign imports.\",\n            targetCategory: \"ELECTRONICS\",\n            pointsReward: 100,\n            startDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n            endDate: new Date(Date.now() + 23 * 24 * 60 * 60 * 1000).toISOString(),\n            status: \"ACTIVE\",\n            impact: \"HIGH\",\n            fromBrands: [{ id: \"8\", name: \"Apple\", country: \"USA\", isIndian: false }, { id: \"9\", name: \"Sony\", country: \"Japan\", isIndian: false }],\n            toBrands: [{ id: \"10\", name: \"Boat\", country: \"India\", isIndian: true }, { id: \"11\", name: \"Noise\", country: \"India\", isIndian: true }],\n          },\n          {\n            id: \"mission-2\",\n            title: \"Support Indian Food Brands\",\n            description: \"Discover and switch to authentic Indian food and beverage brands for healthier, local options.\",\n            targetCategory: \"FOOD_BEVERAGES\",\n            pointsReward: 75,\n            startDate: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\n            endDate: new Date(Date.now() + 27 * 24 * 60 * 60 * 1000).toISOString(),\n            status: \"ACTIVE\",\n            impact: \"MEDIUM\",\n            fromBrands: [{ id: \"12\", name: \"Coca-Cola\", country: \"USA\", isIndian: false }, { id: \"13\", name: \"NestlÃ©\", country: \"Switzerland\", isIndian: false }],\n            toBrands: [{ id: \"14\", name: \"Paper Boat\", country: \"India\", isIndian: true }, { id: \"15\", name: \"Haldiram's\", country: \"India\", isIndian: true }],\n          }\n        ];\n      }\n\n      return enhancedMissions;\n    } catch (error) {\n      console.error('Error in getAllMissions:', error);\n      // Return sample data if database query fails\n      return [\n        {\n          id: \"mission-1\",\n          title: \"Switch to Indian Electronics\",\n          description: \"Join the mission to support Indian electronics brands and reduce dependency on foreign imports.\",\n          targetCategory: \"ELECTRONICS\",\n          pointsReward: 100,\n          startDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n          endDate: new Date(Date.now() + 23 * 24 * 60 * 60 * 1000).toISOString(),\n          status: \"ACTIVE\",\n          impact: \"HIGH\",\n          fromBrands: [{ id: \"8\", name: \"Apple\", country: \"USA\", isIndian: false }],\n          toBrands: [{ id: \"10\", name: \"Boat\", country: \"India\", isIndian: true }],\n        }\n      ];\n    }\n  }\n\n  async getOngoingMissions(): Promise<any[]> {\n    try {\n      const now = new Date();\n      const activeMissions = await db.select({\n        id: missions.id,\n        title: missions.title,\n        description: missions.description,\n        targetCategory: missions.targetCategory,\n        pointsReward: missions.pointsReward,\n        startDate: missions.startDate,\n        endDate: missions.endDate,\n        status: missions.status,\n        impact: missions.impact,\n        fromBrandIds: missions.fromBrandIds,\n        toBrandIds: missions.toBrandIds,\n      })\n      .from(missions)\n      .where(\n        sql`${missions.status} = 'ACTIVE' AND ${missions.isActive} = true AND (${missions.endDate} IS NULL OR ${missions.endDate} > ${now})`\n      )\n      .orderBy(desc(missions.startDate));\n\n      // Enhance missions with brand names\n      const enhancedMissions = await Promise.all(\n        activeMissions.map(async (mission) => {\n          let fromBrands: any[] = [];\n          let toBrands: any[] = [];\n          \n          // Handle from brands\n          if (mission.fromBrandIds && Array.isArray(mission.fromBrandIds) && mission.fromBrandIds.length > 0) {\n            try {\n              fromBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(mission.fromBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching mission from brands:', error);\n            }\n          }\n          \n          // Handle to brands\n          if (mission.toBrandIds && Array.isArray(mission.toBrandIds) && mission.toBrandIds.length > 0) {\n            try {\n              toBrands = await db.select().from(brands).where(\n                sql`${brands.id} IN (${sql.join(mission.toBrandIds.map(id => sql`${id}`), sql`, `)})`\n              );\n            } catch (error) {\n              console.error('Error fetching mission to brands:', error);\n            }\n          }\n          \n          return {\n            ...mission,\n            fromBrands,\n            toBrands\n          };\n        })\n      );\n\n    // If no missions exist, return sample data\n    if (enhancedMissions.length === 0) {\n      return [\n        {\n          id: \"mission-1\",\n          title: \"Switch to Indian Electronics\",\n          description: \"Join the mission to support Indian electronics brands and reduce dependency on foreign imports.\",\n          targetCategory: \"ELECTRONICS\",\n          pointsReward: 100,\n          startDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days ago\n          endDate: new Date(Date.now() + 23 * 24 * 60 * 60 * 1000).toISOString(), // 23 days from now\n          status: \"ACTIVE\",\n          impact: \"HIGH\",\n          fromBrands: [{ id: \"8\", name: \"Apple\", country: \"USA\", isIndian: false }, { id: \"9\", name: \"Sony\", country: \"Japan\", isIndian: false }],\n          toBrands: [{ id: \"10\", name: \"Boat\", country: \"India\", isIndian: true }, { id: \"11\", name: \"Noise\", country: \"India\", isIndian: true }],\n        },\n        {\n          id: \"mission-2\",\n          title: \"Support Indian Food Brands\",\n          description: \"Discover and switch to authentic Indian food and beverage brands for healthier, local options.\",\n          targetCategory: \"FOOD_BEVERAGES\",\n          pointsReward: 75,\n          startDate: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), // 3 days ago\n          endDate: new Date(Date.now() + 27 * 24 * 60 * 60 * 1000).toISOString(), // 27 days from now\n          status: \"ACTIVE\",\n          impact: \"MEDIUM\",\n          fromBrands: [{ id: \"12\", name: \"Coca-Cola\", country: \"USA\", isIndian: false }, { id: \"13\", name: \"NestlÃ©\", country: \"Switzerland\", isIndian: false }],\n          toBrands: [{ id: \"14\", name: \"Paper Boat\", country: \"India\", isIndian: true }, { id: \"15\", name: \"Haldiram's\", country: \"India\", isIndian: true }],\n        }\n      ];\n    }\n\n      return enhancedMissions;\n    } catch (error) {\n      console.error('Error in getOngoingMissions:', error);\n      // Return sample data if database query fails\n      return [\n        {\n          id: \"mission-1\",\n          title: \"Switch to Indian Electronics\",\n          description: \"Join the mission to support Indian electronics brands and reduce dependency on foreign imports.\",\n          targetCategory: \"ELECTRONICS\",\n          pointsReward: 100,\n          startDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n          endDate: new Date(Date.now() + 23 * 24 * 60 * 60 * 1000).toISOString(),\n          status: \"ACTIVE\",\n          impact: \"HIGH\",\n          fromBrands: [{ id: \"8\", name: \"Apple\", country: \"USA\", isIndian: false }],\n          toBrands: [{ id: \"10\", name: \"Boat\", country: \"India\", isIndian: true }],\n        }\n      ];\n    }\n  }\n\n  async getUserMissions(userId: string): Promise<any[]> {\n    try {\n      const userMissionsList = await db.select().from(userMissions).where(eq(userMissions.userId, userId));\n      return userMissionsList;\n    } catch (error) {\n      console.error('Error getting user missions:', error);\n      return [];\n    }\n  }\n\n  async joinMission(userId: string, missionId: string): Promise<any> {\n    try {\n      // Check if user already joined this mission\n      const existing = await db.select().from(userMissions)\n        .where(and(eq(userMissions.userId, userId), eq(userMissions.missionId, missionId)))\n        .limit(1);\n\n      if (existing.length > 0) {\n        throw new Error('You have already joined this mission');\n      }\n\n      const [userMission] = await db.insert(userMissions).values({\n        userId,\n        missionId,\n        status: 'STARTED',\n      }).returning();\n\n      return userMission;\n    } catch (error) {\n      console.error('Error joining mission:', error);\n      throw error;\n    }\n  }\n\n  async submitMissionSwitchLog(userId: string, missionId: string, switchLogData: any): Promise<any> {\n    try {\n      // Check if user has joined this mission\n      console.log('Checking user mission for userId:', userId, 'missionId:', missionId);\n      const userMission = await db.select().from(userMissions)\n        .where(and(eq(userMissions.userId, userId), eq(userMissions.missionId, missionId)))\n        .limit(1);\n\n      console.log('Found user mission:', userMission);\n      if (userMission.length === 0) {\n        throw new Error('You must join the mission first');\n      }\n\n      if (userMission[0].status !== 'STARTED') {\n        throw new Error('Mission already completed or failed');\n      }\n\n      // Create switch log with mission reference\n      const switchLog = await this.createSwitchLog({\n        userId,\n        targetBrandFrom: switchLogData.targetBrandFrom,\n        targetBrandTo: switchLogData.targetBrandTo,\n        reason: switchLogData.reason,\n        experience: switchLogData.experience,\n        financialImpact: switchLogData.financialImpact,\n        evidenceUrl: switchLogData.evidenceUrl,\n        missionId,\n        status: 'PENDING'\n      });\n\n      return switchLog;\n    } catch (error) {\n      console.error('Error submitting mission switch log:', error);\n      throw error;\n    }\n  }\n\n  async verifyMissionSwitchLog(switchLogId: string, moderatorId: string, approved: boolean, feedback?: string): Promise<any> {\n    try {\n      // Get the switch log\n      const [switchLog] = await db.select().from(switchLogs).where(eq(switchLogs.id, switchLogId));\n      \n      if (!switchLog) {\n        throw new Error('Switch log not found');\n      }\n\n      if (!switchLog.missionId) {\n        throw new Error('This switch log is not associated with a mission');\n      }\n\n      // Update switch log status\n      const newStatus = approved ? 'APPROVED' : 'REJECTED';\n      const updateData: any = { \n        status: newStatus,\n        moderatorNotes: feedback,\n        approvedAt: new Date()\n      };\n      \n      // Only set moderatorId if it's not null and the user exists\n      if (moderatorId) {\n        updateData.moderatorId = moderatorId;\n      }\n      \n      await db.update(switchLogs)\n        .set(updateData)\n        .where(eq(switchLogs.id, switchLogId));\n\n      // Get mission details for points calculation\n      const [mission] = await db.select().from(missions).where(eq(missions.id, switchLog.missionId));\n      \n      // If approved, complete the user mission and award points\n      if (approved && mission) {\n        // Update user mission status\n        await db.update(userMissions)\n          .set({ \n            status: 'COMPLETED',\n            completedAt: new Date()\n          })\n          .where(and(eq(userMissions.userId, switchLog.userId), eq(userMissions.missionId, switchLog.missionId)));\n\n        // Award points to user\n        await db.update(users)\n          .set({ \n            points: sql`${users.points} + ${mission.pointsReward}`\n          })\n          .where(eq(users.id, switchLog.userId));\n      } else if (!approved) {\n        // Mark mission as failed\n        await db.update(userMissions)\n          .set({ status: 'FAILED' })\n          .where(and(eq(userMissions.userId, switchLog.userId), eq(userMissions.missionId, switchLog.missionId)));\n      }\n\n      const pointsAwarded = approved && mission ? mission.pointsReward : 0;\n      return { success: true, approved, pointsAwarded };\n    } catch (error) {\n      console.error('Error verifying mission switch log:', error);\n      throw error;\n    }\n  }\n\n  async getMissionSubmissions(): Promise<any[]> {\n    try {\n      console.log('Fetching mission submissions...');\n      \n      // Get all switch logs that are related to missions and pending verification\n      const submissions = await db\n        .select({\n          id: switchLogs.id,\n          userId: switchLogs.userId,\n          missionId: switchLogs.missionId,\n          reason: switchLogs.reason,\n          experience: switchLogs.experience,\n          financialImpact: switchLogs.financialImpact,\n          evidenceUrl: switchLogs.evidenceUrl,\n          status: switchLogs.status,\n          createdAt: switchLogs.createdAt,\n          userName: users.handle,\n          missionTitle: missions.title,\n        })\n        .from(switchLogs)\n        .leftJoin(users, eq(switchLogs.userId, users.id))\n        .leftJoin(missions, eq(switchLogs.missionId, missions.id))\n        .where(\n          sql`${switchLogs.missionId} IS NOT NULL AND ${switchLogs.status} = 'PENDING'`\n        )\n        .orderBy(desc(switchLogs.createdAt));\n\n      console.log('Found mission submissions:', submissions.length);\n      return submissions;\n    } catch (error) {\n      console.error('Error fetching mission submissions:', error);\n      return [];\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":59465},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport { \n  pgTable, \n  text, \n  varchar, \n  integer, \n  boolean, \n  timestamp, \n  jsonb,\n  pgEnum,\n  decimal\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Enums\nexport const userRoleEnum = pgEnum('user_role', ['MEMBER', 'MODERATOR', 'STRATEGIST', 'ADMIN']);\nexport const switchCategoryEnum = pgEnum('switch_category', [\n  'FOOD_BEVERAGES', \n  'ELECTRONICS', \n  'FASHION', \n  'BEAUTY', \n  'HOME_GARDEN',\n  'AUTOMOTIVE',\n  'SPORTS',\n  'BOOKS_MEDIA',\n  'OTHER'\n]);\nexport const switchLogStatus = pgEnum('switch_log_status', ['PENDING', 'APPROVED', 'REJECTED']);\nexport const impactEnum = pgEnum('impact', ['LOW', 'MEDIUM', 'HIGH', 'VERY_HIGH']);\nexport const missionStatusEnum = pgEnum('mission_status', ['DRAFT', 'ACTIVE', 'COMPLETED', 'EXPIRED']);\nexport const communityVisibilityEnum = pgEnum('community_visibility', ['PUBLIC', 'PRIVATE', 'INVITE_ONLY']);\n\n// Users table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  firebaseUid: varchar(\"firebase_uid\").notNull().unique(),\n  phone: varchar(\"phone\"),\n  email: varchar(\"email\"),\n  handle: varchar(\"handle\").notNull().unique(),\n  region: varchar(\"region\"),\n  role: userRoleEnum(\"role\").default('MEMBER'),\n  points: integer(\"points\").default(0),\n  level: integer(\"level\").default(1),\n  switchCount: integer(\"switch_count\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  lastLoginAt: timestamp(\"last_login_at\")\n});\n\n// Public aliases for social sharing\nexport const publicAliases = pgTable(\"public_aliases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  platform: varchar(\"platform\").notNull(), // 'twitter', 'whatsapp', etc.\n  aliasName: varchar(\"alias_name\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Categories table for enhanced filtering\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull().unique(),\n  description: text(\"description\"),\n  color: varchar(\"color\").default(\"#3B82F6\"), // Hex color for UI\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Tags table for content categorization  \nexport const tags = pgTable(\"tags\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull().unique(),\n  description: text(\"description\"),\n  color: varchar(\"color\").default(\"#10B981\"), // Hex color for UI\n  usageCount: integer(\"usage_count\").default(0),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Communities table for member groups\nexport const communities = pgTable(\"communities\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  coverImageUrl: varchar(\"cover_image_url\"),\n  visibility: communityVisibilityEnum(\"visibility\").default('PUBLIC'),\n  memberCount: integer(\"member_count\").default(0),\n  isActive: boolean(\"is_active\").default(true),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow()\n});\n\n// Community memberships\nexport const communityMembers = pgTable(\"community_members\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  communityId: varchar(\"community_id\").references(() => communities.id, { onDelete: 'cascade' }),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  role: varchar(\"role\").default('MEMBER'), // MEMBER, MODERATOR, ADMIN\n  joinedAt: timestamp(\"joined_at\").defaultNow()\n});\n\n// Brands table\nexport const brands = pgTable(\"brands\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  company: varchar(\"company\"),\n  country: varchar(\"country\"),\n  isIndian: boolean(\"is_indian\").default(false),\n  category: switchCategoryEnum(\"category\"),\n  logoUrl: varchar(\"logo_url\"),\n  tags: text(\"tags\").array(), // Array of tag IDs\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Switch logs\nexport const switchLogs = pgTable(\"switch_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  fromBrandId: varchar(\"from_brand_id\").references(() => brands.id),\n  toBrandId: varchar(\"to_brand_id\").references(() => brands.id),\n  missionId: varchar(\"mission_id\").references(() => missions.id), // For mission-related switch logs\n  category: switchCategoryEnum(\"category\"),\n  categoryId: varchar(\"category_id\").references(() => categories.id),\n  tags: text(\"tags\").array(), // Array of tag IDs\n  reason: text(\"reason\"),\n  experience: text(\"experience\"), // User's experience with the switch\n  financialImpact: text(\"financial_impact\"), // Financial benefits\n  evidenceUrl: varchar(\"evidence_url\"),\n  isPublic: boolean(\"is_public\").default(false),\n  status: switchLogStatus(\"status\").default('PENDING'),\n  moderatorId: varchar(\"moderator_id\").references(() => users.id),\n  moderatorNotes: text(\"moderator_notes\"),\n  approvedAt: timestamp(\"approved_at\"),\n  points: integer(\"points\").default(25),\n  communityId: varchar(\"community_id\").references(() => communities.id), // For community-specific posts\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Reactions table for enhanced social interactions\nexport const reactions = pgTable(\"reactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  postId: varchar(\"post_id\").references(() => posts.id, { onDelete: 'cascade' }),\n  type: varchar(\"type\").notNull(), // 'like', 'love', 'fire', 'celebrate', 'support'\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Weekly/Monthly leaderboard snapshots\nexport const leaderboardSnapshots = pgTable(\"leaderboard_snapshots\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  period: varchar(\"period\").notNull(), // 'weekly', 'monthly'\n  year: integer(\"year\").notNull(),\n  week: integer(\"week\"), // for weekly snapshots\n  month: integer(\"month\"), // for monthly snapshots\n  points: integer(\"points\").default(0),\n  switches: integer(\"switches\").default(0),\n  rank: integer(\"rank\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Content moderation reports\nexport const moderationReports = pgTable(\"moderation_reports\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  reporterId: varchar(\"reporter_id\").references(() => users.id, { onDelete: 'cascade' }),\n  contentType: varchar(\"content_type\").notNull(), // 'post', 'comment'\n  contentId: varchar(\"content_id\").notNull(),\n  reason: varchar(\"reason\").notNull(),\n  description: text(\"description\"),\n  status: varchar(\"status\").default('PENDING'), // PENDING, REVIEWED, RESOLVED\n  moderatorId: varchar(\"moderator_id\").references(() => users.id),\n  resolution: text(\"resolution\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  resolvedAt: timestamp(\"resolved_at\")\n});\n\n// Post types enum\nexport const postTypeEnum = pgEnum(\"post_type\", [\n  \"GENERAL\", // Regular posts\n  \"SWITCH_LOG_PROMPT\", // Moderator posts prompting switch logs\n  \"MISSION_PROMPT\", // Moderator posts prompting missions\n  \"ANNOUNCEMENT\", // Official announcements\n  \"POLL\" // Community polls\n]);\n\n// Posts (for social feed)\nexport const posts = pgTable(\"posts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  switchLogId: varchar(\"switch_log_id\").references(() => switchLogs.id, { onDelete: 'cascade' }),\n  missionId: varchar(\"mission_id\").references(() => missions.id), // For mission-related posts\n  postType: postTypeEnum(\"post_type\").default(\"GENERAL\"),\n  title: varchar(\"title\"), // For titled posts like prompts\n  content: text(\"content\"),\n  imageUrl: varchar(\"image_url\"),\n  categoryId: varchar(\"category_id\").references(() => categories.id),\n  tags: text(\"tags\").array(), // Array of tag IDs\n  communityId: varchar(\"community_id\").references(() => communities.id), // For community-specific posts\n  targetBrandFrom: varchar(\"target_brand_from\"), // For switch log prompts\n  targetBrandTo: varchar(\"target_brand_to\"), // For switch log prompts\n  actionButtonText: varchar(\"action_button_text\"), // Custom text for action button\n  actionButtonUrl: varchar(\"action_button_url\"), // URL for action button\n  isPromotional: boolean(\"is_promotional\").default(false), // For promoted content\n  isPinned: boolean(\"is_pinned\").default(false), // For pinned posts\n  likesCount: integer(\"likes_count\").default(0),\n  commentsCount: integer(\"comments_count\").default(0),\n  sharesCount: integer(\"shares_count\").default(0),\n  switchLogsCount: integer(\"switch_logs_count\").default(0), // Count of switch logs created from this post\n  commentsEnabled: boolean(\"comments_enabled\").default(true),\n  upvotesEnabled: boolean(\"upvotes_enabled\").default(true),\n  downvotesEnabled: boolean(\"downvotes_enabled\").default(true),\n  expiresAt: timestamp(\"expires_at\"), // For time-limited posts\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Likes\nexport const likes = pgTable(\"likes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  postId: varchar(\"post_id\").references(() => posts.id, { onDelete: 'cascade' }),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Comments\nexport const comments = pgTable(\"comments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  postId: varchar(\"post_id\").references(() => posts.id, { onDelete: 'cascade' }),\n  content: text(\"content\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// News items\nexport const newsItems = pgTable(\"news_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  summary: text(\"summary\"),\n  sourceUrl: varchar(\"source_url\"),\n  imageUrl: varchar(\"image_url\"),\n  isApproved: boolean(\"is_approved\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Target suggestions\nexport const targetSuggestions = pgTable(\"target_suggestions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  fromBrandName: varchar(\"from_brand_name\").notNull(),\n  toBrandName: varchar(\"to_brand_name\"),\n  category: switchCategoryEnum(\"category\"),\n  rationale: text(\"rationale\"),\n  status: varchar(\"status\").default('PENDING'), // PENDING, APPROVED, REJECTED\n  enrichmentData: jsonb(\"enrichment_data\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Switch targets (approved suggestions)\nexport const switchTargets = pgTable(\"switch_targets\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  fromBrandId: varchar(\"from_brand_id\").references(() => brands.id),\n  toBrandId: varchar(\"to_brand_id\").references(() => brands.id),\n  category: switchCategoryEnum(\"category\"),\n  description: text(\"description\"),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Achievements\nexport const achievements = pgTable(\"achievements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  icon: varchar(\"icon\"),\n  pointsRequired: integer(\"points_required\"),\n  switchesRequired: integer(\"switches_required\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// User achievements\nexport const userAchievements = pgTable(\"user_achievements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  achievementId: varchar(\"achievement_id\").references(() => achievements.id, { onDelete: 'cascade' }),\n  earnedAt: timestamp(\"earned_at\").defaultNow()\n});\n\n// Feedback questions for moderators to create\nexport const feedbackQuestions = pgTable(\"feedback_questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  type: varchar(\"type\").default('multiple_choice'), // multiple_choice, text, rating\n  options: jsonb(\"options\"), // for multiple choice questions\n  isActive: boolean(\"is_active\").default(true),\n  startDate: timestamp(\"start_date\").defaultNow(),\n  endDate: timestamp(\"end_date\"),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Feedback responses from users\nexport const feedbackResponses = pgTable(\"feedback_responses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  questionId: varchar(\"question_id\").references(() => feedbackQuestions.id, { onDelete: 'cascade' }),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  response: text(\"response\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Missions/targets set by moderators\nexport const missions = pgTable(\"missions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  targetCategory: switchCategoryEnum(\"target_category\"),\n  categoryId: varchar(\"category_id\").references(() => categories.id),\n  tags: text(\"tags\").array(), // Array of tag IDs\n  fromBrandIds: text(\"from_brand_ids\").array(), // Array of brand IDs to switch from\n  toBrandIds: text(\"to_brand_ids\").array(), // Array of brand IDs to switch to\n  impact: impactEnum(\"impact\").default('MEDIUM'),\n  financialValue: decimal(\"financial_value\", { precision: 10, scale: 2 }),\n  imageUrls: text(\"image_urls\").array(), // Multiple image uploads\n  pointsReward: integer(\"points_reward\").default(50),\n  startDate: timestamp(\"start_date\").defaultNow(),\n  endDate: timestamp(\"end_date\"),\n  status: missionStatusEnum(\"status\").default('DRAFT'),\n  communityId: varchar(\"community_id\").references(() => communities.id), // For community-specific missions\n  isActive: boolean(\"is_active\").default(true),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// User mission participation\nexport const userMissions = pgTable(\"user_missions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  missionId: varchar(\"mission_id\").references(() => missions.id, { onDelete: 'cascade' }),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  status: varchar(\"status\").default('STARTED'), // STARTED, COMPLETED, FAILED\n  completedAt: timestamp(\"completed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// News articles posted by moderators\nexport const newsArticles = pgTable(\"news_articles\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  imageUrls: text(\"image_urls\").array(), // Array of image URLs\n  suggestedFromBrandIds: text(\"suggested_from_brand_ids\").array(),\n  suggestedToBrandIds: text(\"suggested_to_brand_ids\").array(),\n  commentsEnabled: boolean(\"comments_enabled\").default(true),\n  isPublished: boolean(\"is_published\").default(true),\n  publishedAt: timestamp(\"published_at\").defaultNow(),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow()\n});\n\n// Private messages between members and moderators\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  fromUserId: varchar(\"from_user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  toUserId: varchar(\"to_user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  subject: varchar(\"subject\").notNull(),\n  content: text(\"content\").notNull(),\n  isRead: boolean(\"is_read\").default(false),\n  attachmentUrls: text(\"attachment_urls\").array(),\n  replyToId: varchar(\"reply_to_id\"), // Simplified to avoid circular reference\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Enhanced posts with target alternatives and URLs\nexport const moderatorPosts = pgTable(\"moderator_posts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  targetBrandIds: text(\"target_brand_ids\").array(), // Brands to switch from\n  alternativeBrandIds: text(\"alternative_brand_ids\").array(), // Suggested alternatives\n  imageUrls: text(\"image_urls\").array(),\n  externalUrls: text(\"external_urls\").array(), // Reference links\n  category: switchCategoryEnum(\"category\"),\n  categoryId: varchar(\"category_id\").references(() => categories.id),\n  tags: text(\"tags\").array(), // Array of tag IDs\n  communityId: varchar(\"community_id\").references(() => communities.id), // For community-specific posts\n  isPinned: boolean(\"is_pinned\").default(false),\n  commentsEnabled: boolean(\"comments_enabled\").default(true),\n  upvotesEnabled: boolean(\"upvotes_enabled\").default(true),\n  downvotesEnabled: boolean(\"downvotes_enabled\").default(true),\n  createdBy: varchar(\"created_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow()\n});\n\n// Content tags association table for many-to-many relationships\nexport const contentTags = pgTable(\"content_tags\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  contentType: varchar(\"content_type\").notNull(), // 'post', 'mission', 'switch_log', 'moderator_post'\n  contentId: varchar(\"content_id\").notNull(),\n  tagId: varchar(\"tag_id\").references(() => tags.id, { onDelete: 'cascade' }),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Feedback submissions (renamed from target suggestions)\nexport const feedbackSubmissions = pgTable(\"feedback_submissions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: 'cascade' }),\n  fromBrandName: varchar(\"from_brand_name\").notNull(),\n  toBrandName: varchar(\"to_brand_name\"),\n  category: switchCategoryEnum(\"category\"),\n  categoryId: varchar(\"category_id\").references(() => categories.id),\n  tags: text(\"tags\").array(),\n  rationale: text(\"rationale\").notNull(),\n  status: varchar(\"status\").default('PENDING'), // PENDING, APPROVED, REJECTED\n  moderatorId: varchar(\"moderator_id\").references(() => users.id),\n  moderatorNotes: text(\"moderator_notes\"),\n  reviewedAt: timestamp(\"reviewed_at\"),\n  enrichmentData: jsonb(\"enrichment_data\"),\n  createdAt: timestamp(\"created_at\").defaultNow()\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  switchLogs: many(switchLogs),\n  posts: many(posts),\n  likes: many(likes),\n  comments: many(comments),\n  reactions: many(reactions),\n  publicAliases: many(publicAliases),\n  feedbackSubmissions: many(feedbackSubmissions),\n  userAchievements: many(userAchievements),\n  leaderboardSnapshots: many(leaderboardSnapshots),\n  communityMemberships: many(communityMembers),\n  createdCommunities: many(communities),\n  missions: many(missions),\n  userMissions: many(userMissions),\n  moderatorPosts: many(moderatorPosts)\n}));\n\nexport const categoriesRelations = relations(categories, ({ many }) => ({\n  switchLogs: many(switchLogs),\n  posts: many(posts),\n  missions: many(missions),\n  moderatorPosts: many(moderatorPosts),\n  feedbackSubmissions: many(feedbackSubmissions)\n}));\n\nexport const tagsRelations = relations(tags, ({ many }) => ({\n  contentTags: many(contentTags)\n}));\n\nexport const communitiesRelations = relations(communities, ({ one, many }) => ({\n  creator: one(users, { fields: [communities.createdBy], references: [users.id] }),\n  members: many(communityMembers),\n  switchLogs: many(switchLogs),\n  posts: many(posts),\n  missions: many(missions),\n  moderatorPosts: many(moderatorPosts)\n}));\n\nexport const communityMembersRelations = relations(communityMembers, ({ one }) => ({\n  community: one(communities, { fields: [communityMembers.communityId], references: [communities.id] }),\n  user: one(users, { fields: [communityMembers.userId], references: [users.id] })\n}));\n\nexport const switchLogsRelations = relations(switchLogs, ({ one, many }) => ({\n  user: one(users, { fields: [switchLogs.userId], references: [users.id] }),\n  fromBrand: one(brands, { fields: [switchLogs.fromBrandId], references: [brands.id] }),\n  toBrand: one(brands, { fields: [switchLogs.toBrandId], references: [brands.id] }),\n  mission: one(missions, { fields: [switchLogs.missionId], references: [missions.id] }),\n  category: one(categories, { fields: [switchLogs.categoryId], references: [categories.id] }),\n  community: one(communities, { fields: [switchLogs.communityId], references: [communities.id] }),\n  moderator: one(users, { fields: [switchLogs.moderatorId], references: [users.id] }),\n  posts: many(posts)\n}));\n\nexport const postsRelations = relations(posts, ({ one, many }) => ({\n  user: one(users, { fields: [posts.userId], references: [users.id] }),\n  switchLog: one(switchLogs, { fields: [posts.switchLogId], references: [switchLogs.id] }),\n  category: one(categories, { fields: [posts.categoryId], references: [categories.id] }),\n  community: one(communities, { fields: [posts.communityId], references: [communities.id] }),\n  likes: many(likes),\n  comments: many(comments),\n  reactions: many(reactions)\n}));\n\nexport const likesRelations = relations(likes, ({ one }) => ({\n  user: one(users, { fields: [likes.userId], references: [users.id] }),\n  post: one(posts, { fields: [likes.postId], references: [posts.id] })\n}));\n\nexport const commentsRelations = relations(comments, ({ one }) => ({\n  user: one(users, { fields: [comments.userId], references: [users.id] }),\n  post: one(posts, { fields: [comments.postId], references: [posts.id] })\n}));\n\nexport const reactionsRelations = relations(reactions, ({ one }) => ({\n  user: one(users, { fields: [reactions.userId], references: [users.id] }),\n  post: one(posts, { fields: [reactions.postId], references: [posts.id] })\n}));\n\nexport const leaderboardSnapshotsRelations = relations(leaderboardSnapshots, ({ one }) => ({\n  user: one(users, { fields: [leaderboardSnapshots.userId], references: [users.id] })\n}));\n\nexport const moderationReportsRelations = relations(moderationReports, ({ one }) => ({\n  reporter: one(users, { fields: [moderationReports.reporterId], references: [users.id] }),\n  moderator: one(users, { fields: [moderationReports.moderatorId], references: [users.id] })\n}));\n\nexport const missionsRelations = relations(missions, ({ one, many }) => ({\n  creator: one(users, { fields: [missions.createdBy], references: [users.id] }),\n  category: one(categories, { fields: [missions.categoryId], references: [categories.id] }),\n  community: one(communities, { fields: [missions.communityId], references: [communities.id] }),\n  userMissions: many(userMissions),\n  switchLogs: many(switchLogs)\n}));\n\nexport const userMissionsRelations = relations(userMissions, ({ one }) => ({\n  user: one(users, { fields: [userMissions.userId], references: [users.id] }),\n  mission: one(missions, { fields: [userMissions.missionId], references: [missions.id] })\n}));\n\nexport const moderatorPostsRelations = relations(moderatorPosts, ({ one }) => ({\n  creator: one(users, { fields: [moderatorPosts.createdBy], references: [users.id] }),\n  category: one(categories, { fields: [moderatorPosts.categoryId], references: [categories.id] }),\n  community: one(communities, { fields: [moderatorPosts.communityId], references: [communities.id] })\n}));\n\nexport const feedbackSubmissionsRelations = relations(feedbackSubmissions, ({ one }) => ({\n  user: one(users, { fields: [feedbackSubmissions.userId], references: [users.id] }),\n  category: one(categories, { fields: [feedbackSubmissions.categoryId], references: [categories.id] }),\n  moderator: one(users, { fields: [feedbackSubmissions.moderatorId], references: [users.id] })\n}));\n\nexport const contentTagsRelations = relations(contentTags, ({ one }) => ({\n  tag: one(tags, { fields: [contentTags.tagId], references: [tags.id] })\n}));\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  lastLoginAt: true\n});\n\nexport const insertSwitchLogSchema = createInsertSchema(switchLogs).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertPostSchema = createInsertSchema(posts).omit({\n  id: true,\n  createdAt: true,\n  likesCount: true,\n  commentsCount: true,\n  sharesCount: true\n});\n\nexport const insertBrandSchema = createInsertSchema(brands).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertCommentSchema = createInsertSchema(comments).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertTargetSuggestionSchema = createInsertSchema(targetSuggestions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertReactionSchema = createInsertSchema(reactions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertModerationReportSchema = createInsertSchema(moderationReports).omit({\n  id: true,\n  createdAt: true,\n  resolvedAt: true\n});\n\nexport const insertFeedbackQuestionSchema = createInsertSchema(feedbackQuestions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertFeedbackResponseSchema = createInsertSchema(feedbackResponses).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertMissionSchema = createInsertSchema(missions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertUserMissionSchema = createInsertSchema(userMissions).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertNewsArticleSchema = createInsertSchema(newsArticles).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  publishedAt: true\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertModeratorPostSchema = createInsertSchema(moderatorPosts).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertTagSchema = createInsertSchema(tags).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertCommunitySchema = createInsertSchema(communities).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  memberCount: true\n});\n\nexport const insertCommunityMemberSchema = createInsertSchema(communityMembers).omit({\n  id: true,\n  joinedAt: true\n});\n\nexport const insertContentTagSchema = createInsertSchema(contentTags).omit({\n  id: true,\n  createdAt: true\n});\n\nexport const insertFeedbackSubmissionSchema = createInsertSchema(feedbackSubmissions).omit({\n  id: true,\n  createdAt: true,\n  reviewedAt: true\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type SwitchLog = typeof switchLogs.$inferSelect;\nexport type InsertSwitchLog = z.infer<typeof insertSwitchLogSchema>;\nexport type Post = typeof posts.$inferSelect;\nexport type InsertPost = z.infer<typeof insertPostSchema>;\nexport type Brand = typeof brands.$inferSelect;\nexport type InsertBrand = z.infer<typeof insertBrandSchema>;\nexport type Comment = typeof comments.$inferSelect;\nexport type InsertComment = z.infer<typeof insertCommentSchema>;\nexport type TargetSuggestion = typeof targetSuggestions.$inferSelect;\nexport type InsertTargetSuggestion = z.infer<typeof insertTargetSuggestionSchema>;\nexport type Reaction = typeof reactions.$inferSelect;\nexport type InsertReaction = z.infer<typeof insertReactionSchema>;\nexport type LeaderboardSnapshot = typeof leaderboardSnapshots.$inferSelect;\nexport type ModerationReport = typeof moderationReports.$inferSelect;\nexport type InsertModerationReport = z.infer<typeof insertModerationReportSchema>;\nexport type FeedbackQuestion = typeof feedbackQuestions.$inferSelect;\nexport type InsertFeedbackQuestion = z.infer<typeof insertFeedbackQuestionSchema>;\nexport type FeedbackResponse = typeof feedbackResponses.$inferSelect;\nexport type InsertFeedbackResponse = z.infer<typeof insertFeedbackResponseSchema>;\nexport type Mission = typeof missions.$inferSelect;\nexport type InsertMission = z.infer<typeof insertMissionSchema>;\nexport type UserMission = typeof userMissions.$inferSelect;\nexport type InsertUserMission = z.infer<typeof insertUserMissionSchema>;\nexport type NewsArticle = typeof newsArticles.$inferSelect;\nexport type InsertNewsArticle = z.infer<typeof insertNewsArticleSchema>;\nexport type Message = typeof messages.$inferSelect;\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type ModeratorPost = typeof moderatorPosts.$inferSelect;\nexport type InsertModeratorPost = z.infer<typeof insertModeratorPostSchema>;\n\n// New types for enhanced features\nexport type Category = typeof categories.$inferSelect;\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Tag = typeof tags.$inferSelect;\nexport type InsertTag = z.infer<typeof insertTagSchema>;\nexport type Community = typeof communities.$inferSelect;\nexport type InsertCommunity = z.infer<typeof insertCommunitySchema>;\nexport type CommunityMember = typeof communityMembers.$inferSelect;\nexport type InsertCommunityMember = z.infer<typeof insertCommunityMemberSchema>;\nexport type ContentTag = typeof contentTags.$inferSelect;\nexport type InsertContentTag = z.infer<typeof insertContentTagSchema>;\nexport type FeedbackSubmission = typeof feedbackSubmissions.$inferSelect;\nexport type InsertFeedbackSubmission = z.infer<typeof insertFeedbackSubmissionSchema>;\n","size_bytes":30206},"client/src/App.tsx":{"content":"import { Switch, Route, Router } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/context/AuthContext\";\nimport { Navigation } from \"@/components/Navigation\";\n\n// Import pages\nimport Home from \"@/pages/Home\";\nimport Login from \"@/pages/Login\";\nimport Register from \"@/pages/Register\";\nimport LogSwitch from \"@/pages/LogSwitch\";\nimport AdminPanel from \"@/pages/AdminPanel\";\nimport ModeratorPanel from \"@/pages/ModeratorPanel\";\nimport EnhancedHome from \"@/pages/EnhancedHome\";\nimport EnhancedLogin from \"@/pages/EnhancedLogin\";\nimport EnhancedMemberDashboard from \"@/pages/EnhancedMemberDashboard\";\nimport EnhancedModeratorPanel from \"@/pages/EnhancedModeratorPanel\";\nimport MemberRegistration from \"@/pages/MemberRegistration\";\nimport ModeratorRegistration from \"@/pages/ModeratorRegistration\";\nimport News from \"@/pages/News\";\nimport Missions from \"@/pages/Missions\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <EnhancedLogin />;\n  }\n\n  return <>{children}</>;\n}\n\nfunction AppRouter() {\n  const { user } = useAuth();\n\n  return (\n    <div className=\"min-h-screen\">\n      {user && <Navigation />}\n      <Switch>\n        <Route path=\"/login\" component={EnhancedLogin} />\n        <Route path=\"/old-login\" component={Login} />\n        <Route path=\"/register\" component={MemberRegistration} />\n        <Route path=\"/register/moderator\" component={ModeratorRegistration} />\n        <Route path=\"/old-register\" component={Register} />\n\n        {/* Protected Routes */}\n        <Route path=\"/\">\n          <ProtectedRoute>\n            <Home />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/log-switch\">\n          <ProtectedRoute>\n            <LogSwitch />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin\">\n          <ProtectedRoute>\n            <AdminPanel />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/moderator\">\n          <ProtectedRoute>\n            <EnhancedModeratorPanel />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/dashboard\">\n          <ProtectedRoute>\n            <EnhancedMemberDashboard />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/enhanced\">\n          <ProtectedRoute>\n            <EnhancedHome />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/news\">\n          <ProtectedRoute>\n            <News />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/missions\">\n          <ProtectedRoute>\n            <Missions />\n          </ProtectedRoute>\n        </Route>\n\n        {/* Fallback to 404 */}\n        <Route component={NotFound} />\n      </Switch>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Toaster />\n          <AppRouter />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":3622},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(210, 25%, 7.8431%);\n  --card: hsl(180, 6.6667%, 97.0588%);\n  --card-foreground: hsl(210, 25%, 7.8431%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(210, 25%, 7.8431%);\n  --primary: hsl(24, 100%, 58%); /* Saffron Orange */\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(210, 25%, 7.8431%);\n  --secondary-foreground: hsl(0, 0%, 100%);\n  --muted: hsl(240, 1.9608%, 90%);\n  --muted-foreground: hsl(210, 25%, 7.8431%);\n  --accent: hsl(211.5789, 51.3514%, 92.7451%);\n  --accent-foreground: hsl(24, 100%, 58%);\n  --destructive: hsl(356.3033, 90.5579%, 54.3137%);\n  --destructive-foreground: hsl(0, 0%, 100%);\n  --border: hsl(201.4286, 30.4348%, 90.9804%);\n  --input: hsl(200, 23.0769%, 97.4510%);\n  --ring: hsl(24, 100%, 58%);\n  \n  /* Indian-inspired color palette */\n  --saffron: hsl(24, 100%, 58%); /* #FF9933 */\n  --forest-green: hsl(120, 60%, 34%); /* #228B22 */\n  --royal-blue: hsl(210, 100%, 20%); /* #003366 */\n  --golden: hsl(51, 100%, 50%); /* #FFD700 */\n  --warm-gray: hsl(0, 0%, 96%); /* #F5F5F5 */\n  \n  /* Chart colors with Indian theme */\n  --chart-1: hsl(24, 100%, 58%); /* Saffron */\n  --chart-2: hsl(120, 60%, 34%); /* Forest Green */\n  --chart-3: hsl(51, 100%, 50%); /* Golden */\n  --chart-4: hsl(210, 100%, 20%); /* Royal Blue */\n  --chart-5: hsl(341.4894, 75.2000%, 50.9804%);\n  \n  /* Sidebar theme */\n  --sidebar: hsl(180, 6.6667%, 97.0588%);\n  --sidebar-foreground: hsl(210, 25%, 7.8431%);\n  --sidebar-primary: hsl(24, 100%, 58%);\n  --sidebar-primary-foreground: hsl(0, 0%, 100%);\n  --sidebar-accent: hsl(211.5789, 51.3514%, 92.7451%);\n  --sidebar-accent-foreground: hsl(24, 100%, 58%);\n  --sidebar-border: hsl(205.0000, 25.0000%, 90.5882%);\n  --sidebar-ring: hsl(24, 100%, 58%);\n  \n  /* Typography */\n  --font-sans: 'Inter', 'Open Sans', sans-serif;\n  --font-serif: 'Poppins', Georgia, serif;\n  --font-mono: 'Fira Code', Menlo, monospace;\n  \n  /* Layout */\n  --radius: 0.75rem;\n  \n  /* Shadows with warm theme */\n  --shadow-2xs: 0px 1px 2px 0px hsl(24, 100%, 58%, 0.05);\n  --shadow-xs: 0px 1px 2px 0px hsl(24, 100%, 58%, 0.1);\n  --shadow-sm: 0px 1px 3px 0px hsl(24, 100%, 58%, 0.1), 0px 1px 2px -1px hsl(24, 100%, 58%, 0.1);\n  --shadow: 0px 1px 3px 0px hsl(24, 100%, 58%, 0.1), 0px 1px 2px -1px hsl(24, 100%, 58%, 0.1);\n  --shadow-md: 0px 4px 6px -1px hsl(24, 100%, 58%, 0.1), 0px 2px 4px -2px hsl(24, 100%, 58%, 0.1);\n  --shadow-lg: 0px 10px 15px -3px hsl(24, 100%, 58%, 0.1), 0px 4px 6px -4px hsl(24, 100%, 58%, 0.1);\n  --shadow-xl: 0px 20px 25px -5px hsl(24, 100%, 58%, 0.1), 0px 8px 10px -6px hsl(24, 100%, 58%, 0.1);\n  --shadow-2xl: 0px 25px 50px -12px hsl(24, 100%, 58%, 0.25);\n  \n  /* Spacing and tracking */\n  --spacing: 0.25rem;\n  --tracking-normal: 0em;\n}\n\n.dark {\n  --background: hsl(0, 0%, 0%);\n  --foreground: hsl(200, 6.6667%, 91.1765%);\n  --card: hsl(228, 9.8039%, 10%);\n  --card-foreground: hsl(0, 0%, 85.0980%);\n  --popover: hsl(0, 0%, 0%);\n  --popover-foreground: hsl(200, 6.6667%, 91.1765%);\n  --primary: hsl(24, 100%, 65%); /* Lighter saffron for dark mode */\n  --primary-foreground: hsl(0, 0%, 0%);\n  --secondary: hsl(195.0000, 15.3846%, 94.9020%);\n  --secondary-foreground: hsl(210, 25%, 7.8431%);\n  --muted: hsl(0, 0%, 9.4118%);\n  --muted-foreground: hsl(210, 3.3898%, 46.2745%);\n  --accent: hsl(205.7143, 70%, 7.8431%);\n  --accent-foreground: hsl(24, 100%, 65%);\n  --destructive: hsl(356.3033, 90.5579%, 54.3137%);\n  --destructive-foreground: hsl(0, 0%, 100%);\n  --border: hsl(210, 5.2632%, 14.9020%);\n  --input: hsl(207.6923, 27.6596%, 18.4314%);\n  --ring: hsl(24, 100%, 65%);\n  \n  /* Dark mode Indian colors */\n  --saffron: hsl(24, 100%, 65%);\n  --forest-green: hsl(120, 60%, 45%);\n  --royal-blue: hsl(210, 100%, 30%);\n  --golden: hsl(51, 100%, 60%);\n  --warm-gray: hsl(0, 0%, 10%);\n  \n  /* Dark mode charts */\n  --chart-1: hsl(24, 100%, 65%);\n  --chart-2: hsl(120, 60%, 45%);\n  --chart-3: hsl(51, 100%, 60%);\n  --chart-4: hsl(210, 100%, 30%);\n  --chart-5: hsl(341.4894, 75.2000%, 60%);\n  \n  /* Dark sidebar */\n  --sidebar: hsl(228, 9.8039%, 10%);\n  --sidebar-foreground: hsl(0, 0%, 85.0980%);\n  --sidebar-primary: hsl(24, 100%, 65%);\n  --sidebar-primary-foreground: hsl(0, 0%, 0%);\n  --sidebar-accent: hsl(205.7143, 70%, 7.8431%);\n  --sidebar-accent-foreground: hsl(24, 100%, 65%);\n  --sidebar-border: hsl(205.7143, 15.7895%, 26.0784%);\n  --sidebar-ring: hsl(24, 100%, 65%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    font-feature-settings: \"rlig\" 1, \"calt\" 1;\n  }\n  \n  h1, h2, h3, h4, h5, h6 {\n    @apply font-serif;\n  }\n}\n\n@layer components {\n  /* Indian tricolor gradient */\n  .gradient-tricolor {\n    background: linear-gradient(135deg, \n      hsl(24, 100%, 58%) 0%, \n      hsl(0, 0%, 100%) 50%, \n      hsl(120, 60%, 34%) 100%\n    );\n  }\n  \n  /* Saffron to forest gradient */\n  .gradient-indian {\n    background: linear-gradient(135deg, \n      hsl(24, 100%, 58%) 0%, \n      hsl(120, 60%, 34%) 100%\n    );\n  }\n  \n  /* Golden accent gradient */\n  .gradient-golden {\n    background: linear-gradient(135deg, \n      hsl(24, 100%, 58%) 0%, \n      hsl(51, 100%, 50%) 100%\n    );\n  }\n  \n  /* Achievement glow effect */\n  .achievement-glow {\n    box-shadow: 0 0 20px hsl(51, 100%, 50%, 0.3);\n    animation: pulse-golden 2s ease-in-out infinite alternate;\n  }\n  \n  /* Gamification elements */\n  .progress-bar-indian {\n    background: linear-gradient(90deg, \n      hsl(120, 60%, 34%) 0%, \n      hsl(24, 100%, 58%) 100%\n    );\n  }\n  \n  /* Card hover effects */\n  .card-hover {\n    transition: all 0.3s ease;\n  }\n  \n  .card-hover:hover {\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n  }\n  \n  /* User avatar gradients */\n  .avatar-gradient-1 {\n    background: linear-gradient(135deg, hsl(210, 100%, 56%) 0%, hsl(280, 100%, 70%) 100%);\n  }\n  \n  .avatar-gradient-2 {\n    background: linear-gradient(135deg, hsl(120, 60%, 34%) 0%, hsl(24, 100%, 58%) 100%);\n  }\n  \n  .avatar-gradient-3 {\n    background: linear-gradient(135deg, hsl(280, 100%, 70%) 0%, hsl(320, 100%, 74%) 100%);\n  }\n  \n  .avatar-gradient-4 {\n    background: linear-gradient(135deg, hsl(24, 100%, 58%) 0%, hsl(51, 100%, 50%) 100%);\n  }\n  \n  .avatar-gradient-5 {\n    background: linear-gradient(135deg, hsl(210, 100%, 20%) 0%, hsl(120, 60%, 34%) 100%);\n  }\n  \n  /* Mobile bottom navigation */\n  .mobile-nav-shadow {\n    box-shadow: 0 -4px 6px -1px hsl(0, 0%, 0%, 0.1);\n  }\n  \n  /* Trending tags */\n  .trending-tag {\n    background: linear-gradient(135deg, \n      hsl(120, 60%, 34%) 0%, \n      hsl(24, 100%, 58%) 100%\n    );\n    color: white;\n    font-weight: 500;\n  }\n  \n  /* Interactive elements */\n  .interactive-bounce {\n    transition: transform 0.2s ease;\n  }\n  \n  .interactive-bounce:active {\n    transform: scale(0.95);\n  }\n  \n  /* Notification styles */\n  .notification-slide {\n    animation: slideInRight 0.3s ease-out;\n  }\n  \n  /* Loading animations */\n  .loading-pulse {\n    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n  \n  /* Success states */\n  .success-checkmark {\n    color: hsl(120, 60%, 34%);\n    animation: checkmark-pop 0.3s ease-out;\n  }\n}\n\n@layer utilities {\n  /* Text colors with Indian theme */\n  .text-saffron {\n    color: hsl(24, 100%, 58%);\n  }\n  \n  .text-forest-green {\n    color: hsl(120, 60%, 34%);\n  }\n  \n  .text-royal-blue {\n    color: hsl(210, 100%, 20%);\n  }\n  \n  .text-golden {\n    color: hsl(51, 100%, 50%);\n  }\n  \n  /* Background colors */\n  .bg-saffron {\n    background-color: hsl(24, 100%, 58%);\n  }\n  \n  .bg-forest-green {\n    background-color: hsl(120, 60%, 34%);\n  }\n  \n  .bg-royal-blue {\n    background-color: hsl(210, 100%, 20%);\n  }\n  \n  .bg-golden {\n    background-color: hsl(51, 100%, 50%);\n  }\n  \n  .bg-warm-gray {\n    background-color: hsl(0, 0%, 96%);\n  }\n  \n  /* Border colors */\n  .border-saffron {\n    border-color: hsl(24, 100%, 58%);\n  }\n  \n  .border-forest-green {\n    border-color: hsl(120, 60%, 34%);\n  }\n  \n  .border-royal-blue {\n    border-color: hsl(210, 100%, 20%);\n  }\n  \n  .border-golden {\n    border-color: hsl(51, 100%, 50%);\n  }\n  \n  /* Custom shadows */\n  .shadow-saffron {\n    box-shadow: 0 4px 6px -1px hsl(24, 100%, 58%, 0.1), 0 2px 4px -2px hsl(24, 100%, 58%, 0.1);\n  }\n  \n  .shadow-forest {\n    box-shadow: 0 4px 6px -1px hsl(120, 60%, 34%, 0.1), 0 2px 4px -2px hsl(120, 60%, 34%, 0.1);\n  }\n  \n  /* Responsive text sizes */\n  .text-responsive-xs {\n    font-size: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem);\n  }\n  \n  .text-responsive-sm {\n    font-size: clamp(0.875rem, 0.8rem + 0.3vw, 1rem);\n  }\n  \n  .text-responsive-base {\n    font-size: clamp(1rem, 0.9rem + 0.4vw, 1.125rem);\n  }\n  \n  .text-responsive-lg {\n    font-size: clamp(1.125rem, 1rem + 0.5vw, 1.5rem);\n  }\n  \n  .text-responsive-xl {\n    font-size: clamp(1.25rem, 1.1rem + 0.6vw, 1.875rem);\n  }\n  \n  .text-responsive-2xl {\n    font-size: clamp(1.5rem, 1.3rem + 0.8vw, 2.25rem);\n  }\n  \n  .text-responsive-3xl {\n    font-size: clamp(1.875rem, 1.6rem + 1vw, 3rem);\n  }\n}\n\n/* Animations */\n@keyframes pulse-golden {\n  0% {\n    box-shadow: 0 0 20px hsl(51, 100%, 50%, 0.3);\n  }\n  100% {\n    box-shadow: 0 0 30px hsl(51, 100%, 50%, 0.6);\n  }\n}\n\n@keyframes slideInRight {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@keyframes checkmark-pop {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n@keyframes bounce-in {\n  0% {\n    transform: scale(0.8);\n    opacity: 0;\n  }\n  60% {\n    transform: scale(1.05);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n/* Mobile optimizations */\n@media (max-width: 768px) {\n  .mobile-padding {\n    padding-bottom: 5rem; /* Account for bottom navigation */\n  }\n  \n  .mobile-card {\n    margin: 0.5rem;\n    border-radius: 0.75rem;\n  }\n  \n  /* Touch targets */\n  .touch-target {\n    min-height: 44px;\n    min-width: 44px;\n  }\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n  :root {\n    --border: hsl(0, 0%, 20%);\n    --ring: hsl(0, 0%, 0%);\n  }\n  \n  .dark {\n    --border: hsl(0, 0%, 80%);\n    --ring: hsl(0, 0%, 100%);\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Focus improvements */\n.focus-visible:focus-visible {\n  outline: 2px solid hsl(24, 100%, 58%);\n  outline-offset: 2px;\n}\n\n/* Print styles */\n@media print {\n  .no-print {\n    display: none !important;\n  }\n  \n  body {\n    color: black !important;\n    background: white !important;\n  }\n}\n","size_bytes":10762},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/EnhancedLeaderboard.tsx":{"content":"import { useState } from 'react';\nimport { Trophy, Medal, Award, Crown, Calendar, Users, TrendingUp } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useQuery } from '@tanstack/react-query';\nimport { cn } from '@/lib/utils';\n\ninterface EnhancedLeaderboardProps {\n  className?: string;\n}\n\nexport function EnhancedLeaderboard({ className }: EnhancedLeaderboardProps) {\n  const [period, setPeriod] = useState<'weekly' | 'monthly' | 'alltime'>('weekly');\n\n  const { data: weeklyLeaderboard = [], isLoading: weeklyLoading } = useQuery({\n    queryKey: ['/api/leaderboard/weekly'],\n    enabled: period === 'weekly'\n  });\n\n  const { data: monthlyLeaderboard = [], isLoading: monthlyLoading } = useQuery({\n    queryKey: ['/api/leaderboard/monthly'],\n    enabled: period === 'monthly'\n  });\n\n  const { data: allTimeLeaderboard = [], isLoading: allTimeLoading } = useQuery({\n    queryKey: ['/api/leaderboard'],\n    enabled: period === 'alltime'\n  });\n\n  const getCurrentLeaderboard = () => {\n    switch (period) {\n      case 'weekly': return weeklyLeaderboard;\n      case 'monthly': return monthlyLeaderboard;\n      default: return allTimeLeaderboard;\n    }\n  };\n\n  const getCurrentLoading = () => {\n    switch (period) {\n      case 'weekly': return weeklyLoading;\n      case 'monthly': return monthlyLoading;\n      default: return allTimeLoading;\n    }\n  };\n\n  const getRankIcon = (rank: number) => {\n    switch (rank) {\n      case 1: return <Crown className=\"w-5 h-5 text-yellow-500\" />;\n      case 2: return <Medal className=\"w-5 h-5 text-gray-400\" />;\n      case 3: return <Award className=\"w-5 h-5 text-orange-600\" />;\n      default: return <div className=\"w-6 h-6 rounded-full bg-muted flex items-center justify-center text-xs font-bold\">{rank}</div>;\n    }\n  };\n\n  const getRankBadge = (rank: number) => {\n    if (rank === 1) return <Badge className=\"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\">Champion</Badge>;\n    if (rank === 2) return <Badge className=\"bg-gray-100 text-gray-800 hover:bg-gray-100\">Runner-up</Badge>;\n    if (rank === 3) return <Badge className=\"bg-orange-100 text-orange-800 hover:bg-orange-100\">Third Place</Badge>;\n    if (rank <= 10) return <Badge variant=\"secondary\">Top 10</Badge>;\n    return null;\n  };\n\n  const leaderboard = getCurrentLeaderboard();\n  const isLoading = getCurrentLoading();\n\n  return (\n    <Card className={className}>\n      <CardHeader className=\"pb-4\">\n        <CardTitle className=\"text-xl font-bold flex items-center gap-2\">\n          <Trophy className=\"w-6 h-6 text-yellow-600\" />\n          Leaderboard\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <Tabs value={period} onValueChange={(value) => setPeriod(value as any)} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 mb-6\">\n            <TabsTrigger value=\"weekly\" className=\"flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4\" />\n              Weekly\n            </TabsTrigger>\n            <TabsTrigger value=\"monthly\" className=\"flex items-center gap-2\">\n              <TrendingUp className=\"w-4 h-4\" />\n              Monthly\n            </TabsTrigger>\n            <TabsTrigger value=\"alltime\" className=\"flex items-center gap-2\">\n              <Users className=\"w-4 h-4\" />\n              All Time\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value={period} className=\"mt-0\">\n            {isLoading ? (\n              <div className=\"space-y-3\">\n                {[...Array(10)].map((_, i) => (\n                  <div key={i} className=\"animate-pulse\">\n                    <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50\">\n                      <div className=\"w-8 h-8 bg-gray-300 rounded-full\"></div>\n                      <div className=\"flex-1\">\n                        <div className=\"h-4 bg-gray-300 rounded w-24 mb-2\"></div>\n                        <div className=\"h-3 bg-gray-200 rounded w-16\"></div>\n                      </div>\n                      <div className=\"w-12 h-6 bg-gray-300 rounded\"></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {leaderboard.map((user: any, index: number) => {\n                  const rank = index + 1;\n                  const isTopThree = rank <= 3;\n                  \n                  return (\n                    <div\n                      key={user.id || user.user?.id}\n                      className={cn(\n                        \"flex items-center gap-3 p-4 rounded-lg transition-all duration-200 hover:shadow-md\",\n                        isTopThree \n                          ? \"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-950 dark:to-orange-950 border-2 border-yellow-200 dark:border-yellow-800\" \n                          : \"bg-muted/30 hover:bg-muted/50\"\n                      )}\n                    >\n                      <div className=\"flex items-center justify-center min-w-[2rem]\">\n                        {getRankIcon(rank)}\n                      </div>\n                      \n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className={cn(\n                            \"font-semibold truncate\",\n                            isTopThree ? \"text-lg\" : \"text-base\"\n                          )}>\n                            @{user.handle || user.user?.handle || 'Anonymous'}\n                          </span>\n                          {getRankBadge(rank)}\n                        </div>\n                        \n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                          <div className=\"flex items-center gap-1\">\n                            <Trophy className=\"w-3 h-3\" />\n                            <span>{user.points || 0} points</span>\n                          </div>\n                          {user.switches && (\n                            <div className=\"flex items-center gap-1\">\n                              <TrendingUp className=\"w-3 h-3\" />\n                              <span>{user.switches} switches</span>\n                            </div>\n                          )}\n                          <div className=\"flex items-center gap-1\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              Level {Math.floor((user.points || 0) / 100) + 1}\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"text-right\">\n                        <div className={cn(\n                          \"font-bold\",\n                          isTopThree ? \"text-xl text-yellow-700 dark:text-yellow-400\" : \"text-lg\"\n                        )}>\n                          {user.points || 0}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">points</div>\n                      </div>\n                    </div>\n                  );\n                })}\n                \n                {leaderboard.length === 0 && (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Trophy className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                    <p>No leaderboard data available for this period</p>\n                    <p className=\"text-sm mt-2\">Start making switches to see rankings!</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n\n        {/* Progress towards next level */}\n        {leaderboard.length > 0 && (\n          <div className=\"mt-6 p-4 rounded-lg bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950 dark:to-blue-950 border\">\n            <div className=\"text-sm font-medium mb-2\">Your Progress</div>\n            <div className=\"text-xs text-muted-foreground mb-2\">\n              Keep switching to climb the ranks and unlock new achievements!\n            </div>\n            <Button size=\"sm\" variant=\"outline\" className=\"w-full\">\n              Log Your Next Switch\n            </Button>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":8551},"client/src/components/Leaderboard.tsx":{"content":"import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Crown, Trophy } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\n\nexport function Leaderboard() {\n  const { data: leaderboardData, isLoading } = useQuery({\n    queryKey: ['/api/leaderboard'],\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <Trophy className=\"text-yellow-500 mr-2 h-5 w-5\" />\n              <span>Leaderboard</span>\n            </div>\n            <Skeleton className=\"h-8 w-24\" />\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {Array.from({ length: 5 }).map((_, i) => (\n              <div key={i} className=\"flex items-center space-x-3 p-3\">\n                <Skeleton className=\"w-8 h-8 rounded-full\" />\n                <div className=\"flex-1\">\n                  <Skeleton className=\"h-4 w-20\" />\n                  <Skeleton className=\"h-3 w-32 mt-1\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const leaderboard = leaderboardData?.leaderboard || [];\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <Trophy className=\"text-yellow-500 mr-2 h-5 w-5\" />\n            <span>Leaderboard</span>\n          </div>\n          <Select defaultValue=\"week\">\n            <SelectTrigger className=\"w-24 h-8 text-sm\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"week\">This Week</SelectItem>\n              <SelectItem value=\"month\">This Month</SelectItem>\n              <SelectItem value=\"all\">All Time</SelectItem>\n            </SelectContent>\n          </Select>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {leaderboard.map((user: any, index: number) => {\n            const position = index + 1;\n            const isTop3 = position <= 3;\n            const userInitials = user.handle.substring(0, 2).toUpperCase();\n\n            return (\n              <div\n                key={user.id}\n                className={`flex items-center space-x-3 p-3 rounded-lg transition-colors ${\n                  position === 1\n                    ? 'bg-gradient-to-r from-yellow-50 to-orange-50'\n                    : isTop3\n                    ? 'bg-gray-50'\n                    : 'hover:bg-gray-50'\n                }`}\n              >\n                <div\n                  className={`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${\n                    position === 1\n                      ? 'bg-yellow-500'\n                      : position === 2\n                      ? 'bg-gray-400'\n                      : position === 3\n                      ? 'bg-orange-400'\n                      : 'bg-gray-300 text-gray-600'\n                  }`}\n                >\n                  {position}\n                </div>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-2\">\n                    <p className=\"font-medium text-gray-900\">{user.handle}</p>\n                    {position === 1 && <Crown className=\"h-4 w-4 text-yellow-500\" />}\n                    {user.level >= 7 && (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        Elite\n                      </Badge>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-gray-500\">\n                    {user.points} points â€¢ {user.switchCount} switches\n                  </p>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"mt-4 text-center\">\n          <button className=\"text-orange-500 font-medium text-sm hover:text-blue-900 transition-colors\">\n            View Full Leaderboard <i className=\"fas fa-arrow-right ml-1\" />\n          </button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4544},"client/src/components/Navigation.tsx":{"content":"import React from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Bell, ChevronDown, Zap } from \"lucide-react\";\n\nexport function Navigation() {\n  const { user, logout } = useAuth();\n  const [location] = useLocation();\n\n  const navItems = [\n    { path: \"/\", label: \"Home\", icon: \"home\" },\n    // { path: '/dashboard', label: 'Dashboard', icon: 'dashboard' },\n    { path: \"/news\", label: \"News\", icon: \"newspaper\" },\n    { path: \"/missions\", label: \"Missions\", icon: \"target\" },\n    // { path: '/log-switch', label: 'Log Switch', icon: 'exchange-alt' },\n    // { path: '/leaderboard', label: 'Leaderboard', icon: 'trophy' },\n    // { path: '/community', label: 'Community', icon: 'users' },\n  ];\n\n  return (\n    <nav className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo */}\n          <Link href=\"/\">\n            <div className=\"flex items-center cursor-pointer\">\n              <div className=\"bg-gradient-to-r from-orange-500 to-yellow-500 p-2 rounded-lg\">\n                <Zap className=\"text-white h-6 w-6\" />\n              </div>\n              <span className=\"ml-3 text-2xl font-bold text-blue-900\">\n                JumboJolt\n              </span>\n            </div>\n          </Link>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden md:flex space-x-8\">\n            {navItems.map((item) => (\n              <Link key={item.path} href={item.path}>\n                <span\n                  className={`font-medium transition-colors cursor-pointer ${\n                    location === item.path\n                      ? \"text-blue-900\"\n                      : \"text-gray-500 hover:text-blue-900\"\n                  }`}\n                >\n                  {item.label}\n                </span>\n              </Link>\n            ))}\n          </div>\n\n          {/* User Menu */}\n          {user && (\n            <div className=\"flex items-center space-x-4\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"relative\">\n                <Bell className=\"h-5 w-5\" />\n                <span className=\"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                  3\n                </span>\n              </Button>\n\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    className=\"flex items-center space-x-2\"\n                  >\n                    <div className=\"bg-gradient-to-r from-green-500 to-orange-500 p-2 rounded-full\">\n                      <span className=\"text-white font-bold text-sm\">\n                        {user.handle.substring(0, 2).toUpperCase()}\n                      </span>\n                    </div>\n                    <span className=\"hidden md:block text-sm font-medium text-gray-700\">\n                      {user.handle}\n                    </span>\n                    <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <Link href=\"/profile\">\n                    <DropdownMenuItem>Profile</DropdownMenuItem>\n                  </Link>\n                  <Link href=\"/settings\">\n                    <DropdownMenuItem>Settings</DropdownMenuItem>\n                  </Link>\n                  {user.role === \"ADMIN\" && (\n                    <Link href=\"/admin\">\n                      <DropdownMenuItem>Admin Panel</DropdownMenuItem>\n                    </Link>\n                  )}\n                  <DropdownMenuItem onClick={logout}>Logout</DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Mobile Bottom Navigation */}\n      <div className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50\">\n        <div className=\"grid grid-cols-5 py-2\">\n          {navItems.map((item) => (\n            <Link key={item.path} href={item.path}>\n              <div\n                className={`flex flex-col items-center py-2 transition-colors cursor-pointer ${\n                  location === item.path ? \"text-orange-500\" : \"text-gray-400\"\n                }`}\n              >\n                <i className={`fas fa-${item.icon} text-xl mb-1`} />\n                <span className=\"text-xs font-medium\">{item.label}</span>\n              </div>\n            </Link>\n          ))}\n          <Link href=\"/profile\">\n            <div className=\"flex flex-col items-center py-2 text-gray-400 cursor-pointer\">\n              <i className=\"fas fa-user text-xl mb-1\" />\n              <span className=\"text-xs font-medium\">Profile</span>\n            </div>\n          </Link>\n        </div>\n      </div>\n    </nav>\n  );\n}\n","size_bytes":5186},"client/src/components/ReactionBar.tsx":{"content":"import { useState } from 'react';\nimport { Heart, Flame, Star, ThumbsUp, Smile } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport { useAuth } from '@/context/AuthContext';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\n\nconst reactionTypes = [\n  { type: 'like', icon: ThumbsUp, label: 'Like', color: 'text-blue-500' },\n  { type: 'love', icon: Heart, label: 'Love', color: 'text-red-500' },\n  { type: 'fire', icon: Flame, label: 'Fire', color: 'text-orange-500' },\n  { type: 'star', icon: Star, label: 'Star', color: 'text-yellow-500' },\n  { type: 'celebrate', icon: Smile, label: 'Celebrate', color: 'text-green-500' }\n];\n\ninterface ReactionBarProps {\n  postId: string;\n  className?: string;\n}\n\nexport function ReactionBar({ postId, className }: ReactionBarProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [showReactions, setShowReactions] = useState(false);\n\n  // Get reaction counts for this post\n  const { data: reactions = [] } = useQuery({\n    queryKey: ['/api/posts', postId, 'reactions'],\n    enabled: !!postId\n  });\n\n  // Add reaction mutation\n  const addReactionMutation = useMutation({\n    mutationFn: async ({ type }: { type: string }) => {\n      if (!user) throw new Error('Not authenticated');\n      const response = await fetch(`/api/posts/${postId}/reactions`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ type, userId: user.uid })\n      });\n      if (!response.ok) throw new Error('Failed to add reaction');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/posts', postId, 'reactions'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/posts'] });\n    }\n  });\n\n  const handleReaction = (type: string) => {\n    if (!user) return;\n    addReactionMutation.mutate({ type });\n    setShowReactions(false);\n  };\n\n  const getTotalReactions = () => {\n    return reactions.reduce((total: number, r: any) => total + r.count, 0);\n  };\n\n  const getTopReaction = () => {\n    if (reactions.length === 0) return null;\n    return reactions.reduce((top: any, current: any) => \n      current.count > (top?.count || 0) ? current : top\n    );\n  };\n\n  const topReaction = getTopReaction();\n  const TopIcon = topReaction ? reactionTypes.find(r => r.type === topReaction.type)?.icon : ThumbsUp;\n\n  return (\n    <div className={cn(\"flex items-center gap-2\", className)}>\n      <div className=\"relative\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setShowReactions(!showReactions)}\n          className=\"h-8 px-2 text-muted-foreground hover:text-foreground\"\n          disabled={!user}\n        >\n          {TopIcon && <TopIcon className=\"w-4 h-4 mr-1\" />}\n          <span className=\"text-sm\">{getTotalReactions()}</span>\n        </Button>\n\n        {showReactions && user && (\n          <div className=\"absolute bottom-full left-0 mb-2 bg-background border rounded-lg shadow-lg p-2 flex gap-1 z-10\">\n            {reactionTypes.map(({ type, icon: Icon, label, color }) => (\n              <Button\n                key={type}\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => handleReaction(type)}\n                className={cn(\"h-10 w-10 p-0 hover:bg-muted\", color)}\n                title={label}\n              >\n                <Icon className=\"w-5 h-5\" />\n              </Button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {reactions.length > 0 && (\n        <div className=\"flex gap-1 text-xs text-muted-foreground\">\n          {reactions.slice(0, 3).map((reaction: any) => {\n            const reactionType = reactionTypes.find(r => r.type === reaction.type);\n            if (!reactionType) return null;\n            const Icon = reactionType.icon;\n            return (\n              <div key={reaction.type} className=\"flex items-center gap-1\">\n                <Icon className={cn(\"w-3 h-3\", reactionType.color)} />\n                <span>{reaction.count}</span>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":4218},"client/src/components/SocialFeed.tsx":{"content":"import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { SwitchPost } from './SwitchPost';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { useAuth } from '@/context/AuthContext';\n\nexport function SocialFeed() {\n  const { user } = useAuth();\n  const { data: feedData, isLoading } = useQuery({\n    queryKey: ['/api/feed'],\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        {Array.from({ length: 3 }).map((_, i) => (\n          <Card key={i}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <Skeleton className=\"h-10 w-10 rounded-full\" />\n                <div>\n                  <Skeleton className=\"h-4 w-20\" />\n                  <Skeleton className=\"h-3 w-16 mt-1\" />\n                </div>\n              </div>\n              <Skeleton className=\"h-4 w-full mb-2\" />\n              <Skeleton className=\"h-32 w-full mb-4\" />\n              <div className=\"flex space-x-4\">\n                <Skeleton className=\"h-4 w-12\" />\n                <Skeleton className=\"h-4 w-12\" />\n                <Skeleton className=\"h-4 w-12\" />\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  const posts = feedData?.posts || [];\n\n  return (\n    <div className=\"space-y-6\">\n      {posts.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"text-gray-500\">\n              <i className=\"fas fa-comments text-4xl mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No posts yet</h3>\n              <p>Be the first to share a product switch!</p>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        posts.map((post: any) => (\n          <SwitchPost key={post.post.id} post={post} />\n        ))\n      )}\n    </div>\n  );\n}\n","size_bytes":2019},"client/src/components/SwitchPost.tsx":{"content":"import React, { useState } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Heart, MessageCircle, Share2, ArrowRight, Coins } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { formatDistanceToNow } from 'date-fns';\n\ninterface SwitchPostProps {\n  post: {\n    post: {\n      id: string;\n      content: string;\n      likesCount: number;\n      commentsCount: number;\n      sharesCount: number;\n      createdAt: string;\n    };\n    user: {\n      id: string;\n      handle: string;\n      level: number;\n      points: number;\n    };\n    switchLog: {\n      reason: string;\n      points: number;\n    };\n    fromBrand: {\n      name: string;\n      country: string;\n      isIndian: boolean;\n    };\n    toBrand: {\n      name: string;\n      country: string;\n      isIndian: boolean;\n    };\n  };\n}\n\nexport function SwitchPost({ post }: SwitchPostProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [liked, setLiked] = useState(false);\n\n  const likeMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest('POST', `/api/posts/${post.post.id}/like`, {\n        userId: user?.id\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      setLiked(data.liked);\n      queryClient.invalidateQueries({ queryKey: ['/api/feed'] });\n    }\n  });\n\n  const handleLike = () => {\n    if (user) {\n      likeMutation.mutate();\n    }\n  };\n\n  const userHandle = post.user.handle || 'Anonymous';\n  const userInitials = userHandle.substring(0, 2).toUpperCase();\n  const gradientClass = `bg-gradient-to-r from-${['blue', 'green', 'purple', 'pink', 'indigo'][userHandle.charCodeAt(0) % 5]}-500 to-${['purple', 'blue', 'pink', 'indigo', 'green'][userHandle.charCodeAt(1) % 5]}-500`;\n\n  return (\n    <Card className=\"bg-white shadow-sm overflow-hidden\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className={`${gradientClass} p-2 rounded-full`}>\n              <span className=\"text-white font-bold text-sm\">{userInitials}</span>\n            </div>\n            <div>\n              <p className=\"font-medium text-gray-900\">{userHandle}</p>\n              <p className=\"text-sm text-gray-500\">\n                {formatDistanceToNow(new Date(post.post.createdAt))} ago â€¢ Level {post.user.level}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {post.user.level >= 5 && (\n              <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                <i className=\"fas fa-star mr-1\" />\n                Top Switcher\n              </Badge>\n            )}\n          </div>\n        </div>\n\n        <div className=\"mb-4\">\n          <p className=\"text-gray-800 mb-3\">{post.post.content}</p>\n          \n          {/* Switch Details */}\n          {post.fromBrand && post.toBrand && (\n            <div className=\"bg-gradient-to-r from-red-50 to-green-50 border border-gray-200 rounded-lg p-4 mb-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-center\">\n                  <div className=\"text-red-500 mb-2\">\n                    <i className=\"fas fa-arrow-left text-xl\" />\n                  </div>\n                  <p className=\"text-sm font-medium text-gray-700\">From</p>\n                  <p className=\"font-bold text-gray-900\">{post.fromBrand.name}</p>\n                  <p className=\"text-xs text-gray-500\">\n                    {post.fromBrand.country} {!post.fromBrand.isIndian && 'ðŸŒ'}\n                  </p>\n                </div>\n                <div className=\"flex-1 flex justify-center\">\n                  <ArrowRight className=\"text-2xl text-orange-500\" />\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-green-600 mb-2\">\n                    <i className=\"fas fa-arrow-right text-xl\" />\n                  </div>\n                  <p className=\"text-sm font-medium text-gray-700\">To</p>\n                  <p className=\"font-bold text-gray-900\">{post.toBrand.name}</p>\n                  <p className=\"text-xs text-gray-500\">\n                    {post.toBrand.country} {post.toBrand.isIndian && 'ðŸ‡®ðŸ‡³'}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Sample product images */}\n        <img \n          src=\"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400\" \n          alt=\"Product comparison\" \n          className=\"w-full h-64 object-cover rounded-lg mb-4\" \n        />\n\n        {/* Interaction Bar */}\n        <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\n          <div className=\"flex items-center space-x-6\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleLike}\n              className={`flex items-center space-x-2 ${\n                liked ? 'text-orange-500' : 'text-gray-500'\n              } hover:text-orange-500 transition-colors`}\n            >\n              <Heart className={`h-4 w-4 ${liked ? 'fill-current' : ''}`} />\n              <span className=\"text-sm font-medium\">{post.post.likesCount}</span>\n            </Button>\n            \n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors\"\n            >\n              <MessageCircle className=\"h-4 w-4\" />\n              <span className=\"text-sm font-medium\">{post.post.commentsCount}</span>\n            </Button>\n            \n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"flex items-center space-x-2 text-gray-500 hover:text-green-600 transition-colors\"\n            >\n              <Share2 className=\"h-4 w-4\" />\n              <span className=\"text-sm font-medium\">{post.post.sharesCount}</span>\n            </Button>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-500\">+{post.switchLog?.points || 25} XP</span>\n            <Badge variant=\"outline\" className=\"bg-yellow-50 text-yellow-800 border-yellow-200\">\n              <Coins className=\"h-3 w-3 mr-1\" />\n              Rewarded\n            </Badge>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":6797},"client/src/components/TrendingContent.tsx":{"content":"import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { TrendingUp, Users, IndianRupee, Activity } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\n\nexport function TrendingContent() {\n  const { data: trendingData, isLoading } = useQuery({\n    queryKey: ['/api/trending'],\n    refetchInterval: 60000,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              <Skeleton className=\"h-6 w-48\" />\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <div key={i} className=\"border rounded-lg p-3\">\n                  <Skeleton className=\"h-4 w-24 mb-2\" />\n                  <Skeleton className=\"h-3 w-32 mb-2\" />\n                  <Skeleton className=\"h-2 w-full\" />\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const mockTrendingAlternatives = [\n    {\n      name: 'OnePlus Phones',\n      alternative: 'Alternative to iPhone',\n      switches: 15,\n      progress: 80,\n      color: 'bg-green-600'\n    },\n    {\n      name: 'MTR Foods',\n      alternative: 'Alternative to Maggi',\n      switches: 12,\n      progress: 65,\n      color: 'bg-green-600'\n    },\n    {\n      name: 'FabIndia',\n      alternative: 'Alternative to Zara',\n      switches: 8,\n      progress: 45,\n      color: 'bg-green-600'\n    }\n  ];\n\n  const mockCommunityStats = [\n    { label: 'Total Switches', value: '2,847', color: 'text-orange-500', bg: 'from-orange-50 to-yellow-50' },\n    { label: 'Money Redirected', value: 'â‚¹45.2L', color: 'text-green-600', bg: 'from-green-50 to-orange-50' },\n    { label: 'Active Members', value: '1,234', color: 'text-blue-900', bg: 'from-blue-50 to-green-50' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Trending Alternatives */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center text-gray-900\">\n            <TrendingUp className=\"text-orange-500 mr-2 h-5 w-5\" />\n            Trending Alternatives\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {mockTrendingAlternatives.map((item, index) => (\n              <div key={index} className=\"border border-gray-200 rounded-lg p-3\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <div>\n                    <p className=\"font-medium text-sm text-gray-900\">{item.name}</p>\n                    <p className=\"text-xs text-gray-500\">{item.alternative}</p>\n                  </div>\n                  <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">\n                    +{item.switches}\n                  </Badge>\n                </div>\n                <Progress value={item.progress} className=\"h-2\" />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Community Impact Stats */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center text-gray-900\">\n            <Users className=\"text-green-600 mr-2 h-5 w-5\" />\n            Community Impact\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 gap-4\">\n            {mockCommunityStats.map((stat, index) => (\n              <div key={index} className={`text-center p-4 bg-gradient-to-r ${stat.bg} rounded-lg`}>\n                <p className={`text-2xl font-bold ${stat.color}`}>{stat.value}</p>\n                <p className=\"text-sm text-gray-600\">{stat.label}</p>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4015},"client/src/components/TrendingSection.tsx":{"content":"import { TrendingUp, Package, Users, Star } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { useQuery } from '@tanstack/react-query';\nimport { cn } from '@/lib/utils';\n\nconst categoryColors = {\n  'Food & Beverages': 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',\n  'Electronics': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\n  'Fashion & Apparel': 'bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200',\n  'Home & Garden': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\n  'Health & Beauty': 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\n  'Automotive': 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200',\n  'Sports & Fitness': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',\n  'Education': 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200'\n};\n\ninterface TrendingSectionProps {\n  className?: string;\n}\n\nexport function TrendingSection({ className }: TrendingSectionProps) {\n  const { data: trendingBrands = [] } = useQuery({\n    queryKey: ['/api/brands/trending']\n  });\n\n  const { data: trendingCategories = [] } = useQuery({\n    queryKey: ['/api/categories/trending']\n  });\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Trending Categories */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <CardTitle className=\"text-lg font-semibold flex items-center gap-2\">\n            <TrendingUp className=\"w-5 h-5 text-orange-600\" />\n            Trending Categories\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 gap-3\">\n            {trendingCategories.slice(0, 6).map((category: any, index: number) => (\n              <div key={category.category} className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900\">\n                    <span className=\"text-sm font-bold text-orange-600\">#{index + 1}</span>\n                  </div>\n                  <div>\n                    <Badge \n                      variant=\"secondary\" \n                      className={categoryColors[category.category as keyof typeof categoryColors] || 'bg-gray-100 text-gray-800'}\n                    >\n                      {category.category}\n                    </Badge>\n                    <div className=\"text-xs text-muted-foreground mt-1\">\n                      {category.recentSwitches} switches in 24h\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-medium\">{category.switchCount}</div>\n                  <div className=\"text-xs text-muted-foreground\">this week</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Trending Brands */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <CardTitle className=\"text-lg font-semibold flex items-center gap-2\">\n            <Package className=\"w-5 h-5 text-green-600\" />\n            Popular Indian Brands\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 gap-3\">\n            {trendingBrands.slice(0, 5).map((brand: any, index: number) => (\n              <div key={brand.id} className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors\">\n                <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-green-100 dark:bg-green-900\">\n                  <span className=\"text-sm font-bold text-green-600\">#{index + 1}</span>\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"font-medium\">{brand.name}</div>\n                  {brand.logoUrl && (\n                    <div className=\"w-6 h-6 bg-gray-200 rounded mt-1\"></div>\n                  )}\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-medium flex items-center gap-1\">\n                    <Users className=\"w-3 h-3\" />\n                    {brand.switchesToCount}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">switches</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Weekly Highlights */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <CardTitle className=\"text-lg font-semibold flex items-center gap-2\">\n            <Star className=\"w-5 h-5 text-yellow-600\" />\n            Weekly Highlights\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"p-4 rounded-lg bg-gradient-to-r from-orange-50 to-green-50 dark:from-orange-950 dark:to-green-950 border\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-2\">\n                <TrendingUp className=\"w-4 h-4\" />\n                Most Active Category\n              </div>\n              <div className=\"font-semibold\">Food & Beverages</div>\n              <div className=\"text-sm text-muted-foreground\">847 switches this week</div>\n            </div>\n            \n            <div className=\"p-4 rounded-lg bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950 dark:to-blue-950 border\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-2\">\n                <Package className=\"w-4 h-4\" />\n                Rising Brand\n              </div>\n              <div className=\"font-semibold\">Patanjali</div>\n              <div className=\"text-sm text-muted-foreground\">+156% growth in switches</div>\n            </div>\n\n            <div className=\"p-4 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950 border\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-2\">\n                <Users className=\"w-4 h-4\" />\n                Community Growth\n              </div>\n              <div className=\"font-semibold\">1,247 new members</div>\n              <div className=\"text-sm text-muted-foreground\">joined this week</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":6617},"client/src/components/UserStats.tsx":{"content":"import React from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Trophy, Zap, Target, Star } from 'lucide-react';\nimport { Link } from 'wouter';\n\nexport function UserStats() {\n  const { user } = useAuth();\n\n  if (!user) {\n    return null;\n  }\n\n  const xpForNextLevel = user.level * 1000;\n  const currentXP = user.points % 1000;\n  const progressPercentage = (currentXP / xpForNextLevel) * 100;\n\n  const userInitials = user.handle.substring(0, 2).toUpperCase();\n\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"text-center\">\n          <div className=\"bg-gradient-to-r from-green-500 to-orange-500 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n            <span className=\"text-white font-bold text-xl\">{userInitials}</span>\n          </div>\n          \n          <h3 className=\"font-semibold text-gray-900 text-lg\">{user.handle}</h3>\n          <p className=\"text-sm text-gray-500 mb-4\">Level {user.level} Switcher</p>\n          \n          {/* Level Progress */}\n          <div className=\"mb-4\">\n            <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n              <span>Progress to Level {user.level + 1}</span>\n              <span>{currentXP}/{xpForNextLevel} XP</span>\n            </div>\n            <Progress value={progressPercentage} className=\"h-2\" />\n          </div>\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div>\n              <p className=\"text-2xl font-bold text-orange-500\">{user.points}</p>\n              <p className=\"text-xs text-gray-500\">Total Points</p>\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-green-600\">{Math.floor(user.points / 25)}</p>\n              <p className=\"text-xs text-gray-500\">Switches</p>\n            </div>\n          </div>\n\n          {/* Recent Achievement */}\n          <div className=\"mb-6\">\n            <h4 className=\"font-semibold text-gray-900 mb-3 text-sm\">Latest Achievement</h4>\n            <div className=\"flex items-center space-x-2 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg\">\n              <div className=\"w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center\">\n                <Trophy className=\"text-white h-4 w-4\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-xs font-medium text-gray-900\">Switch Streak</p>\n                <p className=\"text-xs text-gray-500\">5 switches in a row</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"space-y-3\">\n            <Link href=\"/log-switch\">\n              <Button className=\"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white font-medium transition-all\">\n                <Zap className=\"mr-2 h-4 w-4\" />\n                Log New Switch\n              </Button>\n            </Link>\n            \n            <Button variant=\"outline\" className=\"w-full text-gray-700 hover:bg-gray-50 transition-all\">\n              <Target className=\"mr-2 h-4 w-4\" />\n              Suggest Product\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3543},"client/src/context/AuthContext.tsx":{"content":"import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { auth } from '@/lib/firebase';\nimport { onAuthStateChanged, User as FirebaseUser } from 'firebase/auth';\nimport { apiRequest } from '@/lib/queryClient';\n\ninterface User {\n  id: string;\n  handle: string;\n  points: number;\n  level: number;\n  role?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  firebaseUser: FirebaseUser | null;\n  loading: boolean;\n  login: (firebaseUid: string) => Promise<User>;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [firebaseUser, setFirebaseUser] = useState<FirebaseUser | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setFirebaseUser(firebaseUser);\n      \n      if (firebaseUser) {\n        try {\n          const response = await apiRequest('POST', '/api/auth/login', {\n            firebaseUid: firebaseUser.uid\n          });\n          const data = await response.json();\n          setUser(data.user);\n        } catch (error) {\n          console.error('Auto-login failed:', error);\n          setUser(null);\n        }\n      } else {\n        setUser(null);\n      }\n      \n      setLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const login = async (firebaseUid: string): Promise<User> => {\n    const response = await apiRequest('POST', '/api/auth/login', { firebaseUid });\n    const data = await response.json();\n    setUser(data.user);\n    return data.user;\n  };\n\n  const logout = async () => {\n    await auth.signOut();\n    setUser(null);\n    setFirebaseUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, firebaseUser, loading, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","size_bytes":2178},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/firebase.ts":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: `${import.meta.env.VITE_FIREBASE_PROJECT_ID}.firebaseapp.com`,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: `${import.meta.env.VITE_FIREBASE_PROJECT_ID}.firebasestorage.app`,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\n","size_bytes":506},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/AdminPanel.tsx":{"content":"import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useLocation } from 'wouter';\nimport { apiRequest } from '@/lib/queryClient';\nimport { \n  Settings, \n  Users, \n  Target, \n  FileText, \n  TrendingUp,\n  CheckCircle,\n  XCircle,\n  Clock\n} from 'lucide-react';\n\nexport default function AdminPanel() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const queryClient = useQueryClient();\n\n  // Redirect if not admin\n  if (!user || user.role !== 'ADMIN') {\n    navigate('/');\n    return null;\n  }\n\n  const { data: suggestionsData, isLoading: suggestionsLoading } = useQuery({\n    queryKey: ['/api/admin/suggestions'],\n  });\n\n  const updateSuggestionMutation = useMutation({\n    mutationFn: async ({ id, updates }: { id: string; updates: any }) => {\n      const response = await apiRequest('PATCH', `/api/admin/suggestions/${id}`, updates);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/suggestions'] });\n    }\n  });\n\n  const handleApproveSuggestion = (id: string) => {\n    updateSuggestionMutation.mutate({\n      id,\n      updates: { status: 'APPROVED' }\n    });\n  };\n\n  const handleRejectSuggestion = (id: string) => {\n    updateSuggestionMutation.mutate({\n      id,\n      updates: { status: 'REJECTED' }\n    });\n  };\n\n  const suggestions = suggestionsData?.suggestions || [];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        \n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-blue-900 flex items-center\">\n            <Settings className=\"mr-3 h-8 w-8\" />\n            Admin Dashboard\n          </h1>\n          <p className=\"text-gray-600 mt-2\">Manage JumboJolt platform and community</p>\n        </div>\n\n        {/* Stats Overview */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <Users className=\"h-8 w-8 text-blue-600 mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold text-blue-900\">1,234</p>\n              <p className=\"text-sm text-gray-600\">Total Users</p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <Target className=\"h-8 w-8 text-green-600 mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold text-green-600\">2,847</p>\n              <p className=\"text-sm text-gray-600\">Total Switches</p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <Clock className=\"h-8 w-8 text-orange-500 mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold text-orange-500\">{suggestions.filter((s: any) => s.status === 'PENDING').length}</p>\n              <p className=\"text-sm text-gray-600\">Pending Reviews</p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <TrendingUp className=\"h-8 w-8 text-purple-600 mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold text-purple-600\">â‚¹45.2L</p>\n              <p className=\"text-sm text-gray-600\">Money Redirected</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Main Tabs */}\n        <Tabs defaultValue=\"suggestions\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"suggestions\">Target Suggestions</TabsTrigger>\n            <TabsTrigger value=\"news\">News Management</TabsTrigger>\n            <TabsTrigger value=\"users\">User Management</TabsTrigger>\n            <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          </TabsList>\n\n          {/* Target Suggestions */}\n          <TabsContent value=\"suggestions\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Product Switch Target Suggestions</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {suggestionsLoading ? (\n                  <div className=\"text-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto\"></div>\n                    <p className=\"text-gray-500 mt-2\">Loading suggestions...</p>\n                  </div>\n                ) : suggestions.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Target className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-500\">No suggestions to review</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {suggestions.map((suggestion: any) => (\n                      <div key={suggestion.id} className=\"border rounded-lg p-4\">\n                        <div className=\"flex items-start justify-between mb-3\">\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">\n                              {suggestion.fromBrandName} â†’ {suggestion.toBrandName || 'Alternative needed'}\n                            </h4>\n                            <p className=\"text-sm text-gray-500\">\n                              Category: {suggestion.category} â€¢ Submitted {new Date(suggestion.createdAt).toLocaleDateString()}\n                            </p>\n                          </div>\n                          <Badge variant={\n                            suggestion.status === 'PENDING' ? 'outline' :\n                            suggestion.status === 'APPROVED' ? 'default' :\n                            'destructive'\n                          }>\n                            {suggestion.status}\n                          </Badge>\n                        </div>\n                        \n                        {suggestion.rationale && (\n                          <div className=\"mb-3\">\n                            <p className=\"text-sm text-gray-700\">\n                              <strong>Rationale:</strong> {suggestion.rationale}\n                            </p>\n                          </div>\n                        )}\n\n                        {suggestion.status === 'PENDING' && (\n                          <div className=\"flex space-x-2\">\n                            <Button\n                              size=\"sm\"\n                              onClick={() => handleApproveSuggestion(suggestion.id)}\n                              disabled={updateSuggestionMutation.isPending}\n                              className=\"bg-green-600 hover:bg-green-700\"\n                            >\n                              <CheckCircle className=\"h-4 w-4 mr-1\" />\n                              Approve\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"destructive\"\n                              onClick={() => handleRejectSuggestion(suggestion.id)}\n                              disabled={updateSuggestionMutation.isPending}\n                            >\n                              <XCircle className=\"h-4 w-4 mr-1\" />\n                              Reject\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* News Management */}\n          <TabsContent value=\"news\">\n            <Card>\n              <CardHeader>\n                <CardTitle>News Feed Management</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  <div>\n                    <h4 className=\"font-medium text-gray-900 mb-3\">Add News Article</h4>\n                    <div className=\"space-y-4\">\n                      <Input placeholder=\"Article title\" />\n                      <Input placeholder=\"Source URL\" />\n                      <Textarea placeholder=\"AI-generated summary\" rows={4} />\n                      <div className=\"flex space-x-2\">\n                        <Button>Add to Review Queue</Button>\n                        <Button variant=\"outline\">Publish Immediately</Button>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"border-t pt-6\">\n                    <h4 className=\"font-medium text-gray-900 mb-3\">Pending News Items</h4>\n                    <p className=\"text-gray-500\">No pending news items to review</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* User Management */}\n          <TabsContent value=\"users\">\n            <Card>\n              <CardHeader>\n                <CardTitle>User Management</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  <div>\n                    <Input placeholder=\"Search users by handle or ID...\" className=\"max-w-md\" />\n                  </div>\n                  \n                  <div className=\"text-center py-8\">\n                    <Users className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-500\">User search and management interface</p>\n                    <p className=\"text-xs text-gray-400 mt-2\">Search for users to view profiles and manage roles</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Analytics */}\n          <TabsContent value=\"analytics\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Switch Trends</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n                    <p className=\"text-gray-500\">Chart: Switch trends over time</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Category Breakdown</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n                    <p className=\"text-gray-500\">Chart: Switches by category</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>User Growth</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n                    <p className=\"text-gray-500\">Chart: User registration over time</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Regional Impact</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n                    <p className=\"text-gray-500\">Map: Switches by Indian states</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","size_bytes":12104},"client/src/pages/EnhancedHome.tsx":{"content":"import React from 'react'\nimport { SocialFeed } from '@/components/SocialFeed'\nimport { EnhancedLeaderboard } from '@/components/EnhancedLeaderboard'\nimport { TrendingSection } from '@/components/TrendingSection'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { \n  TrendingUp, \n  Users, \n  Trophy, \n  Zap, \n  Target, \n  ArrowUpRight,\n  Star\n} from 'lucide-react'\nimport { useAuth } from '@/context/AuthContext'\nimport { Link } from 'wouter'\n\nexport default function EnhancedHome() {\n  const { user } = useAuth()\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Welcome Header */}\n        <div className=\"mb-8\">\n          <div className=\"text-center py-8 px-6 bg-gradient-to-r from-orange-500 to-green-600 rounded-2xl text-white shadow-xl\">\n            <h1 className=\"text-4xl font-bold mb-4\">\n              Welcome to JumboJolt!\n            </h1>\n            <p className=\"text-xl opacity-90 mb-6\">\n              Join India's largest community switching to quality Indian products\n            </p>\n            <div className=\"flex justify-center gap-4 flex-wrap\">\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white hover:bg-white/30\">\n                <Users className=\"w-4 h-4 mr-2\" />\n                25,847 Members\n              </Badge>\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white hover:bg-white/30\">\n                <TrendingUp className=\"w-4 h-4 mr-2\" />\n                156,392 Switches\n              </Badge>\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white hover:bg-white/30\">\n                <Target className=\"w-4 h-4 mr-2\" />\n                â‚¹2.1Cr Saved\n              </Badge>\n            </div>\n            {!user && (\n              <div className=\"mt-6\">\n                <Link href=\"/login\">\n                  <Button size=\"lg\" className=\"bg-white text-orange-600 hover:bg-gray-100 font-semibold\">\n                    Join the Movement\n                    <ArrowUpRight className=\"w-5 h-5 ml-2\" />\n                  </Button>\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Main Grid Layout */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content Area */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            {/* Quick Stats Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 border-blue-200 dark:border-blue-800\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">Today's Switches</p>\n                      <p className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">147</p>\n                    </div>\n                    <Zap className=\"w-8 h-8 text-blue-600\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 border-green-200 dark:border-green-800\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-green-700 dark:text-green-300\">Active Members</p>\n                      <p className=\"text-2xl font-bold text-green-900 dark:text-green-100\">1,247</p>\n                    </div>\n                    <Users className=\"w-8 h-8 text-green-600\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950 dark:to-yellow-900 border-yellow-200 dark:border-yellow-800\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-yellow-700 dark:text-yellow-300\">Top Streak</p>\n                      <p className=\"text-2xl font-bold text-yellow-900 dark:text-yellow-100\">42 days</p>\n                    </div>\n                    <Star className=\"w-8 h-8 text-yellow-600\" />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Social Feed Section */}\n            <Card>\n              <CardHeader className=\"pb-4\">\n                <CardTitle className=\"text-xl font-bold flex items-center gap-2\">\n                  <TrendingUp className=\"w-6 h-6 text-orange-600\" />\n                  Community Feed\n                </CardTitle>\n                <p className=\"text-muted-foreground\">\n                  See what fellow Indians are switching to today\n                </p>\n              </CardHeader>\n              <CardContent>\n                <SocialFeed />\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Enhanced Sidebar */}\n          <div className=\"lg:col-span-1 space-y-6\">\n            {/* Enhanced Leaderboard */}\n            <EnhancedLeaderboard />\n            \n            {/* Trending Section */}\n            <TrendingSection />\n\n            {/* Call to Action */}\n            {user && (\n              <Card className=\"bg-gradient-to-r from-orange-500 to-green-600 text-white border-0\">\n                <CardContent className=\"p-6 text-center\">\n                  <Trophy className=\"w-12 h-12 mx-auto mb-4 opacity-90\" />\n                  <h3 className=\"text-lg font-bold mb-2\">Ready for Your Next Switch?</h3>\n                  <p className=\"text-sm opacity-90 mb-4\">\n                    Log a new product switch and earn points towards your next level!\n                  </p>\n                  <Link href=\"/log-switch\">\n                    <Button className=\"bg-white text-orange-600 hover:bg-gray-100 font-semibold w-full\">\n                      Log New Switch\n                      <ArrowUpRight className=\"w-4 h-4 ml-2\" />\n                    </Button>\n                  </Link>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Community Goals */}\n            <Card>\n              <CardHeader className=\"pb-4\">\n                <CardTitle className=\"text-lg font-semibold flex items-center gap-2\">\n                  <Target className=\"w-5 h-5 text-green-600\" />\n                  Community Goals\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Monthly Target: 10,000 switches</span>\n                    <span className=\"font-medium\">7,542 / 10,000</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n                    <div className=\"bg-gradient-to-r from-orange-500 to-green-500 h-2 rounded-full\" style={{width: '75.42%'}}></div>\n                  </div>\n                </div>\n                \n                <div className=\"pt-4 border-t\">\n                  <div className=\"text-xs text-muted-foreground mb-2\">Next milestone:</div>\n                  <div className=\"text-sm font-medium\">ðŸŽ¯ Reach 8,000 switches to unlock community rewards!</div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":7898},"client/src/pages/EnhancedLogin.tsx":{"content":"import React, { useState } from 'react';\nimport { \n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  GoogleAuthProvider,\n  signInWithPopup\n} from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useLocation } from 'wouter';\nimport { Zap, Mail, Chrome, Shield, AlertCircle } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\nexport default function EnhancedLogin() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [isSignUp, setIsSignUp] = useState(false);\n  const { login } = useAuth();\n  const [, navigate] = useLocation();\n\n  const handleEmailAuth = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      let userCredential;\n      if (isSignUp) {\n        userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        userCredential = await signInWithEmailAndPassword(auth, email, password);\n      }\n      \n      const user = userCredential.user;\n      \n      // Try to login or redirect to registration\n      try {\n        await login(user.uid);\n        navigate('/');\n      } catch (error) {\n        // User not registered, redirect to registration\n        navigate('/register');\n      }\n    } catch (error: any) {\n      console.error('Email auth error:', error);\n      if (error.code === 'auth/user-not-found' && !isSignUp) {\n        setError('No account found. Please sign up first.');\n        setIsSignUp(true);\n      } else if (error.code === 'auth/email-already-in-use') {\n        setError('Account already exists. Please sign in.');\n        setIsSignUp(false);\n      } else if (error.code === 'auth/weak-password') {\n        setError('Password should be at least 6 characters.');\n      } else if (error.code === 'auth/invalid-email') {\n        setError('Please enter a valid email address.');\n      } else {\n        setError(error.message || 'Authentication failed');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleAuth = async () => {\n    setLoading(true);\n    setError('');\n\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      const user = result.user;\n      \n      // Try to login or redirect to registration\n      try {\n        await login(user.uid);\n        navigate('/');\n      } catch (error) {\n        // User not registered, redirect to registration\n        navigate('/register');\n      }\n    } catch (error: any) {\n      console.error('Google auth error:', error);\n      if (error.code === 'auth/popup-closed-by-user') {\n        setError('Sign-in cancelled');\n      } else {\n        setError(error.message || 'Google authentication failed');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <div className=\"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-gradient-to-r from-orange-500 to-green-600\">\n            <Zap className=\"h-10 w-10 text-white\" />\n          </div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Welcome to JumboJolt\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Join India's largest community switching to quality Indian products\n          </p>\n        </div>\n\n        <Card className=\"shadow-xl\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-center justify-center\">\n              <Shield className=\"h-5 w-5 text-orange-600\" />\n              Sign In to Continue\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {error && (\n              <Alert variant=\"destructive\" className=\"mb-4\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n\n            <Tabs defaultValue=\"email\" className=\"space-y-4\">\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"email\">\n                  <Mail className=\"h-4 w-4 mr-2\" />\n                  Email\n                </TabsTrigger>\n                <TabsTrigger value=\"google\">\n                  <Chrome className=\"h-4 w-4 mr-2\" />\n                  Google\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"email\" className=\"space-y-4\">\n                <form onSubmit={handleEmailAuth} className=\"space-y-4\">\n                  <div>\n                    <Label htmlFor=\"email\">Email Address</Label>\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      placeholder=\"your@email.com\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      required\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"password\">Password</Label>\n                    <Input\n                      id=\"password\"\n                      type=\"password\"\n                      placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      required\n                      className=\"mt-1\"\n                      minLength={6}\n                    />\n                  </div>\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full bg-gradient-to-r from-orange-500 to-green-600 hover:from-orange-600 hover:to-green-700\" \n                    disabled={loading}\n                  >\n                    {loading ? 'Processing...' : isSignUp ? 'Create Account' : 'Sign In'}\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    className=\"w-full\"\n                    onClick={() => {\n                      setIsSignUp(!isSignUp);\n                      setError('');\n                    }}\n                  >\n                    {isSignUp ? 'Already have an account? Sign In' : 'Need an account? Sign Up'}\n                  </Button>\n                </form>\n              </TabsContent>\n\n              <TabsContent value=\"google\" className=\"space-y-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"w-full h-12 text-lg\"\n                  onClick={handleGoogleAuth}\n                  disabled={loading}\n                >\n                  <Chrome className=\"h-5 w-5 mr-3\" />\n                  {loading ? 'Signing in...' : 'Continue with Google'}\n                </Button>\n                <p className=\"text-xs text-gray-500 text-center\">\n                  Quick and secure sign-in with your Google account\n                </p>\n              </TabsContent>\n            </Tabs>\n          </CardContent>\n        </Card>\n\n        <div className=\"text-center\">\n          <div className=\"flex items-center justify-center gap-2 text-gray-500 text-sm\">\n            <Shield className=\"h-4 w-4\" />\n            <span>Secure authentication powered by Firebase</span>\n          </div>\n        </div>\n\n        {/* Firebase Configuration Instructions */}\n        <Card className=\"bg-blue-50 border-blue-200\">\n          <CardContent className=\"p-4\">\n            <h3 className=\"font-semibold text-blue-900 mb-2\">Firebase Setup Required</h3>\n            <p className=\"text-sm text-blue-800\">\n              To enable authentication, please configure Firebase:\n              <br />\n              1. Go to Firebase Console â†’ Authentication â†’ Sign-in method\n              <br />\n              2. Enable \"Email/Password\" and \"Google\" providers\n              <br />\n              3. For Google: Add your domain to authorized domains\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":8670},"client/src/pages/OldHome.tsx":{"content":"import React from 'react';\nimport { SocialFeed } from '@/components/SocialFeed';\nimport { Leaderboard } from '@/components/Leaderboard';\nimport { UserStats } from '@/components/UserStats';\nimport { TrendingContent } from '@/components/TrendingContent';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useAuth } from '@/context/AuthContext';\nimport { Flame, Plus } from 'lucide-react';\nimport { Link } from 'wouter';\n\nexport default function Home() {\n  const { user } = useAuth();\n  \n\n  const trendingCategories = [\n    {\n      name: 'Food & Beverages',\n      switches: 142,\n      image: 'https://images.unsplash.com/photo-1596040033229-a9821ebd058d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100'\n    },\n    {\n      name: 'Electronics',\n      switches: 89,\n      image: 'https://images.unsplash.com/photo-1588508065123-287b28e013da?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100'\n    },\n    {\n      name: 'Fashion',\n      switches: 67,\n      image: 'https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100'\n    },\n    {\n      name: 'Beauty',\n      switches: 45,\n      image: 'https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100'\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n          \n          {/* Left Sidebar - Hidden on mobile */}\n          <div className=\"hidden lg:block lg:col-span-3\">\n            <UserStats />\n          </div>\n\n          {/* Main Content */}\n          <div className=\"lg:col-span-6\">\n            {/* Welcome Banner */}\n            <div className=\"bg-gradient-to-r from-orange-500 to-green-600 rounded-xl p-6 mb-6 text-white\">\n              <h2 className=\"text-2xl font-bold mb-2\">\n                Welcome back, {user?.handle}!\n              </h2>\n              <p className=\"opacity-90\">\n                You're making a difference. See what others are switching to today.\n              </p>\n            </div>\n\n            {/* Trending Categories */}\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"font-semibold text-gray-900\">Trending Categories</h3>\n                  <button className=\"text-orange-500 text-sm hover:text-blue-900 transition-colors\">\n                    See all\n                  </button>\n                </div>\n                \n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  {trendingCategories.map((category, index) => (\n                    <div\n                      key={index}\n                      className=\"text-center p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer\"\n                    >\n                      <img\n                        src={category.image}\n                        alt={category.name}\n                        className=\"w-16 h-16 rounded-lg mx-auto mb-2 object-cover\"\n                      />\n                      <p className=\"text-sm font-medium text-gray-900\">{category.name}</p>\n                      <p className=\"text-xs text-orange-500\">+{category.switches} switches</p>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Trending Header */}\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h2 className=\"text-xl font-bold text-gray-900 flex items-center\">\n                    <Flame className=\"text-orange-500 mr-2 h-6 w-6\" />\n                    Trending Switches\n                  </h2>\n                  <div className=\"flex space-x-2\">\n                    <Button size=\"sm\" className=\"bg-orange-500 hover:bg-orange-600 text-white\">\n                      Today\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\">Week</Button>\n                    <Button size=\"sm\" variant=\"outline\">Month</Button>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-wrap gap-2\">\n                  <span className=\"px-3 py-1 bg-gradient-to-r from-green-600 to-orange-500 text-white rounded-full text-sm font-medium\">\n                    #PhoneSwitch\n                  </span>\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\n                    #FoodChoice\n                  </span>\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\n                    #ClothingBrand\n                  </span>\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\n                    #TechGadgets\n                  </span>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Social Feed */}\n            <SocialFeed />\n\n            {/* Load More */}\n            <div className=\"text-center mt-8\">\n              <Button variant=\"outline\" className=\"hover:bg-gray-50\">\n                <i className=\"fas fa-refresh mr-2\" />\n                Load More Posts\n              </Button>\n            </div>\n          </div>\n\n          {/* Right Sidebar */}\n          <div className=\"lg:col-span-3\">\n            <Leaderboard />\n            <div className=\"mt-6\">\n              <TrendingContent />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile FAB */}\n      <div className=\"lg:hidden fixed bottom-20 right-4 z-40\">\n        <Link href=\"/log-switch\">\n          <Button\n            size=\"lg\"\n            className=\"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all p-4\"\n          >\n            <Plus className=\"h-6 w-6\" />\n          </Button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6188},"client/src/pages/LogSwitch.tsx":{"content":"import React, { useState } from 'react';\nimport { useMutation, useQueryClient, useQuery } from '@tanstack/react-query';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useLocation } from 'wouter';\nimport { apiRequest } from '@/lib/queryClient';\nimport { ArrowRight, Camera, Globe, Eye, EyeOff } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\nconst categories = [\n  { value: 'FOOD_BEVERAGES', label: 'Food & Beverages' },\n  { value: 'ELECTRONICS', label: 'Electronics' },\n  { value: 'FASHION', label: 'Fashion' },\n  { value: 'BEAUTY', label: 'Beauty' },\n  { value: 'HOME_GARDEN', label: 'Home & Garden' },\n  { value: 'AUTOMOTIVE', label: 'Automotive' },\n  { value: 'SPORTS', label: 'Sports' },\n  { value: 'BOOKS_MEDIA', label: 'Books & Media' },\n  { value: 'OTHER', label: 'Other' }\n];\n\nexport default function LogSwitch() {\n  const { user } = useAuth();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [formData, setFormData] = useState({\n    fromBrand: '',\n    toBrand: '',\n    category: '',\n    reason: '',\n    isPublic: false\n  });\n\n  const [fromBrandSearch, setFromBrandSearch] = useState('');\n  const [toBrandSearch, setToBrandSearch] = useState('');\n\n  // Search brands for autocomplete\n  const { data: fromBrandsData } = useQuery({\n    queryKey: ['/api/brands/search', { q: fromBrandSearch }],\n    enabled: fromBrandSearch.length > 2\n  });\n\n  const { data: toBrandsData } = useQuery({\n    queryKey: ['/api/brands/search', { q: toBrandSearch }],\n    enabled: toBrandSearch.length > 2\n  });\n\n  const createBrandMutation = useMutation({\n    mutationFn: async (brandData: any) => {\n      const response = await apiRequest('POST', '/api/brands', brandData);\n      return response.json();\n    }\n  });\n\n  const logSwitchMutation = useMutation({\n    mutationFn: async (switchData: any) => {\n      const response = await apiRequest('POST', '/api/switches', switchData);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Switch logged successfully!\",\n        description: `You earned 25 XP for making a switch${formData.isPublic ? ' and sharing it!' : '!'}`,\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/feed'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/leaderboard'] });\n      navigate('/');\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error logging switch\",\n        description: \"Please try again later.\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    try {\n      // Create brands if they don't exist\n      let fromBrandId = null;\n      let toBrandId = null;\n\n      // Create \"from\" brand\n      const fromBrandResult = await createBrandMutation.mutateAsync({\n        name: formData.fromBrand,\n        category: formData.category,\n        isIndian: false // Assume foreign brands are being switched from\n      });\n      fromBrandId = fromBrandResult.brand.id;\n\n      // Create \"to\" brand\n      const toBrandResult = await createBrandMutation.mutateAsync({\n        name: formData.toBrand,\n        category: formData.category,\n        isIndian: true // Assume Indian brands are being switched to\n      });\n      toBrandId = toBrandResult.brand.id;\n\n      // Log the switch\n      await logSwitchMutation.mutateAsync({\n        userId: user.id,\n        fromBrandId,\n        toBrandId,\n        category: formData.category,\n        reason: formData.reason,\n        isPublic: formData.isPublic,\n        points: 25\n      });\n\n    } catch (error) {\n      console.error('Error logging switch:', error);\n    }\n  };\n\n  if (!user) {\n    navigate('/login');\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-blue-900 mb-2\">Log Your Switch</h1>\n          <p className=\"text-gray-600\">Share your journey to Indian alternatives</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Product Switch Details</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              \n              {/* Brand Switch Visual */}\n              <div className=\"bg-gradient-to-r from-red-50 to-green-50 border-2 border-dashed border-gray-200 rounded-lg p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-center\">\n                  \n                  {/* From Brand */}\n                  <div className=\"text-center\">\n                    <Label className=\"text-red-600 font-medium\">Switching FROM</Label>\n                    <Input\n                      placeholder=\"e.g., Coca Cola\"\n                      value={formData.fromBrand}\n                      onChange={(e) => setFormData({ ...formData, fromBrand: e.target.value })}\n                      className=\"mt-2 border-red-200 focus:border-red-400\"\n                      required\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">Foreign/Non-preferred brand</p>\n                  </div>\n\n                  {/* Arrow */}\n                  <div className=\"flex justify-center\">\n                    <ArrowRight className=\"h-8 w-8 text-orange-500\" />\n                  </div>\n\n                  {/* To Brand */}\n                  <div className=\"text-center\">\n                    <Label className=\"text-green-600 font-medium\">Switching TO</Label>\n                    <Input\n                      placeholder=\"e.g., Thums Up\"\n                      value={formData.toBrand}\n                      onChange={(e) => setFormData({ ...formData, toBrand: e.target.value })}\n                      className=\"mt-2 border-green-200 focus:border-green-400\"\n                      required\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">Indian/Preferred brand</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Category */}\n              <div>\n                <Label>Product Category</Label>\n                <Select value={formData.category} onValueChange={(value) => setFormData({ ...formData, category: value })} required>\n                  <SelectTrigger className=\"mt-1\">\n                    <SelectValue placeholder=\"Select category\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {categories.map((cat) => (\n                      <SelectItem key={cat.value} value={cat.value}>\n                        {cat.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Reason */}\n              <div>\n                <Label>Why did you make this switch?</Label>\n                <Textarea\n                  placeholder=\"Share your experience... Quality? Price? Supporting local business? Taste? etc.\"\n                  value={formData.reason}\n                  onChange={(e) => setFormData({ ...formData, reason: e.target.value })}\n                  className=\"mt-1\"\n                  rows={4}\n                />\n              </div>\n\n              {/* Evidence Upload */}\n              <div>\n                <Label>Add Photo Evidence (Optional)</Label>\n                <div className=\"mt-1 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-orange-400 transition-colors cursor-pointer\">\n                  <Camera className=\"mx-auto h-8 w-8 text-gray-400\" />\n                  <p className=\"text-sm text-gray-600 mt-2\">\n                    Upload a photo of your new product or purchase receipt\n                  </p>\n                  <p className=\"text-xs text-gray-400\">JPG, PNG up to 5MB</p>\n                </div>\n              </div>\n\n              {/* Privacy Settings */}\n              <div className=\"bg-gray-50 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <Label className=\"text-base font-medium flex items-center\">\n                      {formData.isPublic ? <Globe className=\"h-4 w-4 mr-2\" /> : <EyeOff className=\"h-4 w-4 mr-2\" />}\n                      {formData.isPublic ? 'Public Switch' : 'Silent Strike'}\n                    </Label>\n                    <p className=\"text-sm text-gray-600 mt-1\">\n                      {formData.isPublic \n                        ? 'Share this switch with the community and earn extra points!'\n                        : 'Keep this switch private. Only contributes to anonymous stats.'\n                      }\n                    </p>\n                  </div>\n                  <Switch\n                    checked={formData.isPublic}\n                    onCheckedChange={(checked) => setFormData({ ...formData, isPublic: checked })}\n                  />\n                </div>\n                \n                {formData.isPublic && (\n                  <div className=\"mt-3 p-3 bg-orange-50 rounded-md border border-orange-200\">\n                    <p className=\"text-sm text-orange-800\">\n                      <i className=\"fas fa-star mr-1\" />\n                      Public switches earn bonus XP and help inspire others!\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Points Preview */}\n              <div className=\"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h4 className=\"font-medium text-orange-900\">Reward Preview</h4>\n                    <p className=\"text-sm text-orange-700\">\n                      Base: 25 XP {formData.isPublic && '+ 10 XP bonus for sharing'}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-2xl font-bold text-orange-600\">\n                      {formData.isPublic ? '35' : '25'} XP\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => navigate('/')}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  className=\"flex-1 bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600\"\n                  disabled={logSwitchMutation.isPending}\n                >\n                  {logSwitchMutation.isPending ? 'Logging Switch...' : 'Log My Switch'}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":11475},"client/src/pages/Login.tsx":{"content":"import React, { useState } from 'react';\nimport { \n  signInWithPhoneNumber, \n  RecaptchaVerifier, \n  ConfirmationResult,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  GoogleAuthProvider,\n  signInWithPopup\n} from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useLocation } from 'wouter';\nimport { Zap, Phone, Shield, Mail, Chrome } from 'lucide-react';\n\nexport default function Login() {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [verificationCode, setVerificationCode] = useState('');\n  const [confirmationResult, setConfirmationResult] = useState<ConfirmationResult | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [step, setStep] = useState<'phone' | 'verification'>('phone');\n  const [authMethod, setAuthMethod] = useState<'phone' | 'email' | 'google'>('email');\n  const [isSignUp, setIsSignUp] = useState(false);\n  const { login } = useAuth();\n  const [, navigate] = useLocation();\n\n  React.useEffect(() => {\n    // Initialize reCAPTCHA\n    if (!(window as any).recaptchaVerifier) {\n      (window as any).recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {\n        size: 'invisible',\n        callback: () => {\n          // reCAPTCHA solved\n        }\n      });\n    }\n  }, []);\n\n  const handleSendOTP = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const appVerifier = (window as any).recaptchaVerifier;\n      const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, appVerifier);\n      setConfirmationResult(confirmationResult);\n      setStep('verification');\n    } catch (error) {\n      console.error('Error sending OTP:', error);\n      alert('Phone authentication is not enabled in Firebase. Please use email login or contact admin.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEmailAuth = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      let userCredential;\n      if (isSignUp) {\n        userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        userCredential = await signInWithEmailAndPassword(auth, email, password);\n      }\n      \n      const user = userCredential.user;\n      \n      // Try to login or redirect to registration\n      try {\n        await login(user.uid);\n        navigate('/');\n      } catch (error) {\n        // User not registered, redirect to registration\n        navigate('/register');\n      }\n    } catch (error: any) {\n      console.error('Email auth error:', error);\n      if (error.code === 'auth/user-not-found' && !isSignUp) {\n        alert('No account found. Please sign up first.');\n        setIsSignUp(true);\n      } else if (error.code === 'auth/email-already-in-use') {\n        alert('Account already exists. Please sign in.');\n        setIsSignUp(false);\n      } else {\n        alert(error.message || 'Authentication failed');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleAuth = async () => {\n    setLoading(true);\n\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      const user = result.user;\n      \n      // Try to login or redirect to registration\n      try {\n        await login(user.uid);\n        navigate('/');\n      } catch (error) {\n        // User not registered, redirect to registration\n        navigate('/register');\n      }\n    } catch (error: any) {\n      console.error('Google auth error:', error);\n      alert(error.message || 'Google authentication failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVerifyCode = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      if (confirmationResult) {\n        const result = await confirmationResult.confirm(verificationCode);\n        const user = result.user;\n        \n        // Try to login or redirect to registration\n        try {\n          await login(user.uid);\n          navigate('/');\n        } catch (error) {\n          // User not registered, redirect to registration\n          navigate('/register');\n        }\n      }\n    } catch (error) {\n      console.error('Error verifying code:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        {/* Logo */}\n        <div className=\"text-center\">\n          <div className=\"bg-gradient-to-r from-orange-500 to-yellow-500 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n            <Zap className=\"text-white h-8 w-8\" />\n          </div>\n          <h2 className=\"text-3xl font-bold text-blue-900\">JumboJolt</h2>\n          <p className=\"mt-2 text-gray-600\">Switch to Indian alternatives with confidence</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-center\">\n              {step === 'phone' ? 'Sign in with Phone' : 'Enter Verification Code'}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {step === 'phone' ? (\n              <form onSubmit={handleSendOTP} className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"phone\">Phone Number</Label>\n                  <div className=\"mt-1 relative\">\n                    <Phone className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"phone\"\n                      type=\"tel\"\n                      placeholder=\"+91 9876543210\"\n                      value={phoneNumber}\n                      onChange={(e) => setPhoneNumber(e.target.value)}\n                      className=\"pl-10\"\n                      required\n                    />\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Include country code (e.g., +91 for India)\n                  </p>\n                </div>\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600\"\n                  disabled={loading}\n                >\n                  {loading ? 'Sending...' : 'Send OTP'}\n                </Button>\n              </form>\n            ) : (\n              <form onSubmit={handleVerifyCode} className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"code\">Verification Code</Label>\n                  <div className=\"mt-1 relative\">\n                    <Shield className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"code\"\n                      type=\"text\"\n                      placeholder=\"Enter 6-digit code\"\n                      value={verificationCode}\n                      onChange={(e) => setVerificationCode(e.target.value)}\n                      className=\"pl-10\"\n                      maxLength={6}\n                      required\n                    />\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Check your SMS for the verification code\n                  </p>\n                </div>\n\n                <Button\n                  type=\"submit\"\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600\"\n                  disabled={loading}\n                >\n                  {loading ? 'Verifying...' : 'Verify Code'}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => {\n                    setStep('phone');\n                    setVerificationCode('');\n                    setConfirmationResult(null);\n                  }}\n                  className=\"w-full\"\n                >\n                  Back to Phone Number\n                </Button>\n              </form>\n            )}\n\n            <div id=\"recaptcha-container\" />\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-gray-500\">\n                By signing in, you agree to our{' '}\n                <a href=\"#\" className=\"text-orange-500 hover:text-orange-600\">\n                  Terms of Service\n                </a>{' '}\n                and{' '}\n                <a href=\"#\" className=\"text-orange-500 hover:text-orange-600\">\n                  Privacy Policy\n                </a>\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9118},"client/src/pages/ModeratorPanel.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from '@/context/AuthContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport {\n  Shield, Flag, MessageSquare, User, CheckCircle, Clock, Eye,\n  Plus, Edit, Trash2, Users, Target, FileText, Award, Camera, \n  Upload, ThumbsUp, ThumbsDown, Menu, X, Home, Settings,\n  Newspaper, TrendingUp, Activity\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\n\n// Enhanced form schemas\nconst missionSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  description: z.string().min(1, 'Description is required'),\n  targetCategory: z.string().optional(),\n  fromBrandIds: z.array(z.string()).min(1, 'At least one source brand is required'),\n  toBrandIds: z.array(z.string()).min(1, 'At least one target brand is required'),\n  pointsReward: z.number().min(1, 'Points must be greater than 0'),\n  startDate: z.string(),\n  endDate: z.string(),\n  createdBy: z.string()\n});\n\nconst newsArticleSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  description: z.string().min(1, 'Description is required'),\n  imageUrls: z.array(z.string().url()).optional(),\n  suggestedFromBrandIds: z.array(z.string()).optional(),\n  suggestedToBrandIds: z.array(z.string()).optional(),\n  commentsEnabled: z.boolean().default(true),\n  isPublished: z.boolean().default(true),\n  createdBy: z.string()\n});\n\nconst feedbackQuestionSchema = z.object({\n  title: z.string().min(1, 'Title is required'),\n  description: z.string().optional(),\n  type: z.enum(['multiple_choice', 'text', 'rating']),\n  options: z.array(z.string()).optional(),\n  startDate: z.string(),\n  endDate: z.string(),\n  createdBy: z.string()\n});\n\nexport default function ModeratorPanel() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [activeSection, setActiveSection] = useState('overview');\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  // Data queries\n  const { data: pendingReports = [] } = useQuery({\n    queryKey: ['/api/moderation/reports', 'PENDING'],\n    enabled: !!user\n  });\n\n  const { data: pendingSwitchLogs = [] } = useQuery({\n    queryKey: ['/api/moderation/switch-logs/pending'],\n    enabled: !!user\n  });\n\n  const { data: missions = [] } = useQuery({\n    queryKey: ['/api/moderation/missions'],\n    enabled: !!user\n  });\n\n  const { data: newsArticles = [] } = useQuery({\n    queryKey: ['/api/moderation/news'],\n    enabled: !!user\n  });\n\n  const { data: feedbackQuestions = [] } = useQuery({\n    queryKey: ['/api/moderation/feedback-questions'],\n    enabled: !!user\n  });\n\n  const { data: users = [] } = useQuery({\n    queryKey: ['/api/moderation/users'],\n    enabled: !!user\n  });\n\n  const { data: brands = [] } = useQuery({\n    queryKey: ['/api/brands'],\n    enabled: !!user\n  });\n\n  // Enhanced forms with multi-select support\n  const missionForm = useForm({\n    resolver: zodResolver(missionSchema),\n    defaultValues: {\n      title: '',\n      description: '',\n      targetCategory: '',\n      fromBrandIds: [],\n      toBrandIds: [],\n      pointsReward: 50,\n      startDate: new Date().toISOString().split('T')[0],\n      endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n      createdBy: user?.id || ''\n    }\n  });\n\n  const newsForm = useForm({\n    resolver: zodResolver(newsArticleSchema),\n    defaultValues: {\n      title: '',\n      description: '',\n      imageUrls: [],\n      suggestedFromBrandIds: [],\n      suggestedToBrandIds: [],\n      commentsEnabled: true,\n      isPublished: true,\n      createdBy: user?.id || ''\n    }\n  });\n\n  const feedbackForm = useForm({\n    resolver: zodResolver(feedbackQuestionSchema),\n    defaultValues: {\n      title: '',\n      description: '',\n      type: 'multiple_choice' as const,\n      options: [''],\n      startDate: new Date().toISOString().split('T')[0],\n      endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n      createdBy: user?.id || ''\n    }\n  });\n\n  // Multi-select handlers\n  const [selectedFromBrands, setSelectedFromBrands] = useState<string[]>([]);\n  const [selectedToBrands, setSelectedToBrands] = useState<string[]>([]);\n  const [selectedSuggestedFromBrands, setSelectedSuggestedFromBrands] = useState<string[]>([]);\n  const [selectedSuggestedToBrands, setSelectedSuggestedToBrands] = useState<string[]>([]);\n  const [imageUrls, setImageUrls] = useState<string[]>(['']);\n\n  // Mutations\n  const createMissionMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch('/api/moderation/missions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ ...data, fromBrandIds: selectedFromBrands, toBrandIds: selectedToBrands })\n      });\n      if (!response.ok) throw new Error('Failed to create mission');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/missions'] });\n      toast({ title: 'Mission created successfully' });\n      missionForm.reset();\n      setSelectedFromBrands([]);\n      setSelectedToBrands([]);\n    }\n  });\n\n  const createNewsArticleMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch('/api/moderation/news', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          ...data,\n          imageUrls: imageUrls.filter(url => url.trim()),\n          suggestedFromBrandIds: selectedSuggestedFromBrands,\n          suggestedToBrandIds: selectedSuggestedToBrands\n        })\n      });\n      if (!response.ok) throw new Error('Failed to create news article');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/news'] });\n      toast({ title: 'News article created successfully' });\n      newsForm.reset();\n      setImageUrls(['']);\n      setSelectedSuggestedFromBrands([]);\n      setSelectedSuggestedToBrands([]);\n    }\n  });\n\n  const approveSwitchLogMutation = useMutation({\n    mutationFn: async ({ id, notes }: { id: string; notes?: string }) => {\n      const response = await fetch(`/api/moderation/switch-logs/${id}/approve`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ moderatorId: user?.id, notes })\n      });\n      if (!response.ok) throw new Error('Failed to approve switch log');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/switch-logs/pending'] });\n      toast({ title: 'Switch log approved successfully' });\n    }\n  });\n\n  const rejectSwitchLogMutation = useMutation({\n    mutationFn: async ({ id, notes }: { id: string; notes: string }) => {\n      const response = await fetch(`/api/moderation/switch-logs/${id}/reject`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ moderatorId: user?.id, notes })\n      });\n      if (!response.ok) throw new Error('Failed to reject switch log');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/switch-logs/pending'] });\n      toast({ title: 'Switch log rejected' });\n    }\n  });\n\n  // Utility functions\n  const addBrandToSelection = (brandId: string, type: 'from' | 'to' | 'suggestedFrom' | 'suggestedTo') => {\n    switch (type) {\n      case 'from':\n        if (!selectedFromBrands.includes(brandId)) {\n          setSelectedFromBrands([...selectedFromBrands, brandId]);\n        }\n        break;\n      case 'to':\n        if (!selectedToBrands.includes(brandId)) {\n          setSelectedToBrands([...selectedToBrands, brandId]);\n        }\n        break;\n      case 'suggestedFrom':\n        if (!selectedSuggestedFromBrands.includes(brandId)) {\n          setSelectedSuggestedFromBrands([...selectedSuggestedFromBrands, brandId]);\n        }\n        break;\n      case 'suggestedTo':\n        if (!selectedSuggestedToBrands.includes(brandId)) {\n          setSelectedSuggestedToBrands([...selectedSuggestedToBrands, brandId]);\n        }\n        break;\n    }\n  };\n\n  const removeBrandFromSelection = (brandId: string, type: 'from' | 'to' | 'suggestedFrom' | 'suggestedTo') => {\n    switch (type) {\n      case 'from':\n        setSelectedFromBrands(selectedFromBrands.filter(id => id !== brandId));\n        break;\n      case 'to':\n        setSelectedToBrands(selectedToBrands.filter(id => id !== brandId));\n        break;\n      case 'suggestedFrom':\n        setSelectedSuggestedFromBrands(selectedSuggestedFromBrands.filter(id => id !== brandId));\n        break;\n      case 'suggestedTo':\n        setSelectedSuggestedToBrands(selectedSuggestedToBrands.filter(id => id !== brandId));\n        break;\n    }\n  };\n\n  const addImageUrl = () => {\n    setImageUrls([...imageUrls, '']);\n  };\n\n  const removeImageUrl = (index: number) => {\n    setImageUrls(imageUrls.filter((_, i) => i !== index));\n  };\n\n  const updateImageUrl = (index: number, url: string) => {\n    const updated = [...imageUrls];\n    updated[index] = url;\n    setImageUrls(updated);\n  };\n\n  // Sidebar navigation items\n  const sidebarItems = [\n    { id: 'overview', label: 'Overview', icon: Home, count: pendingReports.length + pendingSwitchLogs.length },\n    { id: 'reports', label: 'Reports', icon: Flag, count: pendingReports.length },\n    { id: 'switches', label: 'Switch Approvals', icon: Target, count: pendingSwitchLogs.length },\n    { id: 'missions', label: 'Missions', icon: Award, count: missions.length },\n    { id: 'news', label: 'News Articles', icon: Newspaper, count: newsArticles.length },\n    { id: 'feedback', label: 'Feedback', icon: MessageSquare, count: feedbackQuestions.length },\n    { id: 'members', label: 'Members', icon: Users, count: users.length },\n    { id: 'analytics', label: 'Analytics', icon: TrendingUp, count: 0 },\n  ];\n\n  // Close sidebar on mobile when section changes\n  useEffect(() => {\n    if (window.innerWidth < 768) {\n      setSidebarOpen(false);\n    }\n  }, [activeSection]);\n\n  if (!user || (user.role !== 'ADMIN' && user.role !== 'MODERATOR' && user.role !== 'STRATEGIST')) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Card className=\"max-w-md\">\n          <CardContent className=\"text-center py-12\">\n            <Shield className=\"w-16 h-16 mx-auto text-red-600 mb-4\" />\n            <h2 className=\"text-xl font-semibold mb-2\">Access Denied</h2>\n            <p className=\"text-muted-foreground\">You need moderator privileges to access this panel.</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Sidebar */}\n      <div className={`\n        fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out\n        ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'}\n        lg:translate-x-0 lg:static lg:inset-0\n      `}>\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center gap-3\">\n            <Shield className=\"w-8 h-8 text-blue-600\" />\n            <h1 className=\"text-xl font-bold\">Moderator Panel</h1>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"lg:hidden\"\n            onClick={() => setSidebarOpen(false)}\n          >\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        <nav className=\"mt-4\">\n          {sidebarItems.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => setActiveSection(item.id)}\n              className={`\n                w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\n                ${activeSection === item.id ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-r-2 border-blue-600' : 'text-gray-700 dark:text-gray-300'}\n              `}\n            >\n              <item.icon className=\"w-5 h-5\" />\n              <span className=\"flex-1\">{item.label}</span>\n              {item.count > 0 && (\n                <Badge variant={activeSection === item.id ? 'default' : 'secondary'} className=\"text-xs\">\n                  {item.count}\n                </Badge>\n              )}\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <header className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-4\">\n          <div className=\"flex items-center gap-3\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"lg:hidden\"\n              onClick={() => setSidebarOpen(true)}\n            >\n              <Menu className=\"w-5 h-5\" />\n            </Button>\n            <h2 className=\"text-2xl font-semibold capitalize\">\n              {sidebarItems.find(item => item.id === activeSection)?.label || 'Overview'}\n            </h2>\n          </div>\n        </header>\n\n        {/* Content Area */}\n        <main className=\"flex-1 overflow-y-auto p-4 md:p-6\">\n          {activeSection === 'overview' && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Pending Reports</p>\n                        <p className=\"text-2xl font-bold text-red-600\">{pendingReports.length}</p>\n                      </div>\n                      <Flag className=\"w-8 h-8 text-red-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Switch Approvals</p>\n                        <p className=\"text-2xl font-bold text-yellow-600\">{pendingSwitchLogs.length}</p>\n                      </div>\n                      <Clock className=\"w-8 h-8 text-yellow-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Active Missions</p>\n                        <p className=\"text-2xl font-bold text-blue-600\">{missions.filter((m: any) => m.isActive).length}</p>\n                      </div>\n                      <Award className=\"w-8 h-8 text-blue-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Total Members</p>\n                        <p className=\"text-2xl font-bold text-green-600\">{users.length}</p>\n                      </div>\n                      <Users className=\"w-8 h-8 text-green-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Activity className=\"w-5 h-5\" />\n                      Recent Activity\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      {pendingSwitchLogs.slice(0, 3).map((log: any) => (\n                        <div key={log.switchLog.id} className=\"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-800 rounded\">\n                          <Target className=\"w-4 h-4 text-blue-500\" />\n                          <div className=\"flex-1\">\n                            <p className=\"text-sm font-medium\">New switch request</p>\n                            <p className=\"text-xs text-muted-foreground\">\n                              From {log.fromBrand?.name} to {log.toBrand?.name}\n                            </p>\n                          </div>\n                          <Badge variant=\"secondary\">Pending</Badge>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <TrendingUp className=\"w-5 h-5\" />\n                      Quick Actions\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <Button \n                        onClick={() => setActiveSection('missions')} \n                        variant=\"outline\" \n                        className=\"h-auto py-4 flex flex-col gap-2\"\n                      >\n                        <Award className=\"w-6 h-6\" />\n                        <span className=\"text-xs\">Create Mission</span>\n                      </Button>\n                      <Button \n                        onClick={() => setActiveSection('news')} \n                        variant=\"outline\" \n                        className=\"h-auto py-4 flex flex-col gap-2\"\n                      >\n                        <Newspaper className=\"w-6 h-6\" />\n                        <span className=\"text-xs\">Post News</span>\n                      </Button>\n                      <Button \n                        onClick={() => setActiveSection('switches')} \n                        variant=\"outline\" \n                        className=\"h-auto py-4 flex flex-col gap-2\"\n                      >\n                        <CheckCircle className=\"w-6 h-6\" />\n                        <span className=\"text-xs\">Review Switches</span>\n                      </Button>\n                      <Button \n                        onClick={() => setActiveSection('reports')} \n                        variant=\"outline\" \n                        className=\"h-auto py-4 flex flex-col gap-2\"\n                      >\n                        <Flag className=\"w-6 h-6\" />\n                        <span className=\"text-xs\">Handle Reports</span>\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          )}\n\n          {activeSection === 'missions' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-semibold\">Mission Management</h3>\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <Button>\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Create Mission\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n                    <DialogHeader>\n                      <DialogTitle>Create New Mission</DialogTitle>\n                    </DialogHeader>\n                    <Form {...missionForm}>\n                      <form onSubmit={missionForm.handleSubmit((data) => createMissionMutation.mutate(data))} className=\"space-y-4\">\n                        <FormField\n                          control={missionForm.control}\n                          name=\"title\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Mission Title</FormLabel>\n                              <FormControl>\n                                <Input placeholder=\"Enter mission title\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={missionForm.control}\n                          name=\"description\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Description</FormLabel>\n                              <FormControl>\n                                <Textarea placeholder=\"Describe the mission goals\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <div>\n                          <Label>Switch From Brands (Select Multiple)</Label>\n                          <div className=\"mt-2 space-y-2\">\n                            <Select onValueChange={(brandId) => addBrandToSelection(brandId, 'from')}>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select brands to switch from\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {brands.filter((brand: any) => !selectedFromBrands.includes(brand.id)).map((brand: any) => (\n                                  <SelectItem key={brand.id} value={brand.id}>{brand.name}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {selectedFromBrands.map((brandId) => {\n                                const brand = brands.find((b: any) => b.id === brandId);\n                                return (\n                                  <Badge key={brandId} variant=\"secondary\" className=\"flex items-center gap-1\">\n                                    {brand?.name}\n                                    <Button\n                                      type=\"button\"\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      className=\"h-4 w-4 p-0\"\n                                      onClick={() => removeBrandFromSelection(brandId, 'from')}\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </Button>\n                                  </Badge>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </div>\n\n                        <div>\n                          <Label>Switch To Brands (Select Multiple)</Label>\n                          <div className=\"mt-2 space-y-2\">\n                            <Select onValueChange={(brandId) => addBrandToSelection(brandId, 'to')}>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select brands to switch to\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {brands.filter((brand: any) => !selectedToBrands.includes(brand.id)).map((brand: any) => (\n                                  <SelectItem key={brand.id} value={brand.id}>{brand.name}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {selectedToBrands.map((brandId) => {\n                                const brand = brands.find((b: any) => b.id === brandId);\n                                return (\n                                  <Badge key={brandId} variant=\"default\" className=\"flex items-center gap-1\">\n                                    {brand?.name}\n                                    <Button\n                                      type=\"button\"\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      className=\"h-4 w-4 p-0\"\n                                      onClick={() => removeBrandFromSelection(brandId, 'to')}\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </Button>\n                                  </Badge>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </div>\n\n                        <FormField\n                          control={missionForm.control}\n                          name=\"pointsReward\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Points Reward</FormLabel>\n                              <FormControl>\n                                <Input \n                                  type=\"number\" \n                                  placeholder=\"50\"\n                                  {...field}\n                                  onChange={(e) => field.onChange(parseInt(e.target.value))}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <FormField\n                            control={missionForm.control}\n                            name=\"startDate\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Start Date</FormLabel>\n                                <FormControl>\n                                  <Input type=\"date\" {...field} />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n\n                          <FormField\n                            control={missionForm.control}\n                            name=\"endDate\"\n                            render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>End Date</FormLabel>\n                                <FormControl>\n                                  <Input type=\"date\" {...field} />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n\n                        <Button \n                          type=\"submit\" \n                          disabled={createMissionMutation.isPending || selectedFromBrands.length === 0 || selectedToBrands.length === 0}\n                          className=\"w-full\"\n                        >\n                          Create Mission\n                        </Button>\n                      </form>\n                    </Form>\n                  </DialogContent>\n                </Dialog>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {missions.map((mission: any) => (\n                  <Card key={mission.id} className=\"border-l-4 border-l-green-500\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"space-y-3\">\n                        <div>\n                          <h3 className=\"font-semibold\">{mission.title}</h3>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{mission.description}</p>\n                        </div>\n                        \n                        <div className=\"space-y-2\">\n                          {mission.fromBrandIds?.length > 0 && (\n                            <div>\n                              <p className=\"text-xs font-medium text-red-600\">Switch From:</p>\n                              <div className=\"flex flex-wrap gap-1\">\n                                {mission.fromBrandIds.map((brandId: string) => {\n                                  const brand = brands.find((b: any) => b.id === brandId);\n                                  return (\n                                    <Badge key={brandId} variant=\"outline\" className=\"text-xs\">\n                                      {brand?.name || brandId}\n                                    </Badge>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          )}\n                          \n                          {mission.toBrandIds?.length > 0 && (\n                            <div>\n                              <p className=\"text-xs font-medium text-green-600\">Switch To:</p>\n                              <div className=\"flex flex-wrap gap-1\">\n                                {mission.toBrandIds.map((brandId: string) => {\n                                  const brand = brands.find((b: any) => b.id === brandId);\n                                  return (\n                                    <Badge key={brandId} variant=\"default\" className=\"text-xs\">\n                                      {brand?.name || brandId}\n                                    </Badge>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex items-center justify-between\">\n                          <Badge variant=\"outline\" className=\"bg-green-50 text-green-700\">\n                            {mission.pointsReward} points\n                          </Badge>\n                          <Badge variant={mission.isActive ? 'default' : 'secondary'}>\n                            {mission.isActive ? 'Active' : 'Inactive'}\n                          </Badge>\n                        </div>\n\n                        <div className=\"flex gap-2 pt-2 border-t\">\n                          <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                            <Edit className=\"w-4 h-4 mr-2\" />\n                            Edit\n                          </Button>\n                          <Button variant=\"outline\" size=\"sm\">\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeSection === 'news' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-semibold\">News Management</h3>\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <Button>\n                      <Plus className=\"w-4 h-4 mr-2\" />\n                      Create News Article\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n                    <DialogHeader>\n                      <DialogTitle>Create News Article</DialogTitle>\n                    </DialogHeader>\n                    <Form {...newsForm}>\n                      <form onSubmit={newsForm.handleSubmit((data) => createNewsArticleMutation.mutate(data))} className=\"space-y-4\">\n                        <FormField\n                          control={newsForm.control}\n                          name=\"title\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Article Title</FormLabel>\n                              <FormControl>\n                                <Input placeholder=\"Enter news title\" {...field} />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={newsForm.control}\n                          name=\"description\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Article Content</FormLabel>\n                              <FormControl>\n                                <Textarea \n                                  placeholder=\"Write your news article content...\"\n                                  className=\"min-h-[120px]\"\n                                  {...field}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <div>\n                          <Label>Image URLs</Label>\n                          <div className=\"space-y-2 mt-2\">\n                            {imageUrls.map((url, index) => (\n                              <div key={index} className=\"flex gap-2\">\n                                <Input\n                                  placeholder=\"https://example.com/image.jpg\"\n                                  value={url}\n                                  onChange={(e) => updateImageUrl(index, e.target.value)}\n                                />\n                                <Button\n                                  type=\"button\"\n                                  variant=\"outline\"\n                                  onClick={() => removeImageUrl(index)}\n                                  disabled={imageUrls.length === 1}\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </Button>\n                              </div>\n                            ))}\n                            <Button type=\"button\" variant=\"outline\" onClick={addImageUrl}>\n                              <Plus className=\"w-4 h-4 mr-2\" />\n                              Add Image\n                            </Button>\n                          </div>\n                        </div>\n\n                        <div>\n                          <Label>Suggested Switch From Brands</Label>\n                          <div className=\"mt-2 space-y-2\">\n                            <Select onValueChange={(brandId) => addBrandToSelection(brandId, 'suggestedFrom')}>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select brands to suggest switching from\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {brands.filter((brand: any) => !selectedSuggestedFromBrands.includes(brand.id)).map((brand: any) => (\n                                  <SelectItem key={brand.id} value={brand.id}>{brand.name}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {selectedSuggestedFromBrands.map((brandId) => {\n                                const brand = brands.find((b: any) => b.id === brandId);\n                                return (\n                                  <Badge key={brandId} variant=\"secondary\" className=\"flex items-center gap-1\">\n                                    {brand?.name}\n                                    <Button\n                                      type=\"button\"\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      className=\"h-4 w-4 p-0\"\n                                      onClick={() => removeBrandFromSelection(brandId, 'suggestedFrom')}\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </Button>\n                                  </Badge>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </div>\n\n                        <div>\n                          <Label>Suggested Switch To Brands</Label>\n                          <div className=\"mt-2 space-y-2\">\n                            <Select onValueChange={(brandId) => addBrandToSelection(brandId, 'suggestedTo')}>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select brands to suggest switching to\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {brands.filter((brand: any) => !selectedSuggestedToBrands.includes(brand.id)).map((brand: any) => (\n                                  <SelectItem key={brand.id} value={brand.id}>{brand.name}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {selectedSuggestedToBrands.map((brandId) => {\n                                const brand = brands.find((b: any) => b.id === brandId);\n                                return (\n                                  <Badge key={brandId} variant=\"default\" className=\"flex items-center gap-1\">\n                                    {brand?.name}\n                                    <Button\n                                      type=\"button\"\n                                      variant=\"ghost\"\n                                      size=\"sm\"\n                                      className=\"h-4 w-4 p-0\"\n                                      onClick={() => removeBrandFromSelection(brandId, 'suggestedTo')}\n                                    >\n                                      <X className=\"w-3 h-3\" />\n                                    </Button>\n                                  </Badge>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch \n                              id=\"comments-enabled\"\n                              checked={newsForm.watch('commentsEnabled')}\n                              onCheckedChange={(checked) => newsForm.setValue('commentsEnabled', checked)}\n                            />\n                            <Label htmlFor=\"comments-enabled\">Enable Comments</Label>\n                          </div>\n\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch \n                              id=\"is-published\"\n                              checked={newsForm.watch('isPublished')}\n                              onCheckedChange={(checked) => newsForm.setValue('isPublished', checked)}\n                            />\n                            <Label htmlFor=\"is-published\">Publish Immediately</Label>\n                          </div>\n                        </div>\n\n                        <Button \n                          type=\"submit\" \n                          disabled={createNewsArticleMutation.isPending}\n                          className=\"w-full\"\n                        >\n                          Create News Article\n                        </Button>\n                      </form>\n                    </Form>\n                  </DialogContent>\n                </Dialog>\n              </div>\n\n              <div className=\"space-y-4\">\n                {newsArticles.map((article: any) => (\n                  <Card key={article.id}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <h3 className=\"text-lg font-semibold mb-2\">{article.title}</h3>\n                          <p className=\"text-muted-foreground mb-4\">{article.description}</p>\n                          \n                          {(article.suggestedFromBrandIds?.length > 0 || article.suggestedToBrandIds?.length > 0) && (\n                            <div className=\"space-y-2 mb-4\">\n                              {article.suggestedFromBrandIds?.length > 0 && (\n                                <div>\n                                  <p className=\"text-xs font-medium text-red-600 mb-1\">Suggested switches from:</p>\n                                  <div className=\"flex flex-wrap gap-1\">\n                                    {article.suggestedFromBrandIds.map((brandId: string) => {\n                                      const brand = brands.find((b: any) => b.id === brandId);\n                                      return (\n                                        <Badge key={brandId} variant=\"outline\" className=\"text-xs\">\n                                          {brand?.name || brandId}\n                                        </Badge>\n                                      );\n                                    })}\n                                  </div>\n                                </div>\n                              )}\n                              \n                              {article.suggestedToBrandIds?.length > 0 && (\n                                <div>\n                                  <p className=\"text-xs font-medium text-green-600 mb-1\">Suggested switches to:</p>\n                                  <div className=\"flex flex-wrap gap-1\">\n                                    {article.suggestedToBrandIds.map((brandId: string) => {\n                                      const brand = brands.find((b: any) => b.id === brandId);\n                                      return (\n                                        <Badge key={brandId} variant=\"default\" className=\"text-xs\">\n                                          {brand?.name || brandId}\n                                        </Badge>\n                                      );\n                                    })}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          )}\n\n                          <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                            <span>{new Date(article.publishedAt).toLocaleDateString()}</span>\n                            <Badge variant={article.commentsEnabled ? 'default' : 'secondary'}>\n                              Comments {article.commentsEnabled ? 'On' : 'Off'}\n                            </Badge>\n                            <Badge variant={article.isPublished ? 'default' : 'secondary'}>\n                              {article.isPublished ? 'Published' : 'Draft'}\n                            </Badge>\n                          </div>\n                        </div>\n\n                        <div className=\"flex gap-2 ml-4\">\n                          <Button variant=\"outline\" size=\"sm\">\n                            <Edit className=\"w-4 h-4\" />\n                          </Button>\n                          <Button variant=\"outline\" size=\"sm\">\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeSection === 'switches' && (\n            <div className=\"space-y-6\">\n              <h3 className=\"text-xl font-semibold\">Switch Log Approvals</h3>\n              \n              {pendingSwitchLogs.length === 0 ? (\n                <Card>\n                  <CardContent className=\"text-center py-12\">\n                    <CheckCircle className=\"w-16 h-16 mx-auto text-green-600 mb-4\" />\n                    <h3 className=\"text-xl font-semibold mb-2\">All Switch Logs Reviewed!</h3>\n                    <p className=\"text-muted-foreground\">No pending switch logs require approval.</p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"space-y-4\">\n                  {pendingSwitchLogs.map((log: any) => (\n                    <Card key={log.switchLog.id}>\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <Target className=\"w-5 h-5 text-blue-500\" />\n                              <h3 className=\"font-semibold\">\n                                Switch from {log.fromBrand?.name} to {log.toBrand?.name}\n                              </h3>\n                              <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                                PENDING APPROVAL\n                              </Badge>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-4\">\n                              <div>\n                                <span className=\"font-medium text-muted-foreground\">User:</span>\n                                <div>@{log.user?.handle} (Level {log.user?.level})</div>\n                              </div>\n                              <div>\n                                <span className=\"font-medium text-muted-foreground\">Category:</span>\n                                <div>{log.switchLog.category}</div>\n                              </div>\n                            </div>\n\n                            {log.switchLog.reason && (\n                              <div className=\"mb-4\">\n                                <span className=\"font-medium text-muted-foreground\">Reason:</span>\n                                <div className=\"mt-1 p-3 bg-muted rounded-lg text-sm\">\n                                  {log.switchLog.reason}\n                                </div>\n                              </div>\n                            )}\n\n                            {log.switchLog.evidenceUrl && (\n                              <div className=\"mb-4\">\n                                <span className=\"font-medium text-muted-foreground\">Evidence:</span>\n                                <div className=\"mt-1\">\n                                  <img \n                                    src={log.switchLog.evidenceUrl} \n                                    alt=\"Switch evidence\" \n                                    className=\"w-32 h-32 object-cover rounded-lg border\"\n                                  />\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n\n                        <div className=\"flex gap-2 pt-4 border-t\">\n                          <Button\n                            size=\"sm\"\n                            onClick={() => approveSwitchLogMutation.mutate({ id: log.switchLog.id })}\n                            disabled={approveSwitchLogMutation.isPending}\n                            className=\"bg-green-600 hover:bg-green-700\"\n                          >\n                            <ThumbsUp className=\"w-4 h-4 mr-2\" />\n                            Approve\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            onClick={() => {\n                              const notes = window.prompt('Enter rejection reason:');\n                              if (notes) {\n                                rejectSwitchLogMutation.mutate({ id: log.switchLog.id, notes });\n                              }\n                            }}\n                            disabled={rejectSwitchLogMutation.isPending}\n                          >\n                            <ThumbsDown className=\"w-4 h-4 mr-2\" />\n                            Reject\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Additional sections would go here */}\n        </main>\n      </div>\n\n      {/* Overlay for mobile */}\n      {sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n    </div>\n  );\n}","size_bytes":50592},"client/src/pages/Register.tsx":{"content":"import React, { useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useLocation } from 'wouter';\nimport { apiRequest } from '@/lib/queryClient';\nimport { User, MapPin, Hash } from 'lucide-react';\n\nconst indianStates = [\n  'Andhra Pradesh', 'Arunachal Pradesh', 'Assam', 'Bihar', 'Chhattisgarh',\n  'Goa', 'Gujarat', 'Haryana', 'Himachal Pradesh', 'Jharkhand',\n  'Karnataka', 'Kerala', 'Madhya Pradesh', 'Maharashtra', 'Manipur',\n  'Meghalaya', 'Mizoram', 'Nagaland', 'Odisha', 'Punjab',\n  'Rajasthan', 'Sikkim', 'Tamil Nadu', 'Telangana', 'Tripura',\n  'Uttar Pradesh', 'Uttarakhand', 'West Bengal'\n];\n\nconst animalNames = [\n  'Eagle', 'Tiger', 'Lion', 'Wolf', 'Bear', 'Fox', 'Hawk',\n  'Owl', 'Dolphin', 'Shark', 'Phoenix', 'Dragon', 'Falcon',\n  'Panther', 'Jaguar', 'Lynx', 'Cheetah', 'Leopard'\n];\n\nconst adjectives = [\n  'Swift', 'Brave', 'Mighty', 'Clever', 'Bold', 'Fierce',\n  'Noble', 'Wise', 'Strong', 'Agile', 'Sharp', 'Bright',\n  'Quick', 'Smart', 'Elite', 'Prime', 'Alpha', 'Royal'\n];\n\nexport default function Register() {\n  const [handle, setHandle] = useState('');\n  const [region, setRegion] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { firebaseUser } = useAuth();\n  const [, navigate] = useLocation();\n\n  React.useEffect(() => {\n    generateHandle();\n  }, []);\n\n  const generateHandle = () => {\n    const randomAdjective = adjectives[Math.floor(Math.random() * adjectives.length)];\n    const randomAnimal = animalNames[Math.floor(Math.random() * animalNames.length)];\n    setHandle(`${randomAdjective}${randomAnimal}`);\n  };\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!firebaseUser) return;\n\n    setLoading(true);\n    \n    try {\n      await apiRequest('POST', '/api/auth/register', {\n        firebaseUid: firebaseUser.uid,\n        phone: firebaseUser.phoneNumber,\n        email: firebaseUser.email,\n        handle,\n        region\n      });\n\n      navigate('/');\n    } catch (error) {\n      console.error('Registration error:', error);\n      if (error instanceof Error && error.message.includes('Handle already taken')) {\n        generateHandle();\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!firebaseUser) {\n    navigate('/login');\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div className=\"text-center\">\n          <h2 className=\"text-3xl font-bold text-blue-900\">Complete Your Profile</h2>\n          <p className=\"mt-2 text-gray-600\">Join the movement for Indian products</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Create Your Anonymous Identity</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleRegister} className=\"space-y-6\">\n              <div>\n                <Label htmlFor=\"handle\">Your Anonymous Handle</Label>\n                <div className=\"mt-1 flex\">\n                  <div className=\"relative flex-1\">\n                    <Hash className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"handle\"\n                      type=\"text\"\n                      value={handle}\n                      onChange={(e) => setHandle(e.target.value)}\n                      className=\"pl-10\"\n                      placeholder=\"BraveEagle\"\n                      required\n                    />\n                  </div>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={generateHandle}\n                    className=\"ml-2\"\n                  >\n                    <i className=\"fas fa-dice h-4 w-4\" />\n                  </Button>\n                </div>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  This will be your public identity. Your real information stays private.\n                </p>\n              </div>\n\n              <div>\n                <Label htmlFor=\"region\">Your State/Region</Label>\n                <div className=\"mt-1 relative\">\n                  <MapPin className=\"absolute left-3 top-3 h-4 w-4 text-gray-400 z-10\" />\n                  <Select value={region} onValueChange={setRegion} required>\n                    <SelectTrigger className=\"pl-10\">\n                      <SelectValue placeholder=\"Select your state\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {indianStates.map((state) => (\n                        <SelectItem key={state} value={state}>\n                          {state}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Helps us connect you with local alternatives and groups.\n                </p>\n              </div>\n\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-blue-900 mb-2\">Privacy First</h4>\n                <ul className=\"text-sm text-blue-700 space-y-1\">\n                  <li>â€¢ Your handle keeps you anonymous</li>\n                  <li>â€¢ Phone/email stays completely private</li>\n                  <li>â€¢ Only you control what to share publicly</li>\n                  <li>â€¢ You can switch products silently or publicly</li>\n                </ul>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600\"\n                disabled={loading}\n              >\n                {loading ? 'Creating Account...' : 'Join JumboJolt'}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6311},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }","size_bytes":1139},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }","size_bytes":1876},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/BrandSelector.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Check, ChevronsUpDown, X, Plus } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { cn } from \"@/lib/utils\";\n\ninterface Brand {\n  id: string;\n  name: string;\n  category: string;\n  isIndian: boolean;\n  description?: string;\n}\n\ninterface BrandSelectorProps {\n  selectedBrands: Brand[];\n  onBrandsChange: (brands: Brand[]) => void;\n  label: string;\n  placeholder?: string;\n  maxSelections?: number;\n}\n\nexport function BrandSelector({\n  selectedBrands,\n  onBrandsChange,\n  label,\n  placeholder = \"Search brands...\",\n  maxSelections = 10,\n}: BrandSelectorProps) {\n  const [open, setOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [newBrandData, setNewBrandData] = useState({\n    name: \"\",\n    category: \"\",\n    isIndian: true,\n    description: \"\",\n  });\n\n  const queryClient = useQueryClient();\n\n  // Search brands query\n  const { data: searchResults = [] } = useQuery({\n    queryKey: [\"/api/brands/search\", searchQuery],\n    queryFn: () =>\n      apiRequest(`/api/brands/search?query=${encodeURIComponent(searchQuery)}`),\n    enabled: searchQuery.length > 0,\n  });\n\n  // Create brand mutation\n  const createBrandMutation = useMutation({\n    mutationFn: (brandData: any) =>\n      apiRequest(\"/api/brands\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(brandData),\n      }),\n    onSuccess: (newBrand) => {\n      // Add the new brand to selected brands\n      if (selectedBrands.length < maxSelections) {\n        onBrandsChange([...selectedBrands, newBrand]);\n      }\n      // Reset form\n      setNewBrandData({\n        name: \"\",\n        category: \"\",\n        isIndian: true,\n        description: \"\",\n      });\n      setShowAddDialog(false);\n      setSearchQuery(\"\");\n      // Invalidate search cache\n      queryClient.invalidateQueries({ queryKey: [\"/api/brands/search\"] });\n    },\n  });\n\n  const handleSelectBrand = (brand: Brand) => {\n    const isAlreadySelected = selectedBrands.some((b) => b.id === brand.id);\n    if (!isAlreadySelected && selectedBrands.length < maxSelections) {\n      onBrandsChange([...selectedBrands, brand]);\n    }\n    setOpen(false);\n    setSearchQuery(\"\");\n  };\n\n  const handleRemoveBrand = (brandId: string) => {\n    onBrandsChange(selectedBrands.filter((b) => b.id !== brandId));\n  };\n\n  const handleCreateBrand = () => {\n    if (newBrandData.name && newBrandData.category) {\n      createBrandMutation.mutate(newBrandData);\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <Label>{label}</Label>\n\n      {/* Selected brands */}\n      <div className=\"flex flex-wrap gap-2 min-h-[40px] p-2 border rounded-md bg-background\">\n        {selectedBrands.map((brand) => (\n          <Badge\n            key={brand.id}\n            variant=\"secondary\"\n            className=\"flex items-center gap-1\"\n          >\n            {brand.name}\n            <button\n              onClick={() => handleRemoveBrand(brand.id)}\n              className=\"ml-1 hover:bg-destructive/20 rounded-full p-0.5\"\n            >\n              <X className=\"h-3 w-3\" />\n            </button>\n          </Badge>\n        ))}\n\n        {selectedBrands.length < maxSelections && (\n          <Popover open={open} onOpenChange={setOpen}>\n            <PopoverTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\" className=\"h-6 border-dashed\">\n                <Plus className=\"h-3 w-3 mr-1\" />\n                Add Brand\n                <ChevronsUpDown className=\"ml-2 h-3 w-3 shrink-0 opacity-50\" />\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-[300px] p-0\">\n              <Command>\n                <CommandInput\n                  placeholder={placeholder}\n                  value={searchQuery}\n                  onValueChange={setSearchQuery}\n                />\n                <CommandList>\n                  <CommandEmpty>\n                    <div className=\"p-4 text-center\">\n                      <p className=\"text-sm text-muted-foreground mb-2\">\n                        No brands found for \"{searchQuery}\"\n                      </p>\n                      <Button\n                        size=\"sm\"\n                        onClick={() => {\n                          setNewBrandData((prev) => ({\n                            ...prev,\n                            name: searchQuery,\n                          }));\n                          setShowAddDialog(true);\n                          setOpen(false);\n                        }}\n                      >\n                        <Plus className=\"h-3 w-3 mr-1\" />\n                        Create \"{searchQuery}\"\n                      </Button>\n                    </div>\n                  </CommandEmpty>\n                  <CommandGroup>\n                    {searchResults.map((brand: Brand) => {\n                      const isSelected = selectedBrands.some(\n                        (b) => b.id === brand.id,\n                      );\n                      return (\n                        <CommandItem\n                          key={brand.id}\n                          onSelect={() => handleSelectBrand(brand)}\n                          disabled={isSelected}\n                          className={cn(\n                            \"flex items-center justify-between\",\n                            isSelected && \"opacity-50\",\n                          )}\n                        >\n                          <div className=\"flex flex-col\">\n                            <span className=\"font-medium\">{brand.name}</span>\n                            <span className=\"text-xs text-muted-foreground\">\n                              {brand.category}\n                              {brand.isIndian && (\n                                <Badge\n                                  variant=\"outline\"\n                                  className=\"ml-2 h-4 text-xs\"\n                                >\n                                  ðŸ‡®ðŸ‡³ Indian\n                                </Badge>\n                              )}\n                            </span>\n                          </div>\n                          {isSelected && <Check className=\"h-4 w-4\" />}\n                        </CommandItem>\n                      );\n                    })}\n                  </CommandGroup>\n                </CommandList>\n              </Command>\n            </PopoverContent>\n          </Popover>\n        )}\n      </div>\n\n      {/* Add new brand dialog */}\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Add New Brand</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"brandName\">Brand Name</Label>\n              <Input\n                id=\"brandName\"\n                value={newBrandData.name}\n                onChange={(e) =>\n                  setNewBrandData((prev) => ({ ...prev, name: e.target.value }))\n                }\n                placeholder=\"Enter brand name\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"brandCategory\">Category</Label>\n              <Input\n                id=\"brandCategory\"\n                value={newBrandData.category}\n                onChange={(e) =>\n                  setNewBrandData((prev) => ({\n                    ...prev,\n                    category: e.target.value,\n                  }))\n                }\n                placeholder=\"e.g., Electronics, Food, Fashion\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"brandDescription\">Description (Optional)</Label>\n              <Input\n                id=\"brandDescription\"\n                value={newBrandData.description}\n                onChange={(e) =>\n                  setNewBrandData((prev) => ({\n                    ...prev,\n                    description: e.target.value,\n                  }))\n                }\n                placeholder=\"Brief description of the brand\"\n              />\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"checkbox\"\n                id=\"isIndian\"\n                checked={newBrandData.isIndian}\n                onChange={(e) =>\n                  setNewBrandData((prev) => ({\n                    ...prev,\n                    isIndian: e.target.checked,\n                  }))\n                }\n                className=\"rounded\"\n              />\n              <Label htmlFor=\"isIndian\">Indian Brand</Label>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAddDialog(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleCreateBrand}\n              disabled={\n                !newBrandData.name ||\n                !newBrandData.category ||\n                createBrandMutation.isPending\n              }\n            >\n              {createBrandMutation.isPending ? \"Creating...\" : \"Create Brand\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":9956},"client/src/components/EnhancedMissionDialog.tsx":{"content":"import React, { useState } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { BrandSelector } from './BrandSelector';\nimport { Calendar, Target, Award, Clock } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/context/AuthContext';\n\ninterface Brand {\n  id: string;\n  name: string;\n  category: string;\n  isIndian: boolean;\n  description?: string;\n}\n\ninterface EnhancedMissionDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onMissionCreated?: () => void;\n}\n\nexport function EnhancedMissionDialog({ \n  open, \n  onOpenChange,\n  onMissionCreated \n}: EnhancedMissionDialogProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  const [missionData, setMissionData] = useState({\n    title: '',\n    description: '',\n    category: '',\n    fromBrandIds: [] as string[],\n    toBrandIds: [] as string[],\n    pointsReward: 50,\n    startDate: '',\n    endDate: '',\n    isActive: true\n  });\n\n  const [selectedFromBrands, setSelectedFromBrands] = useState<Brand[]>([]);\n  const [selectedToBrands, setSelectedToBrands] = useState<Brand[]>([]);\n\n  const createMissionMutation = useMutation({\n    mutationFn: (data: any) => apiRequest('/api/moderation/missions', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data)\n    }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/missions'] });\n      resetForm();\n      onOpenChange(false);\n      onMissionCreated?.();\n    }\n  });\n\n  const resetForm = () => {\n    setMissionData({\n      title: '',\n      description: '',\n      category: '',\n      fromBrandIds: [],\n      toBrandIds: [],\n      pointsReward: 50,\n      startDate: '',\n      endDate: '',\n      isActive: true\n    });\n    setSelectedFromBrands([]);\n    setSelectedToBrands([]);\n  };\n\n  const handleSubmit = () => {\n    if (!missionData.title || !missionData.description || !missionData.category) return;\n\n    const missionPayload = {\n      ...missionData,\n      fromBrandIds: selectedFromBrands.map(b => b.id),\n      toBrandIds: selectedToBrands.map(b => b.id),\n      createdBy: user?.id,\n      startDate: missionData.startDate ? new Date(missionData.startDate).toISOString() : null,\n      endDate: missionData.endDate ? new Date(missionData.endDate).toISOString() : null\n    };\n\n    createMissionMutation.mutate(missionPayload);\n  };\n\n  const categories = [\n    'Food & Beverages',\n    'Electronics',\n    'Fashion & Clothing',\n    'Home & Kitchen',\n    'Beauty & Personal Care',\n    'Sports & Fitness',\n    'Books & Education',\n    'Automotive',\n    'Health & Wellness',\n    'Travel & Tourism'\n  ];\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Target className=\"h-5 w-5 text-blue-600\" />\n            Create New Mission\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Basic Information */}\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"missionTitle\">Mission Title *</Label>\n              <Input\n                id=\"missionTitle\"\n                value={missionData.title}\n                onChange={(e) => setMissionData(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"e.g., Switch from Maggi to Local Noodle Brands\"\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"missionDescription\">Description *</Label>\n              <Textarea\n                id=\"missionDescription\"\n                value={missionData.description}\n                onChange={(e) => setMissionData(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Describe the mission objectives and benefits of switching...\"\n                rows={3}\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"missionCategory\">Category *</Label>\n              <Select value={missionData.category} onValueChange={(value) => setMissionData(prev => ({ ...prev, category: value }))}>\n                <SelectTrigger className=\"mt-1\">\n                  <SelectValue placeholder=\"Select a category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {categories.map((category) => (\n                    <SelectItem key={category} value={category}>\n                      {category}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          {/* Brand Selection */}\n          <div className=\"space-y-4\">\n            <BrandSelector\n              selectedBrands={selectedFromBrands}\n              onBrandsChange={setSelectedFromBrands}\n              label=\"Brands to Switch FROM (Foreign/Target Brands)\"\n              placeholder=\"Search foreign brands to switch from...\"\n              maxSelections={5}\n            />\n\n            <BrandSelector\n              selectedBrands={selectedToBrands}\n              onBrandsChange={setSelectedToBrands}\n              label=\"Indian Alternative Brands (Switch TO)\"\n              placeholder=\"Search Indian brands to recommend...\"\n              maxSelections={10}\n            />\n          </div>\n\n          {/* Mission Configuration */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"pointsReward\" className=\"flex items-center gap-1\">\n                <Award className=\"h-4 w-4\" />\n                Points Reward\n              </Label>\n              <Input\n                id=\"pointsReward\"\n                type=\"number\"\n                min=\"10\"\n                max=\"500\"\n                value={missionData.pointsReward}\n                onChange={(e) => setMissionData(prev => ({ ...prev, pointsReward: parseInt(e.target.value) || 50 }))}\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"startDate\" className=\"flex items-center gap-1\">\n                <Calendar className=\"h-4 w-4\" />\n                Start Date\n              </Label>\n              <Input\n                id=\"startDate\"\n                type=\"date\"\n                value={missionData.startDate}\n                onChange={(e) => setMissionData(prev => ({ ...prev, startDate: e.target.value }))}\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"endDate\" className=\"flex items-center gap-1\">\n                <Clock className=\"h-4 w-4\" />\n                End Date\n              </Label>\n              <Input\n                id=\"endDate\"\n                type=\"date\"\n                value={missionData.endDate}\n                onChange={(e) => setMissionData(prev => ({ ...prev, endDate: e.target.value }))}\n                className=\"mt-1\"\n                min={missionData.startDate}\n              />\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSubmit}\n            disabled={\n              !missionData.title || \n              !missionData.description || \n              !missionData.category ||\n              selectedFromBrands.length === 0 ||\n              createMissionMutation.isPending\n            }\n          >\n            {createMissionMutation.isPending ? 'Creating...' : 'Create Mission'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":8272},"client/src/components/MessagingSystem.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { MessageCircle, Send, User, Clock, Paperclip, Reply } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/context/AuthContext';\nimport { format } from 'date-fns';\n\ninterface Message {\n  id: string;\n  fromUserId: string | null;\n  toUserId: string | null;\n  subject: string;\n  content: string;\n  isRead: boolean | null;\n  attachmentUrls: string[] | null;\n  replyToId: string | null;\n  createdAt: Date | null;\n}\n\ninterface MessagingSystemProps {\n  userId?: string;\n}\n\nexport function MessagingSystem({ userId }: MessagingSystemProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [showNewMessage, setShowNewMessage] = useState(false);\n  const [selectedMessage, setSelectedMessage] = useState<Message | null>(null);\n  const [newMessageData, setNewMessageData] = useState({\n    toUserId: userId || '',\n    subject: '',\n    content: '',\n    replyToId: null as string | null\n  });\n\n  // Fetch messages for the current user\n  const { data: messages = [] } = useQuery({\n    queryKey: ['/api/messages', user?.id],\n    queryFn: () => apiRequest(`/api/messages/${user?.id}`),\n    enabled: !!user?.id,\n  });\n\n  // Fetch unread messages count\n  const { data: unreadMessages = [] } = useQuery({\n    queryKey: ['/api/messages', user?.id, 'unread'],\n    queryFn: () => apiRequest(`/api/messages/${user?.id}/unread`),\n    enabled: !!user?.id,\n  });\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: (messageData: any) => apiRequest('/api/messages', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(messageData)\n    }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/messages'] });\n      setNewMessageData({ toUserId: userId || '', subject: '', content: '', replyToId: null });\n      setShowNewMessage(false);\n    }\n  });\n\n  // Mark message as read mutation\n  const markAsReadMutation = useMutation({\n    mutationFn: (messageId: string) => apiRequest(`/api/messages/${messageId}/read`, {\n      method: 'PUT'\n    }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/messages'] });\n    }\n  });\n\n  const handleSendMessage = () => {\n    if (!newMessageData.subject || !newMessageData.content) return;\n\n    const messagePayload = {\n      ...newMessageData,\n      fromUserId: user?.id,\n      toUserId: newMessageData.toUserId || userId\n    };\n\n    sendMessageMutation.mutate(messagePayload);\n  };\n\n  const handleReply = (message: Message) => {\n    setNewMessageData({\n      toUserId: message.fromUserId || '',\n      subject: `Re: ${message.subject}`,\n      content: '',\n      replyToId: message.id\n    });\n    setShowNewMessage(true);\n  };\n\n  const handleOpenMessage = (message: Message) => {\n    setSelectedMessage(message);\n    if (!message.isRead && message.toUserId === user?.id) {\n      markAsReadMutation.mutate(message.id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header with unread count */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <MessageCircle className=\"h-5 w-5\" />\n          <h3 className=\"text-lg font-semibold\">Messages</h3>\n          {unreadMessages.length > 0 && (\n            <Badge variant=\"destructive\" className=\"ml-2\">\n              {unreadMessages.length} unread\n            </Badge>\n          )}\n        </div>\n        \n        <Dialog open={showNewMessage} onOpenChange={setShowNewMessage}>\n          <DialogTrigger asChild>\n            <Button size=\"sm\">\n              <Send className=\"h-4 w-4 mr-2\" />\n              New Message\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Send New Message</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"messageSubject\">Subject</Label>\n                <Input\n                  id=\"messageSubject\"\n                  value={newMessageData.subject}\n                  onChange={(e) => setNewMessageData(prev => ({ ...prev, subject: e.target.value }))}\n                  placeholder=\"Message subject\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"messageContent\">Message</Label>\n                <Textarea\n                  id=\"messageContent\"\n                  value={newMessageData.content}\n                  onChange={(e) => setNewMessageData(prev => ({ ...prev, content: e.target.value }))}\n                  placeholder=\"Type your message here...\"\n                  rows={4}\n                />\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setShowNewMessage(false)}>\n                Cancel\n              </Button>\n              <Button \n                onClick={handleSendMessage}\n                disabled={!newMessageData.subject || !newMessageData.content || sendMessageMutation.isPending}\n              >\n                {sendMessageMutation.isPending ? 'Sending...' : 'Send Message'}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Messages List */}\n      <ScrollArea className=\"h-[600px]\">\n        <div className=\"space-y-2\">\n          {messages.map((message: Message) => (\n            <Card \n              key={message.id} \n              className={`cursor-pointer hover:bg-muted/50 transition-colors ${\n                !message.isRead && message.toUserId === user?.id ? 'ring-2 ring-blue-200' : ''\n              }`}\n              onClick={() => handleOpenMessage(message)}\n            >\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <User className=\"h-4 w-4\" />\n                      <span className=\"font-medium text-sm\">\n                        {message.fromUserId === user?.id ? 'You' : 'Member'}\n                      </span>\n                      {!message.isRead && message.toUserId === user?.id && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">New</Badge>\n                      )}\n                    </div>\n                    <h4 className=\"font-semibold text-sm mb-1\">{message.subject}</h4>\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                      {message.content}\n                    </p>\n                  </div>\n                  <div className=\"flex flex-col items-end gap-2\">\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                      <Clock className=\"h-3 w-3\" />\n                      {message.createdAt && format(new Date(message.createdAt), 'MMM dd, HH:mm')}\n                    </div>\n                    {message.attachmentUrls && message.attachmentUrls.length > 0 && (\n                      <Paperclip className=\"h-3 w-3 text-muted-foreground\" />\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n\n          {messages.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <MessageCircle className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>No messages yet</p>\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n\n      {/* Message Detail Dialog */}\n      <Dialog open={!!selectedMessage} onOpenChange={() => setSelectedMessage(null)}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <MessageCircle className=\"h-5 w-5\" />\n              {selectedMessage?.subject}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {selectedMessage && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-1\">\n                  <User className=\"h-4 w-4\" />\n                  From: {selectedMessage.fromUserId === user?.id ? 'You' : 'Member'}\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <Clock className=\"h-4 w-4\" />\n                  {selectedMessage.createdAt && format(new Date(selectedMessage.createdAt), 'MMM dd, yyyy HH:mm')}\n                </div>\n              </div>\n              \n              <Separator />\n              \n              <div className=\"prose prose-sm max-w-none\">\n                <p className=\"whitespace-pre-wrap\">{selectedMessage.content}</p>\n              </div>\n\n              {selectedMessage.attachmentUrls && selectedMessage.attachmentUrls.length > 0 && (\n                <div>\n                  <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n                    <Paperclip className=\"h-4 w-4\" />\n                    Attachments\n                  </h4>\n                  <div className=\"space-y-2\">\n                    {selectedMessage.attachmentUrls.map((url, index) => (\n                      <a \n                        key={index} \n                        href={url} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:underline block\"\n                      >\n                        Attachment {index + 1}\n                      </a>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setSelectedMessage(null)}>\n              Close\n            </Button>\n            {selectedMessage && selectedMessage.fromUserId !== user?.id && (\n              <Button onClick={() => handleReply(selectedMessage)}>\n                <Reply className=\"h-4 w-4 mr-2\" />\n                Reply\n              </Button>\n            )}\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":10930},"client/src/pages/EnhancedModeratorPanel.tsx":{"content":"import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Separator } from '@/components/ui/separator';\nimport { Progress } from '@/components/ui/progress';\nimport ModeratorPostCreator from '@/components/ModeratorPostCreator';\nimport { \n  Shield, \n  Users, \n  TrendingUp, \n  MessageSquare, \n  Settings, \n  Activity, \n  CheckCircle, \n  XCircle, \n  Clock, \n  Eye,\n  BarChart3,\n  UserCheck,\n  AlertTriangle,\n  FileText,\n  Target,\n  Award,\n  PlusCircle,\n  Search,\n  Filter,\n  Edit,\n  Trash2,\n  Calendar,\n  Image,\n  Link2,\n  Star,\n  Bookmark,\n  Menu,\n  X,\n  MessageCircle,\n  FileImage,\n  ChevronRight,\n  Home,\n  Flag,\n  Zap,\n  Upload,\n  Wifi,\n  WifiOff\n} from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { format } from 'date-fns';\nimport { apiRequest } from '@/lib/queryClient';\nimport { BrandSelector } from '@/components/BrandSelector';\nimport { EnhancedMissionDialog } from '@/components/EnhancedMissionDialog';\nimport { MessagingSystem } from '@/components/MessagingSystem';\n\ninterface Brand {\n  id: string;\n  name: string;\n  category: string;\n  isIndian: boolean;\n  description?: string;\n}\n\ninterface Mission {\n  id: string;\n  title: string;\n  description: string;\n  category: string;\n  fromBrandIds: string[];\n  toBrandIds: string[];\n  pointsReward: number;\n  startDate: string | null;\n  endDate: string | null;\n  isActive: boolean;\n  createdBy: string;\n  createdAt: string;\n}\n\ninterface MissionSubmission {\n  id: string;\n  userId: string;\n  missionId: string;\n  reason: string;\n  experience: string;\n  financialImpact: string;\n  evidenceUrl: string;\n  status: string;\n  createdAt: string;\n  userName: string;\n  missionTitle: string;\n}\n\ninterface Post {\n  id: string;\n  title: string;\n  content: string;\n  imageUrl?: string;\n  linkUrl?: string;\n  targetAlternatives: string;\n  createdBy: string;\n  createdAt: string;\n  isActive: boolean;\n}\n\nexport default function EnhancedModeratorPanel() {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [showMissionDialog, setShowMissionDialog] = useState(false);\n  const [showPostDialog, setShowPostDialog] = useState(false);\n  const [wsConnected, setWsConnected] = useState(false);\n  const wsRef = useRef<WebSocket | null>(null);\n  \n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    const wsUrl = `${protocol}//${window.location.host}/ws`;\n    \n    let reconnectTimeout: NodeJS.Timeout;\n    \n    const connectWebSocket = () => {\n      try {\n        const ws = new WebSocket(wsUrl);\n        wsRef.current = ws;\n        \n        ws.onopen = () => {\n          console.log('WebSocket connected for moderator panel');\n          setWsConnected(true);\n        };\n        \n        ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log('Real-time update received:', data);\n            \n            // Invalidate relevant queries to refresh data\n            if (data.type === 'update') {\n              queryClient.invalidateQueries();\n            }\n          } catch (error) {\n            console.error('Error parsing WebSocket message:', error);\n          }\n        };\n        \n        ws.onclose = (event) => {\n          console.log('WebSocket disconnected');\n          setWsConnected(false);\n          \n          // Attempt to reconnect after 3 seconds if not a clean close\n          if (!event.wasClean) {\n            reconnectTimeout = setTimeout(connectWebSocket, 3000);\n          }\n        };\n        \n        ws.onerror = (error) => {\n          console.error('WebSocket error:', error);\n          setWsConnected(false);\n        };\n      } catch (error) {\n        console.error('Failed to create WebSocket connection:', error);\n        setWsConnected(false);\n      }\n    };\n    \n    connectWebSocket();\n    \n    return () => {\n      if (reconnectTimeout) {\n        clearTimeout(reconnectTimeout);\n      }\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [queryClient]);\n\n  // Send real-time updates\n  const sendRealtimeUpdate = useCallback((type: string, data: any) => {\n    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify({\n        type,\n        data,\n        source: 'moderator_panel'\n      }));\n    }\n  }, []);\n\n  // Post form state\n  const [newPostData, setNewPostData] = useState({\n    title: '',\n    content: '',\n    imageUrl: '',\n    linkUrl: '',\n    targetAlternatives: '',\n    isActive: true\n  });\n\n  // Queries\n  const { data: missions = [] } = useQuery<Mission[]>({\n    queryKey: ['/api/moderation/missions'],\n  });\n\n  const { data: moderatorPosts = [] } = useQuery<Post[]>({\n    queryKey: ['/api/moderation/posts'],\n  });\n\n  const { data: missionSubmissions = [] } = useQuery<MissionSubmission[]>({\n    queryKey: ['/api/moderation/mission-submissions'],\n  });\n\n  const { data: analytics } = useQuery<any>({\n    queryKey: ['/api/moderation/analytics'],\n  });\n\n  // Create post mutation\n  const createPostMutation = useMutation({\n    mutationFn: (postData: any) => apiRequest('POST', '/api/moderation/posts', postData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/moderation/posts'] });\n      setNewPostData({\n        title: '',\n        content: '',\n        imageUrl: '',\n        linkUrl: '',\n        targetAlternatives: '',\n        isActive: true\n      });\n      setShowPostDialog(false);\n      sendRealtimeUpdate('post_created', { createdBy: user?.id });\n    }\n  });\n\n  const handleCreatePost = () => {\n    if (!newPostData.title || !newPostData.content) return;\n\n    const postPayload = {\n      ...newPostData,\n      createdBy: user?.id\n    };\n\n    createPostMutation.mutate(postPayload);\n  };\n\n  const sidebarItems = [\n    { id: 'dashboard', label: 'Dashboard', icon: BarChart3 },\n    { id: 'content', label: 'Create Content', icon: PlusCircle },\n    { id: 'missions', label: 'Missions', icon: Target },\n    { id: 'submissions', label: 'Mission Submissions', icon: CheckCircle },\n    { id: 'posts', label: 'Posts', icon: FileText },\n    { id: 'messages', label: 'Messages', icon: MessageCircle },\n    { id: 'analytics', label: 'Analytics', icon: TrendingUp },\n    { id: 'settings', label: 'Settings', icon: Settings }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex items-center justify-between px-6 py-4\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n            >\n              <Menu className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <Shield className=\"h-6 w-6 text-blue-600\" />\n              <h1 className=\"text-xl font-bold\">Moderator Panel</h1>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            {/* WebSocket Status */}\n            <div className={`flex items-center gap-2 text-sm ${wsConnected ? 'text-green-600' : 'text-red-600'}`}>\n              {wsConnected ? <Wifi className=\"h-4 w-4\" /> : <WifiOff className=\"h-4 w-4\" />}\n              {wsConnected ? 'Live Updates' : 'Offline'}\n            </div>\n            \n            <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">\n              {user?.role}\n            </Badge>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"flex\">\n        {/* Sidebar */}\n        <aside className={`${sidebarOpen ? 'w-64' : 'w-16'} transition-all duration-300 border-r bg-card h-[calc(100vh-73px)]`}>\n          <div className=\"p-4\">\n            <nav className=\"space-y-2\">\n              {sidebarItems.map((item) => {\n                const Icon = item.icon;\n                return (\n                  <Button\n                    key={item.id}\n                    variant={activeTab === item.id ? \"default\" : \"ghost\"}\n                    className={`w-full justify-start ${!sidebarOpen && 'px-2'}`}\n                    onClick={() => setActiveTab(item.id)}\n                  >\n                    <Icon className=\"h-4 w-4\" />\n                    {sidebarOpen && <span className=\"ml-2\">{item.label}</span>}\n                  </Button>\n                );\n              })}\n            </nav>\n          </div>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 p-6\">\n          {/* Dashboard Tab */}\n          {activeTab === 'dashboard' && (\n            <div className=\"space-y-6\">\n              <h2 className=\"text-2xl font-bold\">Dashboard</h2>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <Card>\n                  <CardContent className=\"flex items-center p-6\">\n                    <Target className=\"h-8 w-8 text-blue-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-muted-foreground\">Active Missions</p>\n                      <p className=\"text-2xl font-bold\">{missions.filter((m: Mission) => m.isActive).length}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n                \n                <Card>\n                  <CardContent className=\"flex items-center p-6\">\n                    <FileText className=\"h-8 w-8 text-green-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-muted-foreground\">Posts Created</p>\n                      <p className=\"text-2xl font-bold\">{moderatorPosts.length}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n                \n                <Card>\n                  <CardContent className=\"flex items-center p-6\">\n                    <MessageCircle className=\"h-8 w-8 text-purple-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-muted-foreground\">Messages</p>\n                      <p className=\"text-2xl font-bold\">-</p>\n                    </div>\n                  </CardContent>\n                </Card>\n                \n                <Card>\n                  <CardContent className=\"flex items-center p-6\">\n                    <TrendingUp className=\"h-8 w-8 text-orange-600\" />\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-muted-foreground\">Platform Growth</p>\n                      <p className=\"text-2xl font-bold\">+12%</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Recent Activities</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <Target className=\"h-4 w-4 text-blue-600\" />\n                        <span className=\"text-sm\">New mission created</span>\n                        <span className=\"text-xs text-muted-foreground ml-auto\">2 hours ago</span>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <MessageCircle className=\"h-4 w-4 text-purple-600\" />\n                        <span className=\"text-sm\">Member message received</span>\n                        <span className=\"text-xs text-muted-foreground ml-auto\">4 hours ago</span>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <FileText className=\"h-4 w-4 text-green-600\" />\n                        <span className=\"text-sm\">Post published</span>\n                        <span className=\"text-xs text-muted-foreground ml-auto\">1 day ago</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Quick Actions</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      <Button className=\"w-full justify-start\" onClick={() => setShowMissionDialog(true)}>\n                        <Target className=\"h-4 w-4 mr-2\" />\n                        Create New Mission\n                      </Button>\n                      <Button className=\"w-full justify-start\" variant=\"outline\" onClick={() => setActiveTab('content')}>\n                        <PlusCircle className=\"h-4 w-4 mr-2\" />\n                        Create Community Content\n                      </Button>\n                      <Button className=\"w-full justify-start\" variant=\"outline\" onClick={() => setActiveTab('messages')}>\n                        <MessageCircle className=\"h-4 w-4 mr-2\" />\n                        Check Messages\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          )}\n\n          {/* Content Creation Tab */}\n          {activeTab === 'content' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-2xl font-bold\">Create Community Content</h2>\n                  <p className=\"text-muted-foreground\">\n                    Create engaging posts to encourage community participation and brand switching\n                  </p>\n                </div>\n              </div>\n\n              <ModeratorPostCreator \n                onPostCreated={() => {\n                  // Refresh data after post creation\n                  queryClient.invalidateQueries({ queryKey: ['/api/posts'] });\n                  queryClient.invalidateQueries({ queryKey: ['/api/feed'] });\n                  sendRealtimeUpdate('content_created', { createdBy: user?.id });\n                }}\n              />\n            </div>\n          )}\n\n          {/* Missions Tab */}\n          {activeTab === 'missions' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-2xl font-bold\">Missions Management</h2>\n                <Button onClick={() => setShowMissionDialog(true)}>\n                  <PlusCircle className=\"h-4 w-4 mr-2\" />\n                  Create Mission\n                </Button>\n              </div>\n\n              <div className=\"grid gap-4\">\n                {missions.map((mission: Mission) => (\n                  <Card key={mission.id}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <h3 className=\"font-semibold\">{mission.title}</h3>\n                            <Badge variant={mission.isActive ? \"default\" : \"secondary\"}>\n                              {mission.isActive ? 'Active' : 'Inactive'}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground mb-3\">{mission.description}</p>\n                          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                            <span className=\"flex items-center gap-1\">\n                              <Award className=\"h-3 w-3\" />\n                              {mission.pointsReward} points\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-3 w-3\" />\n                              {mission.startDate ? format(new Date(mission.startDate), 'MMM dd') : 'No start date'}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <Target className=\"h-3 w-3\" />\n                              {mission.category}\n                            </span>\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Edit className=\"h-3 w-3\" />\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Mission Submissions Tab */}\n          {activeTab === 'submissions' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-2xl font-bold\">Mission Submissions</h2>\n                <Badge variant=\"outline\">\n                  {missionSubmissions.length} pending\n                </Badge>\n              </div>\n\n              <div className=\"grid gap-4\">\n                {missionSubmissions.map((submission: MissionSubmission) => (\n                  <Card key={submission.id}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <h3 className=\"font-semibold\">{submission.missionTitle}</h3>\n                              <Badge variant=\"secondary\">\n                                {submission.status}\n                              </Badge>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground\">\n                              Submitted by: {submission.userName}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground\">\n                              {format(new Date(submission.createdAt), 'MMM dd, yyyy at h:mm a')}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-3\">\n                          <div>\n                            <Label className=\"text-sm font-medium\">Reason for Switch:</Label>\n                            <p className=\"text-sm mt-1\">{submission.reason}</p>\n                          </div>\n                          \n                          <div>\n                            <Label className=\"text-sm font-medium\">Experience:</Label>\n                            <p className=\"text-sm mt-1\">{submission.experience}</p>\n                          </div>\n                          \n                          {submission.financialImpact && (\n                            <div>\n                              <Label className=\"text-sm font-medium\">Financial Impact:</Label>\n                              <p className=\"text-sm mt-1\">{submission.financialImpact}</p>\n                            </div>\n                          )}\n                          \n                          {submission.evidenceUrl && (\n                            <div>\n                              <Label className=\"text-sm font-medium\">Evidence:</Label>\n                              <img \n                                src={submission.evidenceUrl} \n                                alt=\"Evidence\" \n                                className=\"mt-1 w-20 h-20 object-cover rounded border\"\n                              />\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex gap-2 pt-4 border-t\">\n                          <Button \n                            size=\"sm\" \n                            className=\"bg-green-600 hover:bg-green-700\"\n                            onClick={() => {\n                              // Verify submission as approved\n                              apiRequest('POST', `/api/switch-logs/${submission.id}/verify`, {\n                                approved: true,\n                                feedback: 'Mission submission approved'\n                              }).then(() => {\n                                queryClient.invalidateQueries({ queryKey: ['/api/moderation/mission-submissions'] });\n                              });\n                            }}\n                          >\n                            <CheckCircle className=\"h-4 w-4 mr-1\" />\n                            Approve\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"destructive\"\n                            onClick={() => {\n                              // Verify submission as rejected\n                              apiRequest('POST', `/api/switch-logs/${submission.id}/verify`, {\n                                approved: false,\n                                feedback: 'Mission submission rejected'\n                              }).then(() => {\n                                queryClient.invalidateQueries({ queryKey: ['/api/moderation/mission-submissions'] });\n                              });\n                            }}\n                          >\n                            <XCircle className=\"h-4 w-4 mr-1\" />\n                            Reject\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n                \n                {missionSubmissions.length === 0 && (\n                  <Card>\n                    <CardContent className=\"p-8 text-center\">\n                      <CheckCircle className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                      <h3 className=\"text-lg font-medium mb-2\">No pending submissions</h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        All mission submissions have been reviewed.\n                      </p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Posts Tab */}\n          {activeTab === 'posts' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-2xl font-bold\">Posts Management</h2>\n                <Button onClick={() => setShowPostDialog(true)}>\n                  <PlusCircle className=\"h-4 w-4 mr-2\" />\n                  Create Post\n                </Button>\n              </div>\n\n              <div className=\"grid gap-4\">\n                {moderatorPosts.map((post: Post) => (\n                  <Card key={post.id}>\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <h3 className=\"font-semibold\">{post.title}</h3>\n                            <Badge variant={post.isActive ? \"default\" : \"secondary\"}>\n                              {post.isActive ? 'Published' : 'Draft'}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground mb-3 line-clamp-2\">{post.content}</p>\n                          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                            <span className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-3 w-3\" />\n                              {format(new Date(post.createdAt), 'MMM dd, yyyy')}\n                            </span>\n                            {post.imageUrl && (\n                              <span className=\"flex items-center gap-1\">\n                                <Image className=\"h-3 w-3\" />\n                                Has Image\n                              </span>\n                            )}\n                            {post.linkUrl && (\n                              <span className=\"flex items-center gap-1\">\n                                <Link2 className=\"h-3 w-3\" />\n                                Has Link\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Edit className=\"h-3 w-3\" />\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Messages Tab */}\n          {activeTab === 'messages' && (\n            <div className=\"space-y-6\">\n              <h2 className=\"text-2xl font-bold\">Messages</h2>\n              <MessagingSystem />\n            </div>\n          )}\n\n          {/* Analytics Tab */}\n          {activeTab === 'analytics' && (\n            <div className=\"space-y-6\">\n              <h2 className=\"text-2xl font-bold\">Analytics</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Users className=\"h-5 w-5\" />\n                      Member Engagement\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <div className=\"flex justify-between mb-1\">\n                          <span className=\"text-sm\">Mission Completion</span>\n                          <span className=\"text-sm font-medium\">78%</span>\n                        </div>\n                        <Progress value={78} />\n                      </div>\n                      <div>\n                        <div className=\"flex justify-between mb-1\">\n                          <span className=\"text-sm\">Switch Logging</span>\n                          <span className=\"text-sm font-medium\">65%</span>\n                        </div>\n                        <Progress value={65} />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Target className=\"h-5 w-5\" />\n                      Mission Performance\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Total Missions</span>\n                        <span className=\"font-medium\">{missions.length}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Active Missions</span>\n                        <span className=\"font-medium\">{missions.filter((m: Mission) => m.isActive).length}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Completion Rate</span>\n                        <span className=\"font-medium text-green-600\">89%</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <MessageCircle className=\"h-5 w-5\" />\n                      Communication\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Messages Today</span>\n                        <span className=\"font-medium\">12</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Response Time</span>\n                        <span className=\"font-medium\">2.3 hours</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm\">Member Satisfaction</span>\n                        <span className=\"font-medium text-green-600\">94%</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n\n      {/* Enhanced Mission Dialog */}\n      <EnhancedMissionDialog\n        open={showMissionDialog}\n        onOpenChange={setShowMissionDialog}\n        onMissionCreated={() => sendRealtimeUpdate('mission_created', { createdBy: user?.id })}\n      />\n\n      {/* Post Creation Dialog */}\n      <Dialog open={showPostDialog} onOpenChange={setShowPostDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <FileText className=\"h-5 w-5\" />\n              Create New Post\n            </DialogTitle>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"postTitle\">Title *</Label>\n              <Input\n                id=\"postTitle\"\n                value={newPostData.title}\n                onChange={(e) => setNewPostData(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Enter post title\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"postContent\">Content *</Label>\n              <Textarea\n                id=\"postContent\"\n                value={newPostData.content}\n                onChange={(e) => setNewPostData(prev => ({ ...prev, content: e.target.value }))}\n                placeholder=\"Write your post content...\"\n                rows={4}\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"targetAlternatives\">Target Alternatives</Label>\n              <Input\n                id=\"targetAlternatives\"\n                value={newPostData.targetAlternatives}\n                onChange={(e) => setNewPostData(prev => ({ ...prev, targetAlternatives: e.target.value }))}\n                placeholder=\"e.g., Indian brands to recommend\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"imageUrl\">Image URL (Optional)</Label>\n                <Input\n                  id=\"imageUrl\"\n                  value={newPostData.imageUrl}\n                  onChange={(e) => setNewPostData(prev => ({ ...prev, imageUrl: e.target.value }))}\n                  placeholder=\"https://...\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"linkUrl\">Link URL (Optional)</Label>\n                <Input\n                  id=\"linkUrl\"\n                  value={newPostData.linkUrl}\n                  onChange={(e) => setNewPostData(prev => ({ ...prev, linkUrl: e.target.value }))}\n                  placeholder=\"https://...\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"isActive\"\n                checked={newPostData.isActive}\n                onCheckedChange={(checked) => setNewPostData(prev => ({ ...prev, isActive: checked }))}\n              />\n              <Label htmlFor=\"isActive\">Publish immediately</Label>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowPostDialog(false)}>\n              Cancel\n            </Button>\n            <Button \n              onClick={handleCreatePost}\n              disabled={!newPostData.title || !newPostData.content || createPostMutation.isPending}\n            >\n              {createPostMutation.isPending ? 'Creating...' : 'Create Post'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":33985},"client/src/pages/EnhancedMemberDashboard.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport InteractivePostCard from \"@/components/InteractivePostCard\";\nimport { \n  Search, Filter, TrendingUp, Award, Users, MessageSquare, \n  CheckCircle, XCircle, Clock, Plus, Star, Calendar,\n  Zap, Target, Trophy, Heart, Eye, EyeOff, ChevronRight,\n  Tag, FolderOpen, Globe, Lock, MapPin, Sparkles\n} from \"lucide-react\";\n\ninterface SwitchLog {\n  id: string;\n  userId: string;\n  fromBrandId: string;\n  toBrandId: string;\n  category: string;\n  reason: string;\n  evidenceUrl?: string;\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\n  moderatorNotes?: string;\n  createdAt: string;\n  approvedAt?: string;\n  categoryId?: string;\n  points?: number;\n  isPublic?: boolean;\n  tags?: string[];\n}\n\ninterface Category {\n  id: string;\n  name: string;\n  description: string;\n  color: string;\n  isActive: boolean;\n  createdAt: string;\n}\n\ninterface Tag {\n  id: string;\n  name: string;\n  color: string;\n  description: string;\n  isActive: boolean;\n  usageCount: number;\n  createdAt: string;\n}\n\ninterface Community {\n  id: string;\n  name: string;\n  description: string;\n  coverImageUrl?: string;\n  visibility: 'PUBLIC' | 'PRIVATE' | 'INVITE_ONLY';\n  memberCount: number;\n  isActive: boolean;\n  createdBy?: string;\n  createdAt: string;\n}\n\ninterface Mission {\n  id: string;\n  title: string;\n  description: string;\n  targetCategory: string;\n  pointsReward: number;\n  status: 'ACTIVE' | 'DRAFT' | 'COMPLETED' | 'EXPIRED';\n  endDate?: string;\n  isActive: boolean;\n  categoryId?: string;\n  communityId?: string;\n  impact?: string;\n  financialValue?: number;\n  imageUrls?: string[];\n}\n\nexport default function EnhancedMemberDashboard() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\n  const [tagFilter, setTagFilter] = useState<string>(\"all\");\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  // Data fetching queries\n  const { data: switchLogs = [], isLoading: switchLogsLoading } = useQuery<SwitchLog[]>({\n    queryKey: ['/api/switch-logs', user?.id],\n    enabled: !!user?.id\n  });\n\n  const { data: categories = [], isLoading: categoriesLoading } = useQuery<Category[]>({\n    queryKey: ['/api/categories']\n  });\n\n  const { data: tags = [], isLoading: tagsLoading } = useQuery<Tag[]>({\n    queryKey: ['/api/tags']\n  });\n\n  const { data: communities = [], isLoading: communitiesLoading } = useQuery<Community[]>({\n    queryKey: ['/api/communities']\n  });\n\n  const { data: missions = [], isLoading: missionsLoading } = useQuery<Mission[]>({\n    queryKey: ['/api/missions'],\n    select: (data: Mission[]) => data?.filter((mission: Mission) => mission.isActive) || []\n  });\n\n  const { data: userStats } = useQuery({\n    queryKey: ['/api/users', user?.id, 'stats'],\n    enabled: !!user?.id\n  });\n\n  const { data: feedPosts } = useQuery<any>({\n    queryKey: ['/api/posts']\n  });\n\n  // Filter switch logs based on search and filters\n  const filteredSwitchLogs = switchLogs.filter((log: SwitchLog) => {\n    const matchesSearch = !searchTerm || \n      (log.fromBrandId && log.fromBrandId.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (log.toBrandId && log.toBrandId.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      log.reason?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === \"all\" || log.status === statusFilter;\n    const matchesCategory = categoryFilter === \"all\" || log.categoryId === categoryFilter;\n    \n    return matchesSearch && matchesStatus && matchesCategory;\n  });\n\n  // Calculate statistics\n  const approvedSwitches = switchLogs.filter((log: SwitchLog) => log.status === 'APPROVED');\n  const pendingSwitches = switchLogs.filter((log: SwitchLog) => log.status === 'PENDING');\n  const totalPoints = approvedSwitches.reduce((sum: number, log: SwitchLog) => sum + (log.points || 0), 0);\n  const totalImpact = approvedSwitches.length * 1000; // Simple calculation for demonstration\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'APPROVED': return 'bg-green-100 text-green-800 border-green-200';\n      case 'REJECTED': return 'bg-red-100 text-red-800 border-red-200';\n      case 'PENDING': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'APPROVED': return <CheckCircle className=\"h-4 w-4\" />;\n      case 'REJECTED': return <XCircle className=\"h-4 w-4\" />;\n      case 'PENDING': return <Clock className=\"h-4 w-4\" />;\n      default: return null;\n    }\n  };\n\n  const getCategoryColor = (categoryId: string) => {\n    const category = categories.find((cat: Category) => cat.id === categoryId);\n    return category?.color || '#3B82F6';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n                Welcome back, {user?.handle}! ðŸ‡®ðŸ‡³\n              </h1>\n              <p className=\"text-gray-600 dark:text-gray-300 mt-2\">\n                Your journey towards supporting Indian brands\n              </p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <Badge variant=\"outline\" className=\"text-orange-600 border-orange-300\">\n                <Sparkles className=\"h-4 w-4 mr-1\" />\n                {user?.points || 0} Points\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-green-600 border-green-300\">\n                <Trophy className=\"h-4 w-4 mr-1\" />\n                Level {Math.floor((user?.points || 0) / 100) + 1}\n              </Badge>\n            </div>\n          </div>\n        </div>\n\n        {/* Statistics Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <Card className=\"border-l-4 border-l-blue-500\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Switches</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{switchLogs.length}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {approvedSwitches.length} approved\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-l-4 border-l-green-500\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Points Earned</CardTitle>\n              <Target className=\"h-4 w-4 text-green-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{totalPoints.toLocaleString()}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                From {approvedSwitches.length} switches\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-l-4 border-l-yellow-500\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Pending Reviews</CardTitle>\n              <Clock className=\"h-4 w-4 text-yellow-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{pendingSwitches.length}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                Awaiting approval\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border-l-4 border-l-purple-500\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Community Impact</CardTitle>\n              <Users className=\"h-4 w-4 text-purple-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">â‚¹{totalImpact.toLocaleString()}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                Economic contribution\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Main Content Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-6\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"feed\">Feed</TabsTrigger>\n            <TabsTrigger value=\"switch-logs\">Switch Logs</TabsTrigger>\n            <TabsTrigger value=\"missions\">Missions</TabsTrigger>\n            <TabsTrigger value=\"communities\">Communities</TabsTrigger>\n            <TabsTrigger value=\"insights\">Insights</TabsTrigger>\n          </TabsList>\n\n          {/* Overview Tab */}\n          <TabsContent value=\"overview\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              \n              {/* Recent Switch Logs */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <TrendingUp className=\"h-5 w-5\" />\n                    Recent Switch Logs\n                  </CardTitle>\n                  <CardDescription>Your latest brand switching activities</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ScrollArea className=\"h-80\">\n                    <div className=\"space-y-4\">\n                      {switchLogs.slice(0, 5).map((log: SwitchLog) => (\n                        <div key={log.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <Badge \n                                variant=\"outline\" \n                                className={getStatusColor(log.status)}\n                              >\n                                {getStatusIcon(log.status)}\n                                <span className=\"ml-1\">{log.status}</span>\n                              </Badge>\n                            </div>\n                            <p className=\"text-sm font-medium\">\n                              {log.fromBrandId} â†’ {log.toBrandId}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground truncate\">\n                              {log.reason}\n                            </p>\n                            {log.points && (\n                              <p className=\"text-xs text-green-600 font-medium\">\n                                Points: {log.points}\n                              </p>\n                            )}\n                          </div>\n                          <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                        </div>\n                      ))}\n                    </div>\n                  </ScrollArea>\n                </CardContent>\n              </Card>\n\n              {/* Available Missions */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Zap className=\"h-5 w-5\" />\n                    Available Missions\n                  </CardTitle>\n                  <CardDescription>Complete missions to earn extra points</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ScrollArea className=\"h-80\">\n                    <div className=\"space-y-4\">\n                      {missions.slice(0, 4).map((mission: Mission) => (\n                        <div key={mission.id} className=\"p-3 border rounded-lg hover:shadow-md transition-shadow\">\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <h4 className=\"font-medium text-sm\">{mission.title}</h4>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              +{mission.pointsReward} pts\n                            </Badge>\n                          </div>\n                          <p className=\"text-xs text-muted-foreground mb-2\">\n                            {mission.description}\n                          </p>\n                          <div className=\"flex items-center justify-between\">\n                            <Badge \n                              variant=\"outline\" \n                              style={{ \n                                backgroundColor: `${getCategoryColor(mission.categoryId || '')}15`,\n                                borderColor: getCategoryColor(mission.categoryId || ''),\n                                color: getCategoryColor(mission.categoryId || '')\n                              }}\n                            >\n                              {mission.targetCategory}\n                            </Badge>\n                            <span className=\"text-xs text-muted-foreground\">\n                              {mission.status}\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </ScrollArea>\n                </CardContent>\n              </Card>\n\n            </div>\n          </TabsContent>\n\n          {/* Feed Tab */}\n          <TabsContent value=\"feed\">\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-2xl font-bold\">Community Feed</h2>\n                  <p className=\"text-muted-foreground\">\n                    Latest updates from moderators and community challenges\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Button variant=\"outline\" size=\"sm\">\n                    <Filter className=\"h-4 w-4 mr-2\" />\n                    Filter\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"space-y-6\">\n                {feedPosts?.posts?.length > 0 ? (\n                  feedPosts.posts.map((post: any) => (\n                    <InteractivePostCard\n                      key={post.id}\n                      post={post}\n                      onAction={(actionType, postId) => {\n                        switch (actionType) {\n                          case 'switch_log_created':\n                            queryClient.invalidateQueries({ queryKey: ['/api/switch-logs'] });\n                            toast({\n                              title: \"Switch Log Created!\",\n                              description: \"Your brand switch has been recorded. Points will be awarded after review.\",\n                            });\n                            break;\n                          case 'mission_started':\n                            // Navigate to mission or show mission details\n                            toast({\n                              title: \"Mission Started!\",\n                              description: \"You've started a new mission. Complete it to earn points.\",\n                            });\n                            break;\n                          case 'poll_voted':\n                            // Handle poll voting\n                            toast({\n                              title: \"Vote Recorded\",\n                              description: \"Thank you for participating in the poll!\",\n                            });\n                            break;\n                        }\n                      }}\n                    />\n                  ))\n                ) : (\n                  <Card className=\"text-center py-12\">\n                    <CardContent>\n                      <MessageSquare className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                      <h3 className=\"text-lg font-medium mb-2\">No posts yet</h3>\n                      <p className=\"text-muted-foreground\">\n                        Check back later for updates from moderators and community challenges.\n                      </p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </div>\n          </TabsContent>\n\n          {/* Switch Logs Tab */}\n          <TabsContent value=\"switch-logs\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Switch Log Management</CardTitle>\n                <CardDescription>\n                  Track and manage all your brand switching activities\n                </CardDescription>\n                \n                {/* Filters */}\n                <div className=\"flex flex-col sm:flex-row gap-4 pt-4\">\n                  <div className=\"relative flex-1\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                    <Input\n                      placeholder=\"Search switches...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-10\"\n                    />\n                  </div>\n                  \n                  <Select value={statusFilter} onValueChange={setStatusFilter}>\n                    <SelectTrigger className=\"w-full sm:w-[150px]\">\n                      <SelectValue placeholder=\"Status\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Status</SelectItem>\n                      <SelectItem value=\"PENDING\">Pending</SelectItem>\n                      <SelectItem value=\"APPROVED\">Approved</SelectItem>\n                      <SelectItem value=\"REJECTED\">Rejected</SelectItem>\n                    </SelectContent>\n                  </Select>\n\n                  <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                    <SelectTrigger className=\"w-full sm:w-[150px]\">\n                      <SelectValue placeholder=\"Category\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Categories</SelectItem>\n                      {categories.map((category: Category) => (\n                        <SelectItem key={category.id} value={category.id}>\n                          {category.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardHeader>\n              \n              <CardContent>\n                <ScrollArea className=\"h-96\">\n                  <div className=\"space-y-4\">\n                    {filteredSwitchLogs.map((log: SwitchLog) => (\n                      <div key={log.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                              <Badge className={getStatusColor(log.status)}>\n                                {getStatusIcon(log.status)}\n                                <span className=\"ml-1\">{log.status}</span>\n                              </Badge>\n                              {log.categoryId && (\n                                <Badge \n                                  variant=\"outline\"\n                                  style={{ \n                                    backgroundColor: `${getCategoryColor(log.categoryId)}15`,\n                                    borderColor: getCategoryColor(log.categoryId),\n                                    color: getCategoryColor(log.categoryId)\n                                  }}\n                                >\n                                  <FolderOpen className=\"h-3 w-3 mr-1\" />\n                                  {categories.find((cat: Category) => cat.id === log.categoryId)?.name || log.category}\n                                </Badge>\n                              )}\n                            </div>\n                            \n                            <h3 className=\"font-semibold text-lg mb-1\">\n                              {log.fromBrandId} â†’ {log.toBrandId}\n                            </h3>\n                            \n                            <p className=\"text-muted-foreground mb-3\">{log.reason}</p>\n                            \n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                              {log.points && (\n                                <div>\n                                  <span className=\"text-muted-foreground\">Points:</span>\n                                  <p className=\"font-medium text-green-600\">{log.points}</p>\n                                </div>\n                              )}\n                              {log.isPublic !== undefined && (\n                                <div>\n                                  <span className=\"text-muted-foreground\">Visibility:</span>\n                                  <p className=\"font-medium\">{log.isPublic ? 'Public' : 'Private'}</p>\n                                </div>\n                              )}\n                              {log.tags && log.tags.length > 0 && (\n                                <div>\n                                  <span className=\"text-muted-foreground\">Tags:</span>\n                                  <p className=\"font-medium\">{log.tags.join(', ')}</p>\n                                </div>\n                              )}\n                              <div>\n                                <span className=\"text-muted-foreground\">Date:</span>\n                                <p className=\"font-medium\">{new Date(log.createdAt).toLocaleDateString()}</p>\n                              </div>\n                            </div>\n\n                            {log.moderatorNotes && (\n                              <div className=\"mt-3 p-2 bg-gray-50 dark:bg-gray-800 rounded\">\n                                <span className=\"text-xs text-muted-foreground\">Moderator Notes:</span>\n                                <p className=\"text-sm\">{log.moderatorNotes}</p>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                    \n                    {filteredSwitchLogs.length === 0 && (\n                      <div className=\"text-center py-12\">\n                        <TrendingUp className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                        <h3 className=\"text-lg font-medium mb-2\">No switch logs found</h3>\n                        <p className=\"text-muted-foreground\">\n                          {searchTerm || statusFilter !== \"all\" || categoryFilter !== \"all\" \n                            ? \"Try adjusting your filters\" \n                            : \"Start your journey by logging your first brand switch\"}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Missions Tab */}\n          <TabsContent value=\"missions\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {missions.map((mission: Mission) => (\n                <Card key={mission.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader>\n                    <div className=\"flex items-start justify-between\">\n                      <CardTitle className=\"text-lg\">{mission.title}</CardTitle>\n                      <Badge variant=\"secondary\">+{mission.pointsReward} pts</Badge>\n                    </div>\n                    <CardDescription>{mission.description}</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Category:</span>\n                        <Badge \n                          variant=\"outline\"\n                          style={{ \n                            backgroundColor: `${getCategoryColor(mission.categoryId || '')}15`,\n                            borderColor: getCategoryColor(mission.categoryId || ''),\n                            color: getCategoryColor(mission.categoryId || '')\n                          }}\n                        >\n                          {mission.targetCategory}\n                        </Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Status:</span>\n                        <span className=\"font-medium\">{mission.status}</span>\n                      </div>\n\n                      {mission.financialValue && (\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Value:</span>\n                          <span className=\"font-medium\">â‚¹{mission.financialValue.toLocaleString()}</span>\n                        </div>\n                      )}\n\n                      {mission.endDate && (\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">End Date:</span>\n                          <span className=\"font-medium\">{new Date(mission.endDate).toLocaleDateString()}</span>\n                        </div>\n                      )}\n\n                      <Button className=\"w-full mt-4\" variant=\"outline\">\n                        Start Mission\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          {/* Communities Tab */}\n          <TabsContent value=\"communities\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {communities.map((community: Community) => (\n                <Card key={community.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader>\n                    <div className=\"flex items-start justify-between\">\n                      <CardTitle className=\"text-lg\">{community.name}</CardTitle>\n                      <div className=\"flex items-center gap-1\">\n                        {community.visibility === 'PUBLIC' ? (\n                          <Globe className=\"h-4 w-4 text-green-600\" />\n                        ) : (\n                          <Lock className=\"h-4 w-4 text-gray-600\" />\n                        )}\n                        <Badge variant=\"outline\">\n                          <Users className=\"h-3 w-3 mr-1\" />\n                          {community.memberCount}\n                        </Badge>\n                      </div>\n                    </div>\n                    <CardDescription>{community.description}</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Visibility:</span>\n                        <Badge variant={community.visibility === 'PUBLIC' ? 'default' : 'secondary'}>\n                          {community.visibility}\n                        </Badge>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground\">Created:</span>\n                        <span className=\"font-medium\">{new Date(community.createdAt).toLocaleDateString()}</span>\n                      </div>\n\n                      <Button className=\"w-full mt-4\">\n                        Join Community\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          {/* Insights Tab */}\n          <TabsContent value=\"insights\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              \n              {/* Categories Overview */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <FolderOpen className=\"h-5 w-5\" />\n                    Category Insights\n                  </CardTitle>\n                  <CardDescription>Your switching patterns by category</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {categories.map((category: Category) => {\n                      const categoryLogs = switchLogs.filter((log: SwitchLog) => log.categoryId === category.id);\n                      const percentage = switchLogs.length > 0 ? (categoryLogs.length / switchLogs.length) * 100 : 0;\n                      \n                      return (\n                        <div key={category.id} className=\"space-y-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2\">\n                              <div \n                                className=\"w-3 h-3 rounded-full\"\n                                style={{ backgroundColor: category.color }}\n                              />\n                              <span className=\"font-medium\">{category.name}</span>\n                            </div>\n                            <span className=\"text-sm text-muted-foreground\">\n                              {categoryLogs.length} switches\n                            </span>\n                          </div>\n                          <Progress value={percentage} className=\"h-2\" />\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Popular Tags */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Tag className=\"h-5 w-5\" />\n                    Popular Tags\n                  </CardTitle>\n                  <CardDescription>Trending tags in the community</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {tags\n                      .sort((a: Tag, b: Tag) => b.usageCount - a.usageCount)\n                      .slice(0, 12)\n                      .map((tag: Tag) => (\n                        <Badge \n                          key={tag.id} \n                          variant=\"outline\"\n                          style={{\n                            backgroundColor: `${tag.color}15`,\n                            borderColor: tag.color,\n                            color: tag.color\n                          }}\n                          className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                        >\n                          #{tag.name}\n                          <span className=\"ml-1 text-xs\">({tag.usageCount})</span>\n                        </Badge>\n                      ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n            </div>\n          </TabsContent>\n\n        </Tabs>\n      </div>\n    </div>\n  );\n}","size_bytes":33172},"client/src/components/InteractivePostCard.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Target, Zap, MessageSquare, CheckCircle, Heart, Share2, \n  ArrowRight, TrendingUp, Users, Calendar, Pin, ExternalLink,\n  Image as ImageIcon, Tag, Clock\n} from \"lucide-react\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface InteractivePostCardProps {\n  post: {\n    id: string;\n    postType: string;\n    title?: string;\n    content: string;\n    categoryId?: string;\n    communityId?: string;\n    missionId?: string;\n    targetBrandFrom?: string;\n    targetBrandTo?: string;\n    actionButtonText?: string;\n    actionButtonUrl?: string;\n    imageUrl?: string;\n    isPinned?: boolean;\n    expiresAt?: string;\n    createdAt: string;\n    author?: {\n      id: string;\n      handle: string;\n      avatar?: string;\n      role: string;\n    };\n    category?: {\n      id: string;\n      name: string;\n      color: string;\n    };\n    community?: {\n      id: string;\n      name: string;\n      visibility: string;\n    };\n    mission?: {\n      id: string;\n      title: string;\n      pointsReward: number;\n    };\n    _count?: {\n      reactions: number;\n      comments: number;\n    };\n  };\n  onAction?: (actionType: string, postId: string) => void;\n}\n\nexport function InteractivePostCard({ post, onAction }: InteractivePostCardProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showSwitchLogDialog, setShowSwitchLogDialog] = useState(false);\n  const [isLiked, setIsLiked] = useState(false);\n\n  // Like post mutation\n  const likeMutation = useMutation({\n    mutationFn: (postId: string) => apiRequest(`/api/posts/${postId}/reactions`, 'POST', { \n      type: 'LIKE',\n      userId: 'current-user-id' // This should come from auth context\n    }),\n    onSuccess: () => {\n      setIsLiked(!isLiked);\n      queryClient.invalidateQueries({ queryKey: ['/api/feed'] });\n    }\n  });\n\n  // Create switch log from post interaction\n  const createSwitchLogMutation = useMutation({\n    mutationFn: (data: any) => apiRequest('/api/switch-logs/from-post', 'POST', data),\n    onSuccess: () => {\n      toast({\n        title: \"Switch Log Created!\",\n        description: \"Your brand switch has been logged successfully. Points will be awarded after review.\",\n      });\n      setShowSwitchLogDialog(false);\n      onAction?.('switch_log_created', post.id);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create switch log. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const getPostTypeInfo = (type: string) => {\n    switch (type) {\n      case \"SWITCH_LOG_PROMPT\":\n        return {\n          icon: <Target className=\"h-4 w-4\" />,\n          color: \"text-orange-600\",\n          bgColor: \"bg-orange-50 dark:bg-orange-950\",\n          borderColor: \"border-orange-200 dark:border-orange-800\",\n          label: \"Switch Challenge\"\n        };\n      case \"MISSION_PROMPT\":\n        return {\n          icon: <Zap className=\"h-4 w-4\" />,\n          color: \"text-blue-600\",\n          bgColor: \"bg-blue-50 dark:bg-blue-950\",\n          borderColor: \"border-blue-200 dark:border-blue-800\",\n          label: \"Mission\"\n        };\n      case \"ANNOUNCEMENT\":\n        return {\n          icon: <MessageSquare className=\"h-4 w-4\" />,\n          color: \"text-purple-600\",\n          bgColor: \"bg-purple-50 dark:bg-purple-950\",\n          borderColor: \"border-purple-200 dark:border-purple-800\",\n          label: \"Announcement\"\n        };\n      case \"POLL\":\n        return {\n          icon: <CheckCircle className=\"h-4 w-4\" />,\n          color: \"text-green-600\",\n          bgColor: \"bg-green-50 dark:bg-green-950\",\n          borderColor: \"border-green-200 dark:border-green-800\",\n          label: \"Poll\"\n        };\n      default:\n        return {\n          icon: <MessageSquare className=\"h-4 w-4\" />,\n          color: \"text-gray-600\",\n          bgColor: \"bg-gray-50 dark:bg-gray-950\",\n          borderColor: \"border-gray-200 dark:border-gray-800\",\n          label: \"Post\"\n        };\n    }\n  };\n\n  const handlePrimaryAction = () => {\n    switch (post.postType) {\n      case \"SWITCH_LOG_PROMPT\":\n        setShowSwitchLogDialog(true);\n        break;\n      case \"MISSION_PROMPT\":\n        if (post.missionId) {\n          // Navigate to mission details or start mission\n          onAction?.('mission_started', post.missionId);\n        }\n        break;\n      case \"POLL\":\n        // Handle poll interaction\n        onAction?.('poll_voted', post.id);\n        break;\n      default:\n        if (post.actionButtonUrl) {\n          window.open(post.actionButtonUrl, '_blank');\n        }\n        break;\n    }\n  };\n\n  const postTypeInfo = getPostTypeInfo(post.postType);\n  const isExpired = post.expiresAt && new Date(post.expiresAt) < new Date();\n\n  return (\n    <>\n      <Card className={`${postTypeInfo.borderColor} ${post.isPinned ? 'ring-2 ring-yellow-400' : ''} ${isExpired ? 'opacity-60' : ''}`}>\n        {post.isPinned && (\n          <div className=\"flex items-center gap-2 px-4 py-2 bg-yellow-50 dark:bg-yellow-950 border-b border-yellow-200 dark:border-yellow-800\">\n            <Pin className=\"h-3 w-3 text-yellow-600\" />\n            <span className=\"text-xs font-medium text-yellow-800 dark:text-yellow-200\">Pinned Post</span>\n          </div>\n        )}\n        \n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <Avatar className=\"h-8 w-8\">\n                <AvatarImage src={post.author?.avatar} />\n                <AvatarFallback>{post.author?.handle?.charAt(0).toUpperCase()}</AvatarFallback>\n              </Avatar>\n              <div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"font-medium text-sm\">{post.author?.handle}</span>\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {post.author?.role}\n                  </Badge>\n                </div>\n                <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                  <span>{formatDistanceToNow(new Date(post.createdAt))} ago</span>\n                  {post.expiresAt && (\n                    <>\n                      <span>â€¢</span>\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"h-3 w-3\" />\n                        <span>Expires {formatDistanceToNow(new Date(post.expiresAt))}</span>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-2\">\n              <Badge \n                variant=\"outline\" \n                className={`${postTypeInfo.color} ${postTypeInfo.bgColor} ${postTypeInfo.borderColor}`}\n              >\n                {postTypeInfo.icon}\n                <span className=\"ml-1\">{postTypeInfo.label}</span>\n              </Badge>\n            </div>\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"space-y-4\">\n          {/* Title */}\n          {post.title && (\n            <h3 className=\"text-lg font-semibold\">{post.title}</h3>\n          )}\n\n          {/* Content */}\n          <p className=\"text-sm leading-relaxed\">{post.content}</p>\n\n          {/* Image */}\n          {post.imageUrl && (\n            <div className=\"rounded-lg overflow-hidden border\">\n              <img \n                src={post.imageUrl} \n                alt=\"Post image\" \n                className=\"w-full h-48 object-cover\"\n              />\n            </div>\n          )}\n\n          {/* Target Brands (for Switch Log Prompts) */}\n          {post.postType === \"SWITCH_LOG_PROMPT\" && (post.targetBrandFrom || post.targetBrandTo) && (\n            <div className={`p-3 rounded-lg ${postTypeInfo.bgColor} ${postTypeInfo.borderColor} border`}>\n              <div className=\"flex items-center justify-between\">\n                {post.targetBrandFrom && (\n                  <div className=\"text-center\">\n                    <p className=\"text-xs text-muted-foreground\">Switch From</p>\n                    <p className=\"font-medium text-sm\">{post.targetBrandFrom}</p>\n                  </div>\n                )}\n                {post.targetBrandFrom && post.targetBrandTo && (\n                  <ArrowRight className=\"h-4 w-4 text-muted-foreground\" />\n                )}\n                {post.targetBrandTo && (\n                  <div className=\"text-center\">\n                    <p className=\"text-xs text-muted-foreground\">Switch To</p>\n                    <p className=\"font-medium text-sm text-green-600\">{post.targetBrandTo}</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Mission Info (for Mission Prompts) */}\n          {post.postType === \"MISSION_PROMPT\" && post.mission && (\n            <div className={`p-3 rounded-lg ${postTypeInfo.bgColor} ${postTypeInfo.borderColor} border`}>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-medium text-sm\">{post.mission.title}</p>\n                  <p className=\"text-xs text-muted-foreground\">Related Mission</p>\n                </div>\n                <Badge variant=\"secondary\" className=\"text-xs\">\n                  +{post.mission.pointsReward} pts\n                </Badge>\n              </div>\n            </div>\n          )}\n\n          {/* Category and Community Tags */}\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            {post.category && (\n              <Badge variant=\"outline\" className=\"text-xs\">\n                <Tag className=\"h-3 w-3 mr-1\" />\n                {post.category.name}\n              </Badge>\n            )}\n            {post.community && (\n              <Badge variant=\"outline\" className=\"text-xs\">\n                <Users className=\"h-3 w-3 mr-1\" />\n                {post.community.name}\n              </Badge>\n            )}\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex items-center justify-between pt-2\">\n            <div className=\"flex items-center gap-3\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => likeMutation.mutate(post.id)}\n                className={isLiked ? \"text-red-600\" : \"\"}\n              >\n                <Heart className={`h-4 w-4 mr-1 ${isLiked ? \"fill-current\" : \"\"}`} />\n                {post._count?.reactions || 0}\n              </Button>\n              \n              <Button variant=\"ghost\" size=\"sm\">\n                <MessageSquare className=\"h-4 w-4 mr-1\" />\n                {post._count?.comments || 0}\n              </Button>\n              \n              <Button variant=\"ghost\" size=\"sm\">\n                <Share2 className=\"h-4 w-4 mr-1\" />\n                Share\n              </Button>\n            </div>\n\n            {!isExpired && (\n              <Button \n                onClick={handlePrimaryAction}\n                className={`${postTypeInfo.color} bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white`}\n              >\n                {postTypeInfo.icon}\n                <span className=\"ml-2\">\n                  {post.actionButtonText || \n                   (post.postType === \"SWITCH_LOG_PROMPT\" ? \"Log Your Switch\" :\n                    post.postType === \"MISSION_PROMPT\" ? \"Start Mission\" : \"Learn More\")}\n                </span>\n                {post.actionButtonUrl && <ExternalLink className=\"h-3 w-3 ml-1\" />}\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Switch Log Creation Dialog */}\n      <Dialog open={showSwitchLogDialog} onOpenChange={setShowSwitchLogDialog}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Log Your Brand Switch</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <p className=\"text-sm text-muted-foreground\">\n              Share your experience switching from {post.targetBrandFrom || \"a foreign brand\"} to {post.targetBrandTo || \"an Indian brand\"}\n            </p>\n            \n            <div className=\"space-y-3\">\n              <Button \n                className=\"w-full\"\n                onClick={() => createSwitchLogMutation.mutate({\n                  postId: post.id,\n                  fromBrand: post.targetBrandFrom,\n                  toBrand: post.targetBrandTo,\n                  categoryId: post.categoryId\n                })}\n                disabled={createSwitchLogMutation.isPending}\n              >\n                {createSwitchLogMutation.isPending ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                    Creating...\n                  </>\n                ) : (\n                  <>\n                    <Target className=\"h-4 w-4 mr-2\" />\n                    Create Switch Log\n                  </>\n                )}\n              </Button>\n              \n              <Button \n                variant=\"outline\" \n                className=\"w-full\"\n                onClick={() => setShowSwitchLogDialog(false)}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n\nexport default InteractivePostCard;","size_bytes":13943},"client/src/components/ModeratorPostCreator.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  PlusCircle, Send, Image, Target, Zap, Pin, Clock, \n  Globe, Users, Tag, MessageSquare, CheckCircle \n} from \"lucide-react\";\n\ninterface ModeratorPostCreatorProps {\n  onPostCreated?: () => void;\n}\n\nexport function ModeratorPostCreator({ onPostCreated }: ModeratorPostCreatorProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  const [postData, setPostData] = useState({\n    postType: \"SWITCH_LOG_PROMPT\",\n    title: \"\",\n    content: \"\",\n    categoryId: \"\",\n    communityId: \"\",\n    missionId: \"\",\n    targetBrandFrom: \"\",\n    targetBrandTo: \"\",\n    actionButtonText: \"\",\n    imageUrl: \"\",\n    isPinned: false,\n    tags: [] as string[],\n    expiresAt: \"\"\n  });\n\n  // Data fetching queries\n  const { data: categoriesData = [] } = useQuery({\n    queryKey: ['/api/categories']\n  });\n  const categories = Array.isArray(categoriesData) ? categoriesData : [];\n\n  const { data: communitiesData = [] } = useQuery({\n    queryKey: ['/api/communities']\n  });\n  const communities = Array.isArray(communitiesData) ? communitiesData : [];\n\n  const { data: missionsData = [] } = useQuery({\n    queryKey: ['/api/missions']\n  });\n  const missions = Array.isArray(missionsData) ? missionsData : [];\n\n  // Create post mutation\n  const createPostMutation = useMutation({\n    mutationFn: (data: any) => apiRequest('/api/moderation/posts', 'POST', data),\n    onSuccess: () => {\n      toast({\n        title: \"Post Created\",\n        description: \"Your moderator post has been published successfully.\",\n      });\n      // Reset form\n      setPostData({\n        postType: \"SWITCH_LOG_PROMPT\",\n        title: \"\",\n        content: \"\",\n        categoryId: \"\",\n        communityId: \"\",\n        missionId: \"\",\n        targetBrandFrom: \"\",\n        targetBrandTo: \"\",\n        actionButtonText: \"\",\n        imageUrl: \"\",\n        isPinned: false,\n        tags: [],\n        expiresAt: \"\"\n      });\n      // Invalidate relevant queries\n      queryClient.invalidateQueries({ queryKey: ['/api/posts'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/feed'] });\n      onPostCreated?.();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create post. Please try again.\",\n        variant: \"destructive\",\n      });\n      console.error('Error creating post:', error);\n    }\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!postData.title || !postData.content) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please provide both title and content for the post.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Set default action button text based on post type\n    const actionButtonText = postData.actionButtonText || \n      (postData.postType === \"SWITCH_LOG_PROMPT\" ? \"Log Your Switch\" : \n       postData.postType === \"MISSION_PROMPT\" ? \"Start Mission\" : \"Learn More\");\n\n    await createPostMutation.mutateAsync({\n      ...postData,\n      actionButtonText,\n      userId: \"current-user-id\", // This should come from auth context\n    });\n  };\n\n  const getPostTypeIcon = (type: string) => {\n    switch (type) {\n      case \"SWITCH_LOG_PROMPT\": return <Target className=\"h-4 w-4\" />;\n      case \"MISSION_PROMPT\": return <Zap className=\"h-4 w-4\" />;\n      case \"ANNOUNCEMENT\": return <MessageSquare className=\"h-4 w-4\" />;\n      case \"POLL\": return <CheckCircle className=\"h-4 w-4\" />;\n      default: return <MessageSquare className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getPostTypeDescription = (type: string) => {\n    switch (type) {\n      case \"SWITCH_LOG_PROMPT\": \n        return \"Encourage members to share their brand switching experiences\";\n      case \"MISSION_PROMPT\": \n        return \"Promote specific missions and challenges\";\n      case \"ANNOUNCEMENT\": \n        return \"Make important announcements to the community\";\n      case \"POLL\": \n        return \"Create polls for community engagement\";\n      default: \n        return \"General community post\";\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-4xl mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <PlusCircle className=\"h-5 w-5\" />\n          Create Moderator Post\n        </CardTitle>\n        <CardDescription>\n          Create engaging posts to encourage community participation and brand switching\n        </CardDescription>\n      </CardHeader>\n      \n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          \n          {/* Post Type Selection */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"postType\">Post Type</Label>\n            <Select \n              value={postData.postType} \n              onValueChange={(value) => setPostData({ ...postData, postType: value })}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select post type\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"SWITCH_LOG_PROMPT\">\n                  <div className=\"flex items-center gap-2\">\n                    <Target className=\"h-4 w-4\" />\n                    Switch Log Prompt\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"MISSION_PROMPT\">\n                  <div className=\"flex items-center gap-2\">\n                    <Zap className=\"h-4 w-4\" />\n                    Mission Prompt\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"ANNOUNCEMENT\">\n                  <div className=\"flex items-center gap-2\">\n                    <MessageSquare className=\"h-4 w-4\" />\n                    Announcement\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"POLL\">\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"h-4 w-4\" />\n                    Poll\n                  </div>\n                </SelectItem>\n              </SelectContent>\n            </Select>\n            <p className=\"text-xs text-muted-foreground\">\n              {getPostTypeDescription(postData.postType)}\n            </p>\n          </div>\n\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Title *</Label>\n            <Input\n              id=\"title\"\n              value={postData.title}\n              onChange={(e) => setPostData({ ...postData, title: e.target.value })}\n              placeholder=\"Enter an engaging title for your post\"\n              required\n            />\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"content\">Content *</Label>\n            <Textarea\n              id=\"content\"\n              value={postData.content}\n              onChange={(e) => setPostData({ ...postData, content: e.target.value })}\n              placeholder=\"Write compelling content that encourages community engagement...\"\n              rows={4}\n              required\n            />\n          </div>\n\n          {/* Category and Community Selection */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"category\">Category</Label>\n              <Select \n                value={postData.categoryId} \n                onValueChange={(value) => setPostData({ ...postData, categoryId: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">All Categories</SelectItem>\n                  {categories.map((category: any) => (\n                    <SelectItem key={category.id} value={category.id}>\n                      <div className=\"flex items-center gap-2\">\n                        <div \n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: category.color }}\n                        />\n                        {category.name}\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"community\">Community</Label>\n              <Select \n                value={postData.communityId} \n                onValueChange={(value) => setPostData({ ...postData, communityId: value })}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select community\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">All Communities</SelectItem>\n                  {communities.map((community: any) => (\n                    <SelectItem key={community.id} value={community.id}>\n                      <div className=\"flex items-center gap-2\">\n                        {community.visibility === 'PUBLIC' ? (\n                          <Globe className=\"h-3 w-3 text-green-600\" />\n                        ) : (\n                          <Users className=\"h-3 w-3 text-blue-600\" />\n                        )}\n                        {community.name}\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          {/* Switch Log Prompt Specific Fields */}\n          {postData.postType === \"SWITCH_LOG_PROMPT\" && (\n            <div className=\"space-y-4 p-4 bg-orange-50 dark:bg-orange-950 rounded-lg border border-orange-200 dark:border-orange-800\">\n              <h4 className=\"font-medium text-orange-900 dark:text-orange-100\">\n                Switch Log Prompt Settings\n              </h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"targetBrandFrom\">From Brand (Optional)</Label>\n                  <Input\n                    id=\"targetBrandFrom\"\n                    value={postData.targetBrandFrom}\n                    onChange={(e) => setPostData({ ...postData, targetBrandFrom: e.target.value })}\n                    placeholder=\"e.g., Samsung, Nike, Coca-Cola\"\n                  />\n                  <p className=\"text-xs text-muted-foreground\">\n                    Suggest a specific brand to switch from\n                  </p>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"targetBrandTo\">To Brand (Optional)</Label>\n                  <Input\n                    id=\"targetBrandTo\"\n                    value={postData.targetBrandTo}\n                    onChange={(e) => setPostData({ ...postData, targetBrandTo: e.target.value })}\n                    placeholder=\"e.g., Micromax, Bata, Thums Up\"\n                  />\n                  <p className=\"text-xs text-muted-foreground\">\n                    Suggest a specific Indian brand to switch to\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Mission Prompt Specific Fields */}\n          {postData.postType === \"MISSION_PROMPT\" && (\n            <div className=\"space-y-4 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800\">\n              <h4 className=\"font-medium text-blue-900 dark:text-blue-100\">\n                Mission Prompt Settings\n              </h4>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"mission\">Related Mission</Label>\n                <Select \n                  value={postData.missionId} \n                  onValueChange={(value) => setPostData({ ...postData, missionId: value })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select mission to promote\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">No specific mission</SelectItem>\n                    {missions.map((mission: any) => (\n                      <SelectItem key={mission.id} value={mission.id}>\n                        <div className=\"flex items-center gap-2\">\n                          <Zap className=\"h-3 w-3\" />\n                          <span>{mission.title}</span>\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            +{mission.pointsReward} pts\n                          </Badge>\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          )}\n\n          {/* Action Button Text */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"actionButtonText\">Action Button Text</Label>\n            <Input\n              id=\"actionButtonText\"\n              value={postData.actionButtonText}\n              onChange={(e) => setPostData({ ...postData, actionButtonText: e.target.value })}\n              placeholder={\n                postData.postType === \"SWITCH_LOG_PROMPT\" ? \"Log Your Switch\" : \n                postData.postType === \"MISSION_PROMPT\" ? \"Start Mission\" : \"Learn More\"\n              }\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Text displayed on the action button (optional, will use default if empty)\n            </p>\n          </div>\n\n          {/* Image URL */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"imageUrl\">Image URL (Optional)</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"imageUrl\"\n                value={postData.imageUrl}\n                onChange={(e) => setPostData({ ...postData, imageUrl: e.target.value })}\n                placeholder=\"https://example.com/image.jpg\"\n              />\n              <Button type=\"button\" variant=\"outline\" size=\"icon\">\n                <Image className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Post Options */}\n          <div className=\"space-y-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n            <h4 className=\"font-medium\">Post Options</h4>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"isPinned\"\n                checked={postData.isPinned}\n                onCheckedChange={(checked) => setPostData({ ...postData, isPinned: checked })}\n              />\n              <Label htmlFor=\"isPinned\" className=\"flex items-center gap-2\">\n                <Pin className=\"h-4 w-4\" />\n                Pin this post\n              </Label>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"expiresAt\">Expiration Date (Optional)</Label>\n              <Input\n                id=\"expiresAt\"\n                type=\"datetime-local\"\n                value={postData.expiresAt}\n                onChange={(e) => setPostData({ ...postData, expiresAt: e.target.value })}\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Post will be automatically hidden after this date\n              </p>\n            </div>\n          </div>\n\n          {/* Submit Button */}\n          <div className=\"flex justify-end gap-3 pt-4\">\n            <Button type=\"button\" variant=\"outline\">\n              Save as Draft\n            </Button>\n            <Button \n              type=\"submit\" \n              disabled={createPostMutation.isPending}\n              className=\"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600\"\n            >\n              {createPostMutation.isPending ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                  Publishing...\n                </>\n              ) : (\n                <>\n                  <Send className=\"h-4 w-4 mr-2\" />\n                  Publish Post\n                </>\n              )}\n            </Button>\n          </div>\n\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default ModeratorPostCreator;","size_bytes":16883},"client/src/pages/News.tsx":{"content":"import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { \n  ExternalLink, \n  Clock, \n  User, \n  Eye, \n  MessageCircle, \n  Share2,\n  TrendingUp,\n  Calendar,\n  Target,\n  Award,\n  ArrowRight,\n  Coins\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\n\ninterface NewsArticle {\n  id: string;\n  title: string;\n  description: string;\n  imageUrls: string[] | null;\n  suggestedFromBrandIds: string[] | null;\n  suggestedToBrandIds: string[] | null;\n  commentsEnabled: boolean;\n  isPublished: boolean;\n  publishedAt: string;\n  createdBy: string;\n  createdAt: string;\n  updatedAt: string;\n  fromBrands?: Brand[];\n  toBrands?: Brand[];\n}\n\ninterface Brand {\n  id: string;\n  name: string;\n  country: string;\n  isIndian: boolean;\n}\n\ninterface Mission {\n  id: string;\n  title: string;\n  description: string;\n  targetCategory: string;\n  pointsReward: number;\n  startDate: string;\n  endDate: string;\n  status: string;\n  impact: string;\n  fromBrands?: Brand[];\n  toBrands?: Brand[];\n}\n\nfunction NewsCard({ article }: { article: NewsArticle }) {\n  return (\n    <Card className=\"mb-6 hover:shadow-md transition-shadow duration-200\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            <h2 className=\"text-xl font-semibold mb-2 line-clamp-2 hover:text-blue-600 cursor-pointer\">\n              {article.title}\n            </h2>\n            \n            <div className=\"flex items-center gap-4 text-sm text-gray-500 mb-3\">\n              <div className=\"flex items-center gap-1\">\n                <User className=\"w-4 h-4\" />\n                <span>Admin</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Clock className=\"w-4 h-4\" />\n                <span>{formatDistanceToNow(new Date(article.publishedAt))} ago</span>\n              </div>\n              {article.commentsEnabled && (\n                <div className=\"flex items-center gap-1\">\n                  <MessageCircle className=\"w-4 h-4\" />\n                  <span>Comments enabled</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                News Article\n              </Badge>\n              {article.isPublished && (\n                <Badge variant=\"outline\" className=\"text-xs text-green-600\">\n                  Published\n                </Badge>\n              )}\n            </div>\n\n            {/* Brand Switching Information */}\n            {(article.fromBrands?.length > 0 || article.toBrands?.length > 0) && (\n              <div className=\"bg-gradient-to-r from-red-50 to-green-50 border border-gray-200 rounded-lg p-3 mb-3\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  {article.fromBrands && article.fromBrands.length > 0 && (\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"text-red-600 font-medium mb-1\">Switch From:</span>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {article.fromBrands.map((brand: Brand) => (\n                          <Badge key={brand.id} variant=\"destructive\" className=\"text-xs\">\n                            {brand.name}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                  \n                  {article.fromBrands?.length > 0 && article.toBrands?.length > 0 && (\n                    <ArrowRight className=\"text-gray-400 mx-2\" size={16} />\n                  )}\n                  \n                  {article.toBrands && article.toBrands.length > 0 && (\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"text-green-600 font-medium mb-1\">Switch To:</span>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {article.toBrands.map((brand: Brand) => (\n                          <Badge key={brand.id} variant=\"default\" className=\"text-xs bg-green-600\">\n                            {brand.name} {brand.isIndian ? 'ðŸ‡®ðŸ‡³' : ''}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"pt-0\">\n        <p className=\"text-gray-700 mb-4 line-clamp-3\">\n          {article.description}\n        </p>\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            {article.commentsEnabled && (\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-500 hover:text-gray-700\">\n                <MessageCircle className=\"w-4 h-4 mr-1\" />\n                Comments\n              </Button>\n            )}\n            <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-500 hover:text-gray-700\">\n              <Share2 className=\"w-4 h-4 mr-1\" />\n              Share\n            </Button>\n          </div>\n          \n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"text-blue-600 hover:text-blue-700\"\n          >\n            <ExternalLink className=\"w-4 h-4 mr-1\" />\n            View Details\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction TrendingTopics() {\n  const trendingTags = [\n    'Indian Brands', 'Consumer Electronics', 'Fashion', 'Food & Beverages',\n    'Automotive', 'Personal Care', 'Home & Garden', 'Technology'\n  ];\n\n  return (\n    <Card className=\"mb-6\">\n      <CardHeader>\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <TrendingUp className=\"w-5 h-5 text-orange-500\" />\n          Trending Topics\n        </h3>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex flex-wrap gap-2\">\n          {trendingTags.map((tag) => (\n            <Badge \n              key={tag} \n              variant=\"secondary\" \n              className=\"hover:bg-blue-100 cursor-pointer transition-colors\"\n            >\n              #{tag}\n            </Badge>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction OngoingMissions() {\n  const { data: missions = [], isLoading } = useQuery({\n    queryKey: ['/api/missions/ongoing'],\n    queryFn: () => fetch('/api/missions/ongoing').then(res => res.json()),\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Target className=\"w-5 h-5 text-blue-500\" />\n            Ongoing Missions\n          </h3>\n        </CardHeader>\n        <CardContent>\n          <div className=\"animate-pulse space-y-3\">\n            <div className=\"h-4 bg-gray-200 rounded\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <Target className=\"w-5 h-5 text-blue-500\" />\n          Ongoing Missions\n        </h3>\n      </CardHeader>\n      <CardContent>\n        {missions.length === 0 ? (\n          <p className=\"text-gray-500 text-sm\">No active missions available</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {missions.slice(0, 3).map((mission: Mission) => (\n              <div key={mission.id} className=\"border-l-4 border-blue-500 pl-4 pb-3\">\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h4 className=\"font-medium text-sm\">{mission.title}</h4>\n                  <Badge variant=\"secondary\" className=\"text-xs flex items-center gap-1\">\n                    <Coins className=\"w-3 h-3\" />\n                    {mission.pointsReward}\n                  </Badge>\n                </div>\n                <p className=\"text-xs text-gray-600 mb-2 line-clamp-2\">{mission.description}</p>\n                \n                {/* Mission Brand Information */}\n                {(mission.fromBrands?.length > 0 || mission.toBrands?.length > 0) && (\n                  <div className=\"bg-gray-50 rounded p-2 text-xs\">\n                    {mission.fromBrands?.length > 0 && (\n                      <div className=\"mb-1\">\n                        <span className=\"font-medium text-red-600\">From: </span>\n                        <span>{mission.fromBrands.map(b => b.name).join(', ')}</span>\n                      </div>\n                    )}\n                    {mission.toBrands?.length > 0 && (\n                      <div>\n                        <span className=\"font-medium text-green-600\">To: </span>\n                        <span>{mission.toBrands.map(b => `${b.name} ðŸ‡®ðŸ‡³`).join(', ')}</span>\n                      </div>\n                    )}\n                  </div>\n                )}\n                \n                <div className=\"flex items-center justify-between mt-2\">\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    {mission.impact} Impact\n                  </Badge>\n                  <span className=\"text-xs text-gray-500\">\n                    Ends {formatDistanceToNow(new Date(mission.endDate))} from now\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction RecentActivity() {\n  return (\n    <Card>\n      <CardHeader>\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <Calendar className=\"w-5 h-5 text-green-500\" />\n          Recent Activity\n        </h3>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3 text-sm\">\n          <div className=\"flex items-center gap-2 text-gray-600\">\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n            <span>12 new articles published today</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-gray-600\">\n            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n            <span>Updated guidelines for Indian brands</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-gray-600\">\n            <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\n            <span>Featured: Top 10 Indian alternatives</span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function News() {\n  const { data: articles = [], isLoading, error } = useQuery({\n    queryKey: ['/api/news'],\n    queryFn: async () => {\n      const res = await fetch('/api/news');\n      const data = await res.json();\n      // Ensure data is always an array\n      return Array.isArray(data) ? data : [];\n    },\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time updates\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <h1 className=\"text-3xl font-bold mb-8\">News & Articles</h1>\n        <div className=\"space-y-6\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader>\n                <div className=\"h-6 bg-gray-200 rounded mb-2\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-4 bg-gray-200 rounded mb-2\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <h1 className=\"text-3xl font-bold mb-8\">News & Articles</h1>\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Failed to load news articles. Please try again later.</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold mb-2\">News & Articles</h1>\n        <p className=\"text-gray-600\">\n          Stay updated with the latest news about Indian brands, consumer switches, and market trends\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Main Content */}\n        <div className=\"lg:col-span-2\">\n          {articles.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <h3 className=\"text-lg font-semibold mb-2\">No articles available</h3>\n                <p className=\"text-gray-500\">\n                  Check back later for the latest news and articles about Indian brands and consumer switching.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div>\n              {articles.map((article: NewsArticle) => (\n                <NewsCard key={article.id} article={article} />\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"lg:col-span-1\">\n          <OngoingMissions />\n          <TrendingTopics />\n          <RecentActivity />\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":13643},"client/src/pages/MemberRegistration.tsx":{"content":"import React, { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { UserPlus, Mail, Phone, MapPin, Target, Shield } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function MemberRegistration() {\n  const [location, navigate] = useLocation();\n  const { user, updateProfile } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    handle: '',\n    email: '',\n    phone: '',\n    region: '',\n    interests: [] as string[],\n    motivation: '',\n    agreedToTerms: false\n  });\n\n  const regions = [\n    'Mumbai', 'Delhi', 'Bangalore', 'Hyderabad', 'Chennai', 'Kolkata', \n    'Pune', 'Ahmedabad', 'Jaipur', 'Lucknow', 'Other'\n  ];\n\n  const interestOptions = [\n    'Food & Beverages', 'Electronics', 'Fashion', 'Beauty & Personal Care',\n    'Home & Garden', 'Automotive', 'Sports & Fitness', 'Books & Media',\n    'Traditional Crafts', 'Sustainable Living'\n  ];\n\n  const handleInterestToggle = (interest: string) => {\n    setFormData(prev => ({\n      ...prev,\n      interests: prev.interests.includes(interest)\n        ? prev.interests.filter(i => i !== interest)\n        : [...prev.interests, interest]\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.handle || !formData.email || !formData.region) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please fill in all required fields.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (!formData.agreedToTerms) {\n      toast({\n        title: \"Terms Required\",\n        description: \"Please agree to the terms and conditions.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      // Register user as member\n      const registrationData = {\n        ...formData,\n        role: 'MEMBER',\n        firebaseUid: user?.uid\n      };\n\n      const response = await apiRequest('POST', '/api/auth/register', registrationData);\n      \n      // Update auth context\n      if (updateProfile) {\n        await updateProfile({\n          handle: formData.handle,\n          role: 'MEMBER',\n          region: formData.region\n        });\n      }\n\n      toast({\n        title: \"Registration Successful!\",\n        description: \"Welcome to JumboJolt! Start exploring missions and switching to Indian brands.\",\n      });\n\n      // Redirect to missions page\n      navigate('/missions');\n      \n    } catch (error: any) {\n      console.error('Registration error:', error);\n      toast({\n        title: \"Registration Failed\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-2xl\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\n            <UserPlus className=\"h-8 w-8 text-orange-600\" />\n            <CardTitle className=\"text-2xl font-bold text-gray-900\">\n              Join JumboJolt Community\n            </CardTitle>\n          </div>\n          <p className=\"text-gray-600\">\n            Become part of the movement supporting Indian brands and local economy\n          </p>\n        </CardHeader>\n\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Basic Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <Shield className=\"h-5 w-5 text-blue-600\" />\n                Basic Information\n              </h3>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"handle\">Username *</Label>\n                  <Input\n                    id=\"handle\"\n                    value={formData.handle}\n                    onChange={(e) => setFormData(prev => ({ ...prev, handle: e.target.value }))}\n                    placeholder=\"Choose a unique handle\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"email\">Email Address *</Label>\n                  <div className=\"relative\">\n                    <Mail className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n                      placeholder=\"your@email.com\"\n                      className=\"pl-10\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"phone\">Phone Number</Label>\n                  <div className=\"relative\">\n                    <Phone className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"phone\"\n                      value={formData.phone}\n                      onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\n                      placeholder=\"+91 XXXXX XXXXX\"\n                      className=\"pl-10\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"region\">Region *</Label>\n                  <div className=\"relative\">\n                    <MapPin className=\"absolute left-3 top-3 h-4 w-4 text-gray-400 z-10\" />\n                    <Select onValueChange={(value) => setFormData(prev => ({ ...prev, region: value }))}>\n                      <SelectTrigger className=\"pl-10\">\n                        <SelectValue placeholder=\"Select your city/region\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {regions.map(region => (\n                          <SelectItem key={region} value={region}>{region}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Interests */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <Target className=\"h-5 w-5 text-green-600\" />\n                Your Interests\n              </h3>\n              <p className=\"text-sm text-gray-600\">\n                Select categories you're interested in switching to Indian alternatives\n              </p>\n\n              <div className=\"flex flex-wrap gap-2\">\n                {interestOptions.map(interest => (\n                  <Badge\n                    key={interest}\n                    variant={formData.interests.includes(interest) ? \"default\" : \"outline\"}\n                    className=\"cursor-pointer hover:bg-opacity-80 transition-colors\"\n                    onClick={() => handleInterestToggle(interest)}\n                  >\n                    {interest}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n\n            {/* Motivation */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"motivation\">Why do you want to support Indian brands? (Optional)</Label>\n              <Textarea\n                id=\"motivation\"\n                value={formData.motivation}\n                onChange={(e) => setFormData(prev => ({ ...prev, motivation: e.target.value }))}\n                placeholder=\"Share your motivation for supporting local brands...\"\n                rows={3}\n              />\n            </div>\n\n            {/* Terms */}\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"checkbox\"\n                id=\"terms\"\n                checked={formData.agreedToTerms}\n                onChange={(e) => setFormData(prev => ({ ...prev, agreedToTerms: e.target.checked }))}\n                className=\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\n              />\n              <Label htmlFor=\"terms\" className=\"text-sm\">\n                I agree to the{' '}\n                <a href=\"/terms\" className=\"text-orange-600 hover:underline\">\n                  Terms and Conditions\n                </a>{' '}\n                and{' '}\n                <a href=\"/privacy\" className=\"text-orange-600 hover:underline\">\n                  Privacy Policy\n                </a>\n              </Label>\n            </div>\n\n            <Button \n              type=\"submit\" \n              className=\"w-full bg-orange-600 hover:bg-orange-700\"\n              disabled={loading}\n            >\n              {loading ? 'Creating Account...' : 'Join JumboJolt Community'}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9620},"client/src/pages/Missions.tsx":{"content":"import React, { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/context/AuthContext\";\n// Import shadcn Dialog components\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Target,\n  Coins,\n  Calendar,\n  TrendingUp,\n  CheckCircle,\n  Clock,\n  AlertCircle,\n  ArrowRight,\n  Upload,\n  Award,\n} from \"lucide-react\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface Brand {\n  id: string;\n  name: string;\n  country: string;\n  isIndian: boolean;\n}\n\ninterface Mission {\n  id: string;\n  title: string;\n  description: string;\n  targetCategory: string;\n  pointsReward: number;\n  startDate: string;\n  endDate: string;\n  status: string;\n  impact: string;\n  fromBrands?: Brand[];\n  toBrands?: Brand[];\n}\n\ninterface UserMission {\n  id: string;\n  missionId: string;\n  userId: string;\n  status: string;\n  completedAt?: string;\n  createdAt: string;\n}\n\nconst switchLogSchema = z.object({\n  targetBrandFrom: z.string().min(1, \"Please select a brand to switch from\"),\n  targetBrandTo: z.string().min(1, \"Please select a brand to switch to\"),\n  reason: z\n    .string()\n    .min(10, \"Please provide a reason (at least 10 characters)\"),\n  experience: z.string().min(5, \"Please describe your experience\"),\n  financialImpact: z.string().optional(),\n  evidenceUrl: z.string().min(1, \"Please upload evidence image\"),\n});\n\ntype SwitchLogFormData = z.infer<typeof switchLogSchema>;\n\nfunction MissionCard({\n  mission,\n  userMission,\n  onParticipate,\n}: {\n  mission: Mission;\n  userMission?: UserMission;\n  onParticipate: (missionId: string) => void;\n}) {\n  const [showSubmitForm, setShowSubmitForm] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const form = useForm<SwitchLogFormData>({\n    resolver: zodResolver(switchLogSchema),\n    defaultValues: {\n      targetBrandFrom: \"\",\n      targetBrandTo: \"\",\n      reason: \"\",\n      experience: \"\",\n      financialImpact: \"\",\n      evidenceUrl: \"\",\n    },\n  });\n  const { user } = useAuth();\n\n  const submitSwitchLog = useMutation({\n    mutationFn: async (data: SwitchLogFormData) => {\n      const response = await fetch(`/api/missions/${mission.id}/submit`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-user-id\": user.id,\n        },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to submit switch log\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Switch log submitted!\",\n        description: \"Your submission is pending moderator verification.\",\n      });\n      setShowSubmitForm(false);\n      form.reset();\n      queryClient.invalidateQueries({ queryKey: [\"/api/missions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user-missions\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Submission failed\",\n        description: error.message || \"Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (data: SwitchLogFormData) => {\n    submitSwitchLog.mutate(data);\n  };\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case \"COMPLETED\":\n        return \"bg-green-100 text-green-800\";\n      case \"STARTED\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"FAILED\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status?: string) => {\n    switch (status) {\n      case \"COMPLETED\":\n        return <CheckCircle className=\"w-4 h-4\" />;\n      case \"STARTED\":\n        return <Clock className=\"w-4 h-4\" />;\n      case \"FAILED\":\n        return <AlertCircle className=\"w-4 h-4\" />;\n      default:\n        return <Target className=\"w-4 h-4\" />;\n    }\n  };\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader>\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <CardTitle className=\"text-lg mb-2\">{mission.title}</CardTitle>\n            <div className=\"flex items-center gap-2 mb-2\">\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {mission.targetCategory.replace(\"_\", \" \")}\n              </Badge>\n              <Badge\n                variant=\"secondary\"\n                className=\"text-xs flex items-center gap-1\"\n              >\n                <Coins className=\"w-3 h-3\" />\n                {mission.pointsReward} points\n              </Badge>\n              <Badge\n                variant=\"outline\"\n                className={`text-xs ${mission.impact === \"HIGH\" ? \"border-red-500 text-red-700\" : mission.impact === \"MEDIUM\" ? \"border-yellow-500 text-yellow-700\" : \"border-green-500 text-green-700\"}`}\n              >\n                {mission.impact} Impact\n              </Badge>\n            </div>\n          </div>\n          {userMission && (\n            <Badge\n              className={`text-xs flex items-center gap-1 ${getStatusColor(userMission.status)}`}\n            >\n              {getStatusIcon(userMission.status)}\n              {userMission.status}\n            </Badge>\n          )}\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        <p className=\"text-sm text-gray-600 mb-4\">{mission.description}</p>\n\n        {/* Brand Information */}\n        {(mission.fromBrands?.length > 0 || mission.toBrands?.length > 0) && (\n          <div className=\"bg-gradient-to-r from-red-50 to-green-50 border border-gray-200 rounded-lg p-3 mb-4\">\n            <div className=\"flex items-center justify-between text-sm\">\n              {mission.fromBrands && mission.fromBrands.length > 0 && (\n                <div className=\"flex flex-col\">\n                  <span className=\"text-red-600 font-medium mb-1\">\n                    Switch From:\n                  </span>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {mission.fromBrands.map((brand: Brand) => (\n                      <Badge\n                        key={brand.id}\n                        variant=\"destructive\"\n                        className=\"text-xs\"\n                      >\n                        {brand.name}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {(mission.fromBrands?.length || 0) > 0 &&\n                (mission.toBrands?.length || 0) > 0 && (\n                  <ArrowRight className=\"text-gray-400 mx-2\" size={16} />\n                )}\n\n              {mission.toBrands && mission.toBrands.length > 0 && (\n                <div className=\"flex flex-col\">\n                  <span className=\"text-green-600 font-medium mb-1\">\n                    Switch To:\n                  </span>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {mission.toBrands.map((brand: Brand) => (\n                      <Badge\n                        key={brand.id}\n                        variant=\"default\"\n                        className=\"text-xs bg-green-600\"\n                      >\n                        {brand.name} {brand.isIndian ? \"ðŸ‡®ðŸ‡³\" : \"\"}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between text-xs text-gray-500 mb-4\">\n          <span className=\"flex items-center gap-1\">\n            <Calendar className=\"w-3 h-3\" />\n            Ends {formatDistanceToNow(new Date(mission.endDate))} from now\n          </span>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-2\">\n          {!userMission ? (\n            <Button\n              onClick={() => onParticipate(mission.id)}\n              className=\"flex-1\"\n              size=\"sm\"\n            >\n              <Target className=\"w-4 h-4 mr-2\" />\n              Join Mission\n            </Button>\n          ) : userMission.status === \"STARTED\" ? (\n            <Dialog open={showSubmitForm} onOpenChange={setShowSubmitForm}>\n              <DialogTrigger asChild>\n                <Button className=\"flex-1\" size=\"sm\">\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  Submit Switch Log\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-md\">\n                <DialogHeader>\n                  <DialogTitle>Submit Switch Log</DialogTitle>\n                </DialogHeader>\n                <Form {...form}>\n                  <form\n                    onSubmit={form.handleSubmit(handleSubmit)}\n                    className=\"space-y-4\"\n                  >\n                    <FormField\n                      control={form.control}\n                      name=\"targetBrandFrom\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Brand Switched From</FormLabel>\n                          <Select\n                            onValueChange={field.onChange}\n                            defaultValue={field.value}\n                          >\n                            <FormControl>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select brand you switched from\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {mission.fromBrands?.map((brand) => (\n                                <SelectItem key={brand.id} value={brand.id}>\n                                  {brand.name}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"targetBrandTo\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Brand Switched To</FormLabel>\n                          <Select\n                            onValueChange={field.onChange}\n                            defaultValue={field.value}\n                          >\n                            <FormControl>\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select Indian brand you switched to\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {mission.toBrands?.map((brand) => (\n                                <SelectItem key={brand.id} value={brand.id}>\n                                  {brand.name} ðŸ‡®ðŸ‡³\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"reason\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Reason for Switch</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Why did you make this switch?\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"experience\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Experience</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"How was your experience with the Indian brand?\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"financialImpact\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Financial Impact (Optional)</FormLabel>\n                          <FormControl>\n                            <Input\n                              placeholder=\"e.g., Saved â‚¹500 per month\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"evidenceUrl\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Evidence Image (Required)</FormLabel>\n                          <FormControl>\n                            <div className=\"space-y-2\">\n                              <Input\n                                type=\"file\"\n                                accept=\"image/*\"\n                                onChange={(e) => {\n                                  const file = e.target.files?.[0];\n                                  if (file) {\n                                    // For demo purposes, use a placeholder URL\n                                    // In production, this would upload to object storage\n                                    const reader = new FileReader();\n                                    reader.onload = (e) => {\n                                      field.onChange(\n                                        e.target?.result as string,\n                                      );\n                                    };\n                                    reader.readAsDataURL(file);\n                                  }\n                                }}\n                                className=\"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100\"\n                              />\n                              <p className=\"text-xs text-gray-500\">\n                                Upload a photo showing your purchase/switch\n                                (receipt, product image, etc.)\n                              </p>\n                              {field.value && (\n                                <div className=\"mt-2\">\n                                  <img\n                                    src={field.value}\n                                    alt=\"Evidence preview\"\n                                    className=\"w-20 h-20 object-cover rounded border\"\n                                  />\n                                </div>\n                              )}\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"flex gap-2\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => setShowSubmitForm(false)}\n                        className=\"flex-1\"\n                      >\n                        Cancel\n                      </Button>\n                      <Button\n                        type=\"submit\"\n                        disabled={submitSwitchLog.isPending}\n                        className=\"flex-1\"\n                      >\n                        {submitSwitchLog.isPending ? \"Submitting...\" : \"Submit\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          ) : (\n            <div className=\"flex-1 text-center text-sm text-gray-500\">\n              {userMission.status === \"COMPLETED\" ? (\n                <span className=\"flex items-center justify-center gap-1 text-green-600\">\n                  <Award className=\"w-4 h-4\" />\n                  Mission Completed!\n                </span>\n              ) : (\n                \"Pending verification...\"\n              )}\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Missions() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const { data: missions = [], isLoading: missionsLoading } = useQuery({\n    queryKey: [\"/api/missions\"],\n    queryFn: () => fetch(\"/api/missions\").then((res) => res.json()),\n  });\n\n  const { data: userMissions = [] } = useQuery({\n    queryKey: [\"/api/user-missions\"],\n    queryFn: () => fetch(\"/api/user-missions\").then((res) => res.json()),\n  });\n\n  const joinMission = useMutation({\n    mutationFn: async (missionId: string) => {\n      const response = await fetch(`/api/missions/${missionId}/join`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-user-id\": user.id,\n        },\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to join mission\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Mission joined!\",\n        description: \"You can now submit switch logs for this mission.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/user-missions\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to join mission\",\n        description: error.message || \"Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleParticipate = (missionId: string) => {\n    joinMission.mutate(missionId);\n  };\n\n  if (missionsLoading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"animate-pulse space-y-6\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"h-64 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          Active Missions\n        </h1>\n        <p className=\"text-gray-600\">\n          Join missions to earn points by switching to Indian brands. Complete\n          switch logs and get verified by moderators.\n        </p>\n      </div>\n\n      {missions.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <Target className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            No Active Missions\n          </h3>\n          <p className=\"text-gray-500\">\n            Check back later for new missions to participate in.\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {missions.map((mission: Mission) => {\n            const userMission = userMissions.find(\n              (um: UserMission) => um.missionId === mission.id,\n            );\n            return (\n              <MissionCard\n                key={mission.id}\n                mission={mission}\n                userMission={userMission}\n                onParticipate={handleParticipate}\n              />\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":20935},"client/src/pages/ModeratorRegistration.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Shield,\n  Mail,\n  Phone,\n  MapPin,\n  Award,\n  AlertTriangle,\n  Lock,\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/context/AuthContext\";\n\nexport default function ModeratorRegistration() {\n  const [location, navigate] = useLocation();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [validInvite, setValidInvite] = useState(false);\n  const [inviteToken, setInviteToken] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    handle: \"\",\n    email: \"\",\n    phone: \"\",\n    region: \"\",\n    experience: \"\",\n    expertise: [] as string[],\n    motivation: \"\",\n    references: \"\",\n    agreedToTerms: false,\n    agreedToModeratorCode: false,\n  });\n\n  const regions = [\n    \"Mumbai\",\n    \"Delhi\",\n    \"Bangalore\",\n    \"Hyderabad\",\n    \"Chennai\",\n    \"Kolkata\",\n    \"Pune\",\n    \"Ahmedabad\",\n    \"Jaipur\",\n    \"Lucknow\",\n    \"Other\",\n  ];\n\n  const expertiseOptions = [\n    \"Brand Verification\",\n    \"Content Moderation\",\n    \"Community Management\",\n    \"Indian Market Knowledge\",\n    \"Quality Assessment\",\n    \"Business Analysis\",\n    \"Customer Service\",\n    \"Social Media Management\",\n    \"Research & Development\",\n  ];\n\n  // Check for valid invite token on component mount\n  useEffect(() => {\n    const urlParams = new URLSearchParams(location.split(\"?\")[1] || \"\");\n    const token = urlParams.get(\"invite\");\n\n    if (token) {\n      setInviteToken(token);\n      // In a real app, validate the token with the backend\n      // For demo purposes, accept any token that starts with 'mod_' token.startsWith(\"mod_\")\n\n      if (true) {\n        setValidInvite(true);\n      } else {\n        toast({\n          title: \"Invalid Invite\",\n          description: \"The moderator invite link is invalid or expired.\",\n          variant: \"destructive\",\n        });\n        navigate(\"/\");\n      }\n    } else {\n      toast({\n        title: \"Access Denied\",\n        description: \"Moderator registration requires a valid invite link.\",\n        variant: \"destructive\",\n      });\n      navigate(\"/\");\n    }\n  }, [location, navigate, toast]);\n\n  const handleExpertiseToggle = (expertise: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      expertise: prev.expertise.includes(expertise)\n        ? prev.expertise.filter((e) => e !== expertise)\n        : [...prev.expertise, expertise],\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (\n      !formData.handle ||\n      !formData.email ||\n      !formData.region ||\n      !formData.experience\n    ) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please fill in all required fields.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.expertise.length === 0) {\n      toast({\n        title: \"Expertise Required\",\n        description: \"Please select at least one area of expertise.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!formData.agreedToTerms || !formData.agreedToModeratorCode) {\n      toast({\n        title: \"Agreements Required\",\n        description: \"Please agree to all terms and policies.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Register user as moderator\n      const registrationData = {\n        ...formData,\n        role: \"MODERATOR\",\n        firebaseUid: user?.id,\n        inviteToken,\n      };\n\n      const response = await apiRequest(\n        \"POST\",\n        \"/api/auth/register-moderator\",\n        registrationData,\n      );\n\n      toast({\n        title: \"Registration Successful!\",\n        description:\n          \"Welcome to the JumboJolt moderation team! Your account is pending approval.\",\n      });\n\n      // Redirect to moderator panel\n      navigate(\"/moderator\");\n    } catch (error: any) {\n      console.error(\"Registration error:\", error);\n      toast({\n        title: \"Registration Failed\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!validInvite) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <Lock className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-bold text-gray-900 mb-2\">\n                Access Restricted\n              </h2>\n              <p className=\"text-gray-600\">\n                Moderator registration requires a valid invite link. Please\n                contact an administrator.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-3xl\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\n            <Shield className=\"h-8 w-8 text-blue-600\" />\n            <CardTitle className=\"text-2xl font-bold text-gray-900\">\n              Join as Moderator\n            </CardTitle>\n          </div>\n          <p className=\"text-gray-600\">\n            Help shape the JumboJolt community and ensure quality content\n          </p>\n          <Badge variant=\"outline\" className=\"mx-auto\">\n            Invite Token: {inviteToken}\n          </Badge>\n        </CardHeader>\n\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Basic Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <Shield className=\"h-5 w-5 text-blue-600\" />\n                Basic Information\n              </h3>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"handle\">Username *</Label>\n                  <Input\n                    id=\"handle\"\n                    value={formData.handle}\n                    onChange={(e) =>\n                      setFormData((prev) => ({\n                        ...prev,\n                        handle: e.target.value,\n                      }))\n                    }\n                    placeholder=\"Choose a unique handle\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"email\">Email Address *</Label>\n                  <div className=\"relative\">\n                    <Mail className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={(e) =>\n                        setFormData((prev) => ({\n                          ...prev,\n                          email: e.target.value,\n                        }))\n                      }\n                      placeholder=\"your@email.com\"\n                      className=\"pl-10\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"phone\">Phone Number *</Label>\n                  <div className=\"relative\">\n                    <Phone className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                    <Input\n                      id=\"phone\"\n                      value={formData.phone}\n                      onChange={(e) =>\n                        setFormData((prev) => ({\n                          ...prev,\n                          phone: e.target.value,\n                        }))\n                      }\n                      placeholder=\"+91 XXXXX XXXXX\"\n                      className=\"pl-10\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"region\">Region *</Label>\n                  <div className=\"relative\">\n                    <MapPin className=\"absolute left-3 top-3 h-4 w-4 text-gray-400 z-10\" />\n                    <Select\n                      onValueChange={(value) =>\n                        setFormData((prev) => ({ ...prev, region: value }))\n                      }\n                    >\n                      <SelectTrigger className=\"pl-10\">\n                        <SelectValue placeholder=\"Select your city/region\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {regions.map((region) => (\n                          <SelectItem key={region} value={region}>\n                            {region}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Qualifications */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <Award className=\"h-5 w-5 text-purple-600\" />\n                Qualifications\n              </h3>\n\n              <div>\n                <Label htmlFor=\"experience\">Relevant Experience *</Label>\n                <Textarea\n                  id=\"experience\"\n                  value={formData.experience}\n                  onChange={(e) =>\n                    setFormData((prev) => ({\n                      ...prev,\n                      experience: e.target.value,\n                    }))\n                  }\n                  placeholder=\"Describe your experience in community management, content moderation, or related fields...\"\n                  rows={3}\n                  required\n                />\n              </div>\n\n              <div>\n                <Label>Areas of Expertise *</Label>\n                <p className=\"text-sm text-gray-600 mb-2\">\n                  Select your areas of expertise (minimum 1 required)\n                </p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {expertiseOptions.map((expertise) => (\n                    <Badge\n                      key={expertise}\n                      variant={\n                        formData.expertise.includes(expertise)\n                          ? \"default\"\n                          : \"outline\"\n                      }\n                      className=\"cursor-pointer hover:bg-opacity-80 transition-colors\"\n                      onClick={() => handleExpertiseToggle(expertise)}\n                    >\n                      {expertise}\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor=\"motivation\">\n                  Why do you want to be a moderator?\n                </Label>\n                <Textarea\n                  id=\"motivation\"\n                  value={formData.motivation}\n                  onChange={(e) =>\n                    setFormData((prev) => ({\n                      ...prev,\n                      motivation: e.target.value,\n                    }))\n                  }\n                  placeholder=\"Share your motivation for helping moderate the JumboJolt community...\"\n                  rows={3}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"references\">References (Optional)</Label>\n                <Input\n                  id=\"references\"\n                  value={formData.references}\n                  onChange={(e) =>\n                    setFormData((prev) => ({\n                      ...prev,\n                      references: e.target.value,\n                    }))\n                  }\n                  placeholder=\"LinkedIn profile, previous work, or contact references\"\n                />\n              </div>\n            </div>\n\n            {/* Agreements */}\n            <div className=\"space-y-4 p-4 bg-gray-50 rounded-lg\">\n              <h4 className=\"font-semibold flex items-center gap-2\">\n                <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />\n                Required Agreements\n              </h4>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"terms\"\n                    checked={formData.agreedToTerms}\n                    onChange={(e) =>\n                      setFormData((prev) => ({\n                        ...prev,\n                        agreedToTerms: e.target.checked,\n                      }))\n                    }\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1\"\n                  />\n                  <Label htmlFor=\"terms\" className=\"text-sm\">\n                    I agree to the{\" \"}\n                    <a href=\"/terms\" className=\"text-blue-600 hover:underline\">\n                      Terms and Conditions\n                    </a>{\" \"}\n                    and{\" \"}\n                    <a\n                      href=\"/privacy\"\n                      className=\"text-blue-600 hover:underline\"\n                    >\n                      Privacy Policy\n                    </a>\n                  </Label>\n                </div>\n\n                <div className=\"flex items-start space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"moderatorCode\"\n                    checked={formData.agreedToModeratorCode}\n                    onChange={(e) =>\n                      setFormData((prev) => ({\n                        ...prev,\n                        agreedToModeratorCode: e.target.checked,\n                      }))\n                    }\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1\"\n                  />\n                  <Label htmlFor=\"moderatorCode\" className=\"text-sm\">\n                    I agree to follow the{\" \"}\n                    <a\n                      href=\"/moderator-code\"\n                      className=\"text-blue-600 hover:underline\"\n                    >\n                      Moderator Code of Conduct\n                    </a>{\" \"}\n                    and understand my responsibilities as a community moderator\n                  </Label>\n                </div>\n              </div>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full bg-blue-600 hover:bg-blue-700\"\n              disabled={loading}\n            >\n              {loading\n                ? \"Submitting Application...\"\n                : \"Apply for Moderator Role\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":15571}}}